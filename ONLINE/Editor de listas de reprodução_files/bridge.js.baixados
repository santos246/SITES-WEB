(function(sb,Ja,qb){function N(a,b){function c(){}c.prototype=a;var d=new c,f;for(f in b)d[f]=b[f];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function mb(a){return a instanceof Array?function(){return w.iter(a)}:"function"==typeof a.iterator?x(a,a.iterator):a.iterator}function x(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=vb++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}Ja.ssiptv=Ja.ssiptv||{};var u={},ja=function(){return H.__string_rec(this,"")},ga=Ja.ssiptv.site=function(){};u.Site=ga;ga.__name__=["Site"];ga.getCreateUploadButton=function(a,b,c){V.getInstance().getCreateUploadButton(a,b,c)};ga.getUseExternalLogo=function(a){B.getInstance().getUseExternalLogo(a)};ga.setUseExternalLogo=function(a,b){B.getInstance().setUseExternalLogo(a,b)};ga.getContentImageSource=function(a){return V.getInstance().getContentImageSource(a)};ga.getSourceParams=function(a){return V.getInstance().getSourceParams(a)};ga.setSourceParams=function(a,b){return V.getInstance().setSourceParams(a,b)};ga.getOfferChannels=function(a,b,c){null==b&&(b=10);B.getInstance().getOfferChannels(a,b,c)};ga.getChannelTitle=function(a,b){B.getInstance().getChannelTitle(a,b)};ga.getCreateContentVO=function(a){return V.getInstance().getCreateContentVO(a)};ga.getDecodeJSON=function(a){return V.getInstance().getDecodeJSON(a)};ga.getEncodeJSON=function(a){return V.getInstance().getEncodeJSON(a)};ga.getDownloadContent=function(a,b,c){B.getInstance().getDownloadContent(a,b,c)};var Z=Ja.ssiptv.bridge=function(){};u.Bridge=Z;Z.__name__=["Bridge"];Z.main=function(){};Z.getDevices=function(a){B.getInstance().getDevices(a)};Z.getAccess=function(a,b){B.getInstance().getAccess(a,b)};Z.getCurrent=function(a){B.getInstance().getCurrent(a)};Z.setCurrent=function(a,b){B.getInstance().setCurrent(a,b)};Z.getDeviceName=function(a,b){B.getInstance().getDeviceName(a,b)};Z.setDeviceName=function(a,b,c){B.getInstance().setDeviceName(a,b,c)};Z.getDisconnect=function(a,b){B.getInstance().getDisconnect(a,b)};Z.getContent=function(a,b,c){B.getInstance().getContent(a,b,c)};Z.setContent=function(a,b,c,d){B.getInstance().setContent(a,b,c,d)};Z.getLoadContent=function(a,b,c){B.getInstance().getLoadContent(a,b,c)};Z.getSaveContent=function(a,b,c){B.getInstance().getSaveContent(a,b,c)};Z.getURLInfo=function(a,b){B.getInstance().getURLInfo(a,b)};var Ra=Ja.ssiptv.device=function(){};u.Device=Ra;Ra.__name__=["Device"];Ra.getShowKey=function(a,b){B.getInstance().getShowKey(a,b)};Ra.getCheckKey=function(a,b,c){B.getInstance().getCheckKey(a,b,c)};Ra.getConnect=function(a,b){B.getInstance().getConnect(a,b)};Ra.getLaunch=function(a,b,c){B.getInstance().getLaunch(a,b,c)};var eb=Ja.ssiptv.messages=function(){};u.Messages=eb;eb.__name__=["Messages"];eb.getJoin=function(a,b,c,d){B.getInstance().getJoin(a,b,c,d)};eb.getSend=function(a,b,c){B.getInstance().getSend(a,b,c)};eb.getLeave=function(){B.getInstance().getLeave()};var ca=Ja.ssiptv.partner=function(){};u.Partner=ca;ca.__name__=["Partner"];ca.getAuthorized=function(a){B.getInstance().getPartnerAuthorized(a)};ca.getAuthorization=function(a,b,c){B.getInstance().getPartnerAuthorization(a,b,c)};ca.getLogout=function(a){B.getInstance().getPartnerLogout(a)};ca.getSessionExpired=function(a){B.getInstance().getPartnerSessionExpired(a)};ca.getCheckAgreement=function(a,b){B.getInstance().getPartnerCheckAgreement(a,b)};ca.getAcceptAgreement=function(a){B.getInstance().getPartnerAcceptAgreement(a)};ca.getProviders=function(a){B.getInstance().getPartnerProviders(a)};ca.getPackages=function(a){B.getInstance().getPartnerPackages(a)};ca.getPackage=function(a,b){B.getInstance().getPartnerPackage(a,b)};ca.setPackage=function(a,b,c,d){B.getInstance().setPartnerPackage(a,b,c,d)};ca.getCheckCORS=function(a,b){B.getInstance().getPartnerCheckCORS(a,b)};ca.getRanges=function(a,b){B.getInstance().getPartnerRanges(a,b)};ca.setRanges=function(a,b,c){B.getInstance().setPartnerRanges(a,b,c)};var Sa=Ja.ssiptv.tools=function(){};u.Tools=Sa;Sa.__name__=["Tools"];Sa.decode=function(a){return ka.getInstance().decode(a)};Sa.decodeWithKey=function(a,b){return ka.getInstance().decodeWithKey(a,b)};Sa.decodeDeviceId=function(a,b){return ka.getInstance().decodeDeviceId(a,b)};Sa.getBuildDate=function(){return"2019-09-06 07:28:28"};var O=function(a,b){b=b.split("u").join("");this.r=new RegExp(a,b)};u.EReg=O;O.__name__=["EReg"];O.prototype={r:null,match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new t("EReg::matched")},matchedPos:function(){if(null==this.r.m)throw new t("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;this.r.m=this.r.exec(0>c?a:w.substr(a,0,b+c));if(b=null!=this.r.m)this.r.s=a;return b}if(c=this.match(0>c?w.substr(a,b,null):w.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c},replace:function(a,b){return a.replace(this.r,b)},map:function(a,b){var c=0,d=new da;do{if(c>=a.length)break;else if(!this.matchSub(a,c)){d.add(w.substr(a,c,null));break}var f=this.matchedPos();d.add(w.substr(a,c,f.pos-c));d.add(b(this));0==f.len?(d.add(w.substr(a,f.pos,1)),c=f.pos+1):c=f.pos+f.len}while(this.r.global);!this.r.global&&0<c&&c<a.length&&d.add(w.substr(a,c,null));return d.b},__class__:O};var w=function(){};u.HxOverrides=w;w.__name__=["HxOverrides"];w.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};w.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};w.indexOf=function(a,b,c){var d=a.length;0>c&&(c+=d,0>c&&(c=0));for(;c<d;){if(a[c]===b)return c;c++}return-1};w.lastIndexOf=function(a,b,c){var d=a.length;for(c>=d?c=d-1:0>c&&(c+=d);0<=c;){if(a[c]===b)return c;c--}return-1};w.remove=function(a,b){var c=w.indexOf(a,b,0);if(-1==c)return!1;a.splice(c,1);return!0};w.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ma=function(){};u.List=Ma;Ma.__name__=["List"];Ma.prototype={h:null,iterator:function(){return new fb(this.h)},__class__:Ma};var fb=function(a){this.head=a;this.val=null};u["_List.ListIterator"]=fb;fb.__name__=["_List","ListIterator"];fb.prototype={head:null,val:null,hasNext:function(){return null!=this.head},next:function(){this.val=this.head[0];this.head=this.head[1];return this.val},__class__:fb};Math.__name__=["Math"];var r=function(){};u.Reflect=r;r.__name__=["Reflect"];r.field=function(a,b){try{return a[b]}catch(c){return c instanceof t&&(c=c.val),null}};r.setField=function(a,b,c){a[b]=c};r.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};r.callMethod=function(a,b,c){return b.apply(a,c)};r.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};r.compare=function(a,b){return a==b?0:a>b?1:-1};r.isObject=function(a){if(null==a)return!1;var b=typeof a;return"string"==b||"object"==b&&null==a.__enum__||"function"==b&&null!=(a.__name__||a.__ename__)};r.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var D=function(){};u.Std=D;D.__name__=["Std"];D.string=function(a){return H.__string_rec(a,"")};D.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=w.cca(a,1)&&88!=w.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var da=function(){this.b=""};u.StringBuf=da;da.__name__=["StringBuf"];da.prototype={b:null,add:function(a){this.b+=D.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+w.substr(a,b,null):this.b+w.substr(a,b,c)},__class__:da};var A=function(){};u.StringTools=A;A.__name__=["StringTools"];A.urlEncode=function(a){return encodeURIComponent(a)};A.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};A.startsWith=function(a,b){return a.length>=b.length&&w.substr(a,0,b.length)==b};A.isSpace=function(a,b){var c=w.cca(a,b);return 8<c&&14>c||32==c};A.ltrim=function(a){for(var b=a.length,c=0;c<b&&A.isSpace(a,c);)c++;return 0<c?w.substr(a,c,b-c):a};A.rtrim=function(a){for(var b=a.length,c=0;c<b&&A.isSpace(a,b-c-1);)c++;return 0<c?w.substr(a,0,b-c):a};A.trim=function(a){return A.ltrim(A.rtrim(a))};A.rpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a+=b;return a};A.replace=function(a,b,c){return a.split(b).join(c)};A.hex=function(a,b){var c="";do{c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4}while(0<a);if(null!=b)for(;c.length<b;)c="0"+c;return c};A.fastCodeAt=function(a,b){return a.charCodeAt(b)};var K={__ename__:!0,__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" "),TNull:["TNull",0]};K.TNull.toString=ja;K.TNull.__enum__=K;K.TInt=["TInt",1];K.TInt.toString=ja;K.TInt.__enum__=K;K.TFloat=["TFloat",2];K.TFloat.toString=ja;K.TFloat.__enum__=K;K.TBool=["TBool",3];K.TBool.toString=ja;K.TBool.__enum__=K;K.TObject=["TObject",4];K.TObject.toString=ja;K.TObject.__enum__=K;K.TFunction=["TFunction",5];K.TFunction.toString=ja;K.TFunction.__enum__=K;K.TClass=function(a){a=["TClass",6,a];a.__enum__=K;a.toString=ja;return a};K.TEnum=function(a){a=["TEnum",7,a];a.__enum__=K;a.toString=ja;return a};K.TUnknown=["TUnknown",8];K.TUnknown.toString=ja;K.TUnknown.__enum__=K;var T=function(){};u.Type=T;T.__name__=["Type"];T.getClass=function(a){return null==a?null:H.getClass(a)};T.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};T.resolveClass=function(a){a=u[a];return null!=a&&a.__name__?a:null};T.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw new t("Too many arguments")}};T.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};T.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);w.remove(b,"__class__");w.remove(b,"__properties__");return b};T.getClassFields=function(a){a=r.fields(a);w.remove(a,"__name__");w.remove(a,"__interfaces__");w.remove(a,"__properties__");w.remove(a,"__super__");w.remove(a,"__meta__");w.remove(a,"prototype");return a};T["typeof"]=function(a){switch(typeof a){case"boolean":return K.TBool;case"string":return K.TClass(String);case"number":return Math.ceil(a)==a%2147483648?K.TInt:K.TFloat;case"object":if(null==a)return K.TNull;var b=a.__enum__;if(null!=b)return K.TEnum(b);a=H.getClass(a);return null!=a?K.TClass(a):K.TObject;case"function":return a.__name__||a.__ename__?K.TObject:K.TFunction;case"undefined":return K.TNull;default:return K.TUnknown}};var k=function(a){this.nodeType=a;this.children=[];this.attributeMap=new Fa};u.Xml=k;k.__name__=["Xml"];k.parse=function(a){return Ba.parse(a)};k.createElement=function(a){var b=new k(k.Element);if(b.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};k.createPCData=function(a){var b=new k(k.PCData);if(b.nodeType==k.Document||b.nodeType==k.Element)throw new t("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};k.createCData=function(a){var b=new k(k.CData);if(b.nodeType==k.Document||b.nodeType==k.Element)throw new t("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};k.createComment=function(a){var b=new k(k.Comment);if(b.nodeType==k.Document||b.nodeType==k.Element)throw new t("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};k.createDocType=function(a){var b=new k(k.DocType);if(b.nodeType==k.Document||b.nodeType==k.Element)throw new t("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};k.createProcessingInstruction=function(a){var b=new k(k.ProcessingInstruction);if(b.nodeType==k.Document||b.nodeType==k.Element)throw new t("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};k.createDocument=function(){return new k(k.Document)};k.prototype={nodeType:null,nodeName:null,nodeValue:null,parent:null,children:null,attributeMap:null,get_nodeValue:function(){if(this.nodeType==k.Document||this.nodeType==k.Element)throw new t("Bad node type, unexpected "+this.nodeType);return this.nodeValue},get:function(a){if(this.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.get(a)},set:function(a,b){if(this.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+this.nodeType);this.attributeMap.set(a,b)},exists:function(a){if(this.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.exists(a)},attributes:function(){if(this.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.keys()},elements:function(){if(this.nodeType!=k.Document&&this.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=[],b=0,c=this.children;b<c.length;){var d=c[b];++b;d.nodeType==k.Element&&a.push(d)}return w.iter(a)},addChild:function(a){if(this.nodeType!=k.Document&&this.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=k.Document&&this.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+this.nodeType);return w.remove(this.children,a)?(a.parent=null,!0):!1},__class__:k,__properties__:{get_nodeValue:"get_nodeValue"}};var z=function(a){this.__children=[];this.__parent=null!=a&&null!=a.parent?a.parent:null;this.__listeners=[]};u["core.EventDispatcher"]=z;z.__name__=["core","EventDispatcher"];z.prototype={__listeners:null,__children:null,__parent:null,dispatchEvent:function(a,b){null==b&&(b=0);var c=this;if(null==a.type||""==a.type)return this;if(0<b)return Na.delay(function(){c.dispatchEvent(a)},b),this;null==a.target&&(a.target=this);if(0==a.bubbling&&1==a.forward)return a.forward=!1,a.bubbling=!0,this.bubbleDown(a),this;1==a.bubbling&&null!=this.__parent?this.__parent.bubbleUp(a):this.bubbleUp(a);return this},raiseEvent:function(a){for(var b=0,c=this.__listeners;b<c.length;){var d=c[b];++b;if(d.eventType==a.type){a.currentTarget=this;var f=this;null!=d.context&&(f=d.context);r.callMethod(f,d.handler,[a])}}},hasListener:function(a){for(var b=!1,c=0,d=this.__listeners;c<d.length;){var f=d[c];++c;b=b||f.eventType==a}return b},hasListenersGroup:function(a){for(var b=!1,c=0,d=T.getClassFields(a);c<d.length;){var f=d[c];++c;for(var g=0,e=this.__listeners;g<e.length;){var h=e[g];++g;b=b||h.eventType==r.getProperty(a,f)}}return b},addEventListener:function(a,b,c){for(var d=0,f=this.__listeners;d<f.length;){var g=f[d];++d;if(g.eventType==a&&g.handler==b)return}this.__listeners.push({eventType:a,handler:b,host:this,context:c})},removeEventListener:function(a,b){for(var c=0,d=this.__listeners.length;c<d;){var f=c++;if(this.__listeners[f].eventType==a&&this.__listeners[f].handler==b){this.__listeners.splice(f,1);break}}},bubbleUp:function(a){null==this.__parent?1==a.forward?(a.forward=!1,this.bubbleDown(a,!0)):this.raiseEvent(a):(null!=this.__parent&&1==a.bubbling&&this.__parent.bubbleUp(a),this.raiseEvent(a))},bubbleDown:function(a,b){for(var c=0,d=this.__children;c<d.length;){var f=d[c];++c;f=H.__cast(f,z);null!=f&&f.bubbleDown(a)}this.raiseEvent(a)},__class__:z};var ta=function(){};u["core.crypt.Base64"]=ta;ta.__name__=["core","crypt","Base64"];ta.enocdeBytesData=function(a){a=P.ofData(a);var b=P.ofString("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");a=new Ta(b).encodeBytes(a).toString();b=a.length%4;1<b&&(a+="=");2==b&&(a+="=");return a};ta.decodeBytesData=function(a){var b=-1;"="==a.charAt(a.length-2)?b=2:"="==a.charAt(a.length-1)&&(b=1);-1!=b&&(a=w.substr(a,0,a.length-b));b=P.ofString("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");return new Ta(b).decodeBytes(P.ofString(a)).b.bufferValue};var ea=function(){};u["core.crypt.HMAC_SHA1"]=ea;ea.__name__=["core","crypt","HMAC_SHA1"];ea.UTF8Encode=function(a){for(var b="",c=0,d=a.length;c<d;){var f=c++,f=w.cca(a,f);128>f?b+=String.fromCharCode(f):(127<f&&2048>f?b+=String.fromCharCode(f>>6|192):(b+=String.fromCharCode(f>>12|224),b+=String.fromCharCode(f>>6&63|128)),b+=String.fromCharCode(f&63|128))}return b};ea.hexToBytesBuffer=function(a){var b=Math.ceil(a.length/2);1==a.length%2&&(a="0"+a);for(var c=new Oa,d=0;d<b;){var f=d++,f=D.parseInt("0x"+w.substr(a,2*f,2));c.b.push(f)}return c};ea.bytesToString=function(a){for(var b="",c=0,d=a.length;c<d;)var f=c++,b=b+String.fromCharCode(a.b[f]);return b};ea.encode=function(a,b){var c=null;if(64<a.length){for(var d=ea.hexToBytesBuffer(ua.encode(a)),c=20;64>c;)c++,d.b.push(0);c=d.getBytes()}else c=P.ofString(A.rpad(a,String.fromCharCode(0),64));for(var f=new Oa,d=new Oa,g=0,e=c.length;g<e;){var h=g++,h=c.b[h];f.b.push(54^h);d.b.push(92^h)}c=f.getBytes();d=d.getBytes();c=ua.encode(ea.bytesToString(c)+ea.UTF8Encode(b));return ua.encode(ea.bytesToString(d)+ea.bytesToString(ea.hexToBytesBuffer(c).getBytes()))};var Ka=function(){};u["core.crypt.XOR"]=Ka;Ka.__name__=["core","crypt","XOR"];Ka.encode=function(a,b){for(var c=P.ofString(a),d=P.ofString(b),f=P.alloc(c.length),g=d.length,e=0,h=c.length;e<h;){var n=e++;f.b[n]=(c.b[n]^d.b[n%g])&255}return f.b.bufferValue};Ka.decode=function(a,b){for(var c=P.alloc(a.byteLength),d=P.ofString(b),f=P.ofData(a),g=d.length,e=0,h=f.length;e<h;){var n=e++;c.b[n]=(f.b[n]^d.b[n%g])&255}return c.toString()};var I=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);z.eventCounter++;this.type=a;this.bubbling=b;this.forward=c;this.currentTarget=this.target=null;this.params=d;this.data=f};u["core.event.Event"]=I;I.__name__=["core","event","Event"];I.prototype={type:null,bubbling:null,forward:null,target:null,currentTarget:null,data:null,params:null,__class__:I};var Ua=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f);this.data=this.error=null};u["core.event.HttpRequestEvent"]=Ua;Ua.__name__=["core","event","HttpRequestEvent"];Ua.__super__=I;Ua.prototype=N(I.prototype,{contentType:null,error:null,__class__:Ua});var Ga=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f);this.error=!1};u["core.event.NetworkServiceEvent"]=Ga;Ga.__name__=["core","event","NetworkServiceEvent"];Ga.__super__=I;Ga.prototype=N(I.prototype,{contentType:null,error:null,local:null,__class__:Ga});var Va=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["core.event.TimerEvent"]=Va;Va.__name__=["core","event","TimerEvent"];Va.__super__=I;Va.prototype=N(I.prototype,{repeat:null,repeats:null,timer:null,__class__:Va});var Wa=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["core.event.WebSocketEvent"]=Wa;Wa.__name__=["core","event","WebSocketEvent"];Wa.__super__=I;Wa.prototype=N(I.prototype,{__class__:Wa});var aa=function(){};u["core.utils.Capability"]=aa;aa.__name__=["core","utils","Capability"];aa.getCountryCode2to3=function(a){a=null!=a?A.trim(a).toLowerCase():"";var b="";if(2==a.length)for(var c=0,d=Math.floor(aa.county_codes.length/5);c<d;){var f=c++,f=w.substr(aa.county_codes,5*f,5);if(w.substr(f,0,2).toLowerCase()==a){b=w.substr(f,2,null).toLowerCase();break}}return b};aa.getCountryCode3to2=function(a){a=null!=a?A.trim(a).toLowerCase():"";var b="";if(3==a.length)for(var c=0,d=Math.floor(aa.county_codes.length/5);c<d;){var f=c++,f=w.substr(aa.county_codes,5*f,5);if(w.substr(f,2,null).toLowerCase()==a){b=w.substr(f,0,2).toLowerCase();break}}return b};aa.getCountryCode=function(a,b){null==b&&(b="");var c;c=null!=a?A.trim(a).toLowerCase():"";var d=c.length;if(2==d||3==d)for(var f=0,g=Math.floor(aa.county_codes.length/5);f<g;){var e=f++;if(c==w.substr(aa.county_codes,5*e+(3==d?2:0),d))return w.substr(aa.county_codes,5*e,2)}return b};var Ha=function(a){z.call(this,a);this._list=[];this._timer=new la({delay:100,repeats:0});this.defineEventHandlers()};u["core.utils.EventsQueue"]=Ha;Ha.__name__=["core","utils","EventsQueue"];Ha.__super__=z;Ha.prototype=N(z.prototype,{_list:null,_timer:null,defineEventHandlers:function(){this.addEventListener("5",x(this,this.updateHandler),this);this._timer.addEventListener("53",x(this,this.timerTickHandler),this)},getResposne:function(a,b){if(null!=this._list&&0<=a&&a<this._list.length){var c=this._list.splice(a,1)[0];if(null!=c.children&&0<c.children.length&&(c=c.children,null!=c&&0<c.length))for(var d=0;d<c.length;){var f=c[d];++d;null!=f&&null!=f.event&&null!=f.dispatcher&&(f.event.data=b,f.dispatcher.dispatchEvent(f.event))}}},getAddEvent:function(a,b,c){for(var d=0,f=this._list.length;d<f;){var g=d++;if(this._list[g].type==a){var e=this._list[g].children,h=!1;if(0<e.length)for(var n=0;n<e.length;){var m=e[n];++n;if(null!=m&&m.event==c){h=!0;break}}h||e.push({dispatcher:b,event:c});this._list[g].children=e}}return!1},getWrap:function(a,b,c){null==c&&(c=2e3);var d=new I("5");d.params={type:b.type,id:Ha.__index++};this._list.push({type:b.type,timeout:c/1e3,timestamp:e.get_timestamp(),children:[{dispatcher:a,event:b}]});this._timer._active||this._timer.start();return d},updateHandler:function(a){if(null!=a&&null!=a.params&&null!=a.params.type){for(var b=-1,c=0,d=this._list.length;c<d;){var f=c++;if(this._list[f].type==a.params.type){b=f;break}}this.getResposne(b,a.data)}},timerTickHandler:function(a){this._list=null==this._list?[]:this._list;if(0<this._list.length){a=e.get_timestamp();for(var b=0,c=this._list.length;b<c;){var d=b++;null!=this._list[d]&&this._list[d].timestamp+this._list[d].timeout<a&&this.getResposne(d,{success:!1})}}else this._timer.abort()},__class__:Ha});var M=function(a,b,c,d,f){null==d&&(d="TEXT");null==c&&(c="GET");z.call(this,{});this._url=a;this._headers=f;a=window.navigator.userAgent.toLowerCase();this._msie=0<a.indexOf("msie ")||0<a.indexOf("trident");this._jsonp=c.toUpperCase()==M.HTTP_REQUEST_JSONP;this._jsonpCallbackName="";this._requestData=b;this._requestType=c;this._contentType=d;this._ready=!1;this._timerId=-1;this._timeout=3e4};u["core.utils.HttpRequest"]=M;M.__name__=["core","utils","HttpRequest"];M.getCustomRequest=function(a,b,c,d,f,g,e,h,n){null==h&&(h=0);null==e&&(e=3e3);null==g&&(g=1024);var m={xhr:ma.createXMLHttpRequest(),type:a,source:b,headers:c,dispatcher:d,event:f,max:g,timeout:e,stage:{step:-1,event:null,complete:!1},delay:h};m.xhr.onreadystatechange=function(a){m.stage.event=a;m.stage.step=0;M.getCustomRequestHandler(m)};m.xhr.onprogress=function(a){m.stage.event=a;m.stage.step=1;M.getCustomRequestHandler(m)};m.timeoutId=window.setTimeout(function(){m.stage.event=null;m.stage.step=2;M.getCustomRequestHandler(m)},e);m.xhr.open(a,b,!0);"head"!=a.toLowerCase()&&m.xhr.overrideMimeType("application/x-www-form-urlencoded");for(a=0;a<c.length;)b=c[a],++a,d=b.indexOf(":"),b=0<d?[b.substring(0,d),b.substring(d+1)]:[],0<b.length&&m.xhr.setRequestHeader(A.trim(b[0]),A.trim(1<b.length?b[1]:""));try{m.xhr.send(n)}catch(G){G instanceof t&&(G=G.val)}};M.getCustomRequestHandler=function(a){if(null!=a.stage&&1!=a.stage.complete){var b=a.stage.event,c=a.dispatcher,d=a.event,f;f=null!=a.delay?a.delay:0;var g;g=null==a.max||0>=a.max?1024:a.max;switch(a.stage.step){case 0:null!=a.xhr&&3==a.xhr.readyState?(b=a.xhr.responseText.length,b>g&&(a.xhr.abort(),d.data={success:!1,reason:"overflow",xhr:a.xhr,loaded:b,total:null},c.dispatchEvent(d),window.clearTimeout(a.timeoutId),a.xhr=null)):null!=a.xhr&&4==a.xhr.readyState&&(a.stage.complete=!0,window.clearTimeout(a.timeoutId),d.data={success:!0,reason:"",xhr:a.xhr},c.dispatchEvent(d,f),a.xhr=null);break;case 1:if(null!=b){var e;e=null!=b.loaded?b.loaded:b.position;e>g&&(a.stage.complete=!0,a.xhr.abort(),d.data={success:!1,reason:"overflow",xhr:a.xhr,loaded:e,total:null!=b.total?b.total:b.totalSize},c.dispatchEvent(d,f),window.clearTimeout(a.timeoutId),a.xhr=null)}break;case 2:a.stage.complete=!0,null!=a.xhr&&null!=a.xhr.abort&&(d.data={xhr:a.xhr,success:!1,reason:"timeout"},c.dispatchEvent(d),a.xhr.abort(),a.xhr=null)}}};M.__super__=z;M.prototype=N(z.prototype,{_request:null,_url:null,_requestData:null,_requestType:null,_contentType:null,_data:null,_timerId:null,_timeout:null,_ready:null,_jsonp:null,_jsonpCallbackName:null,_jsonpTag:null,_headers:null,_msie:null,contentType:null,set_data:function(a){return this._data=a},get_data:function(){return this._data},get_contentType:function(){return this._contentType},load:function(){this._ready=!1;var a=this;this._timerId=window.setTimeout(function(){x(a,a.timeoutHandler).call({link:a})},this._timeout);for(var b="",c=0,d=r.fields(this._requestData);c<d.length;){var f=d[c];++c;b+=(""!=b?"&":"")+encodeURIComponent(f)+"="+A.urlEncode(r.getProperty(this._requestData,f))}if(this._jsonp)c=this._jsonpCallbackName="jsonphandler"+M.callbackIndex++,window[c]=function(b){a.makeResultEvent(b)},b=this._url+"?"+b+(""!=b?"&":"")+"callback="+encodeURIComponent(c),e.getHead().appendChild(this._jsonpTag=e.createTag("script",{type:"text/javascript",async:"true",src:b}));else{c=this._msie?window.XDomainRequest:null;this._request=null!=c?T.createInstance(c,[]):ma.createXMLHttpRequest();this._request.open(this._requestType,this._url,!0);null!=this._request.overrideMimeType&&this._request.overrideMimeType("text/xml");if(null!=this._request.setRequestHeader&&(this._request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),null!=this._headers&&0<this._headers.length))for(d=0,f=this._headers;d<f.length;){var g=f[d];++d;if(null!=g&&0<g.length){var q=g.indexOf(":"),h=g.substring(0,0<=q?q:g.length),g=A.trim(0<q?g.substring(q+1,g.length):"");null!=h&&0<h.length&&this._request.setRequestHeader(h,null!=g?g:"")}}var n=this;null!=c?(this._request.onprogress=function(a){n.httpReadyStateChangeHandler.call(n,{xdomain:!0,state:1})},this._request.ontimeout=function(a){n.httpReadyStateChangeHandler.call(n,{xdomain:!0,state:2})},this._request.onerror=function(a){n.httpReadyStateChangeHandler.call(n,{xdomain:!0,state:3})},this._request.onload=function(a){n.httpReadyStateChangeHandler.call(n,{xdomain:!0,state:4})}):this._request.onreadystatechange=function(a){n.httpReadyStateChangeHandler.call(n,a)};this._request.send(b)}},makeResultEvent:function(a,b){null==b&&(b="");this._ready=!0;var c=new Ua(null!=a?"57":"56");c.contentType=this._contentType;c.data=null;c.error=b;-1!=this._timerId&&clearTimeout(this._timerId);if(null!=a)if(this._contentType==M.HTTP_REQUEST_XML)c.data=a;else switch(T["typeof"](a)[1]){case 4:c.data=a;break;default:switch(c.data=a,this._contentType){case"XML":c.data=k.parse(a);break;case"JSON":c.data=e.decodeJSON(a)}}if(""!=this._jsonpCallbackName){var d=this._jsonpCallbackName;e.getHead().removeChild(this._jsonpTag);window[d]=null}this.dispatchEvent(c)},httpReadyStateChangeHandler:function(a){if(null!=a&&1==a.xdomain){if(null!=a.state&&1<a.state){var b=this._contentType==M.HTTP_REQUEST_XML;this.makeResultEvent(4==a.state?b?this._request.responseXML:null!=this._request.responseText&&0<this._request.responseText.length?this._request.responseText:null:null)}}else 4==this._request.readyState&&(a=this._contentType==M.HTTP_REQUEST_XML,this.makeResultEvent(200==this._request.status?a?this._request.responseXML:null!=this._request.responseText&&0<this._request.responseText.length?this._request.responseText:null:null))},timeoutHandler:function(a){1!=this._ready&&this.makeResultEvent(null,"timeout")},__class__:M,__properties__:{get_contentType:"get_contentType",set_data:"set_data",get_data:"get_data"}});var Ca=function(a){z.call(this,null==a?a={}:a);this._defaultRequestType=null!=a.requestType?a.requestType:M.HTTP_REQUEST_TYPE_GET;this._defaultContentType=null!=a.contentType?a.contentType:M.HTTP_REQUEST_TEXT;this._svc_proc=1==a.svc;this._svc_key=1==a.svc;this._secretKey=null!=a.secretKey?a.secretKey:"key";this._serverUrl=a.serverUrl};u["core.utils.NetworkService"]=Ca;Ca.__name__=["core","utils","NetworkService"];Ca.getPrepareParams=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);var f={};if(0!=a.secret||1!=r.fields(a).length){f.timestamp=e.get_timestamp();for(var g=0,q=r.fields(a);g<q.length;){var h=q[g];++g;switch(T["typeof"](r.field(a,h))[1]){case 4:r.setField(f,h,e.encodeJSON(r.field(a,h)));break;case 0:f[h]="";break;default:r.setField(f,h,r.field(a,h)instanceof Array&&null==r.field(a,h).__enum__?e.encodeJSON(r.field(a,h)):r.field(a,h))}}}if(""!=b&&0<r.fields(f).length){a="";g=r.fields(f);g.sort(function(a,b){return r.compare(a.toLowerCase(),b.toLowerCase())});for(q=0;q<g.length;)h=g[q],++q,a+=h+"="+D.string(r.field(f,h))+";";f.signature=ea.encode(b,a)}""!=b&&c&&(f=d?{p:ta.enocdeBytesData(Ka.encode(e.encodeJSON(f),b))}:{v:ta.enocdeBytesData(P.ofString(e.encodeJSON(f)).getData())});return f};Ca.__super__=z;Ca.prototype=N(z.prototype,{_serverUrl:null,_secretKey:null,_svc_proc:null,_svc_key:null,_defaultRequestType:null,_defaultContentType:null,set_serverUrl:function(a){return this._serverUrl=a},get_serverUrl:function(){return this._serverUrl},set_secretKey:function(a){return this._secretKey=a},get_secretKey:function(){return this._secretKey},serviceCall:function(a,b,c,d,f,g,e){null==f&&(f="default");null==d&&(d="default");null==a&&(a={});if(null==d)d=this._defaultRequestType;else if(""==A.trim(d)||"default"==A.trim(d).toLowerCase())d=this._defaultRequestType;this._svc_proc&&(d=M.HTTP_REQUEST_TYPE_POST);if(null==f)f=this._defaultContentType;else if(""==A.trim(f)||"default"==A.trim(f).toLowerCase())f=this._defaultContentType;this._svc_proc&&(f=M.HTTP_REQUEST_JSON);if(null==g){if(null==this._serverUrl)return null;g=this._serverUrl}var h;h=null!=a.__local?a.__local:null;null!=h&&r.deleteField(a,"__local");a=Ca.getPrepareParams(a,null==e?this.get_secretKey():e,this._svc_proc,this._svc_key);d=new M(g,a,this._svc_proc?M.HTTP_REQUEST_TYPE_POST:d,f);d.addEventListener("57",x(this,this.serviceCallLoadCompleteHandler),this);d.addEventListener("56",x(this,this.serviceCallLoadCompleteHandler),this);d.set_data({event:b,dispatcher:c,localData:h});d.load();return d},serviceCallLoadCompleteHandler:function(a){var b;b=H.__cast(a.target,M);b.removeEventListener("57",x(this,this.serviceCallLoadCompleteHandler));b.removeEventListener("56",x(this,this.serviceCallLoadCompleteHandler));var c;c=H.__cast(b.get_data().event,Ga);if(null!=c){var d=null;"56"!=a.type&&(d=a.data,b.get_contentType()==M.HTTP_REQUEST_XML?d=a.data:(null!=a.data&&null!=a.data.p&&"string"==typeof a.data.p&&(d=e.decodeJSON(Ka.decode(ta.decodeBytesData(a.data.p),this.get_secretKey()))),null!=a.data&&null!=a.data.v&&"string"==typeof a.data.v&&(d=e.decodeJSON(P.ofData(ta.decodeBytesData(a.data.v)).toString()))));c.error="56"==a.type;c.data="56"==a.type?a.error:d;c.contentType=a.contentType;c.local=b.get_data().localData;b.get_data().dispatcher.dispatchEvent(c)}},__class__:Ca,__properties__:{set_secretKey:"set_secretKey",get_secretKey:"get_secretKey",set_serverUrl:"set_serverUrl",get_serverUrl:"get_serverUrl"}});var la=function(a){z.call(this,null==a?a={}:a);this._timerID=null;this._delay=null!=a.delay&&0<a.delay?a.delay:1e3;this._repeat=0;this._repeats=null!=a.repeats&&0<=a.repeats?a.repeats:-1;this._dispatcher=null!=a.target?a.target:this;this._data=null!=a.data?a.data:null;this._active=this._paused=!1;la._timersCount+=1};u["core.utils.Timer"]=la;la.__name__=["core","utils","Timer"];la.__super__=z;la.prototype=N(z.prototype,{_timerID:null,_repeats:null,_repeat:null,_delay:null,_data:null,_dispatcher:null,_paused:null,_active:null,active:null,set_delay:function(a){0<a&&(this._delay=a);return this._delay},get_delay:function(){return this._delay},set_data:function(a){return this._data=a},get_data:function(){return this._data},set_repeats:function(a){0<=a&&(this._repeats=a);return this._repeats},get_repeats:function(){return this._repeats},set_repeat:function(a){return this._repeat=a},get_repeat:function(){return this._repeat},set_paused:function(a){a?null!=this._timerID&&(clearInterval(this._timerID),this._paused=!0,this._timerID=null,this._active=!1):(this._active=!0,this.start());return a},get_paused:function(){return this._paused},get_active:function(){return this._active},start:function(){if(0<this._delay&&0<=this._repeats){this._paused||(this._repeat=0);var a=this;this._timerID=setInterval(function(){x(a,a.timerTickLocalHandler).call(a)},this._delay,this);this._paused=!1;this._active=!0}else this.sendEvent("54")},stop:function(){null!=this._timerID&&(clearInterval(this._timerID),this._timerID=null,this._active=!1,this.sendEvent("54"))},abort:function(){null!=this._timerID&&(clearInterval(this._timerID),this._timerID=null,this._paused=this._active=!1,this._repeat=0)},restart:function(){this.abort();this.start()},sendEvent:function(a){a=new Va(a,!1,!1);a.timer=this;a.repeat=this._repeat;a.repeats=this._repeats;this._dispatcher.dispatchEvent(a)},timerTickLocalHandler:function(){la._timersTicks++;this._repeat++;this.sendEvent("53");0!=this._repeats&&this._repeat>=this._repeats&&this.stop()},__class__:la,__properties__:{get_active:"get_active",set_paused:"set_paused",get_paused:"get_paused",set_repeat:"set_repeat",get_repeat:"get_repeat",set_repeats:"set_repeats",get_repeats:"get_repeats",set_data:"set_data",get_data:"get_data",set_delay:"set_delay",get_delay:"get_delay"}});var e=function(){};u["core.utils.Utils"]=e;e.__name__=["core","utils","Utils"];e.__properties__={get_systemtime:"get_systemtime",get_timestamp:"get_timestamp"};e.trim=function(a){return A.trim(a)};e.parseInt=function(a,b){null==b&&(b=-1);var c=b;null!=a&&((a|0)===a&&(c=a),"number"==typeof a&&(c=Math.round(a)),"string"==typeof a&&(c=D.parseInt(a)));return null==c?b:c};e.getReplaceMap=function(a){var b=[];if(null!=a&&0<a.length)for(var c=0,d=Math.floor(a.length/2);c<d;){var f=c++;b[w.cca(a,2*f)]=a.charAt(2*f+1)}return b};e.setReplacePattern=function(a){e._symbolsReplaceMap=e.getReplaceMap(a)};e.getReplaceSymbols=function(a,b,c){null==c&&(c=!0);null==e._symbolsReplaceMap&&(e._symbolsReplaceMap=e.getReplaceMap(e._defaultSymbolsMap));b=a;for(var d=0,f=b.length;d<f;){var g=d++,q=e._symbolsReplaceMap[w.cca(b,g)];null!=q&&(b=(0<g?w.substr(b,0,g):"")+q+(g+1<b.length?w.substr(b,g+1,null):""))}return c?a:null};e.getRemoveBrackets=function(a,b,c){null==c&&(c=!1);null==b&&(b="()");null==b&&(b="()");null==a&&(a="");if(2<=b.length&&0<a.length){var d=!0,f=-1,g=w.cca(b,0);for(b=w.cca(b,1);d;){for(var d=-1,e=0,h=-1;e<a.length&&w.cca(a,e)!=g;)e++;if(e<a.length&&w.cca(a,e)==g){for(var n=1,m=e+1;m<a.length&&0!=((d=w.cca(a,m))==g?n+=1:d==b?n+=-1:n+=0);)m++;m<a.length&&w.cca(a,m)==b&&(h=m)}if(d=0<=e&&0<h&&e<a.length&&h<a.length)c&&0<=f&&"/"==a.charAt(e+1)?(a=a.substring(0,f)+a.substring(h+1,a.length),f=0):(a=a.substring(0,e)+a.substring(h+1,a.length),f=e)}}return a};e.decodeJSON=function(a,b){var c=b;if(null!=a&&0<a.length)try{c=null!=window.JSON&&null!=window.JSON.parse?window.JSON.parse(a):na.parse(a)}catch(d){d instanceof t&&(d=d.val),sb.log("[Utils] Fail to decode JSON: "+D.string(d))}return c};e.encodeJSON=function(a){var b="";if(null!=a)try{b=null!=window.JSON&&null!=window.JSON.stringify?window.JSON.stringify(a):na.encode(a)}catch(c){c instanceof t&&(c=c.val),sb.log("[Utils] Fail to encode JSON: "+D.string(c))}return b};e.getURLFileExtension=function(a){a=null==a?"":A.trim(a);var b="";if(0<a.length){var b=0,c=a.length,b="";1<a.length&&("\\"==a.charAt(0)&&"\\"==a.charAt(1)||"/"==a.charAt(0)&&a.charAt(1));if(2<a.length&&":"==a.charAt(1)&&("\\"==(b=a.charAt(2))||"/"==b)){for(c=a.length;0<c&&"\\"!=(b=a.charAt(c))&&"/"!=b;)c--;b=c+1;c=a.length}else{var c=a.indexOf("://"),d;d=0<c?c+3:0;for(var c=a.length,f=d;f<a.length&&"?"!=(b=a.charAt(f))&&"#"!=b;)f++;f<a.length&&(c=f);for(f=c;f>=d&&"/"!=(b=a.charAt(f))&&"\\"!=b;)f--;b=f>=d?f+1:d}for(d=c;d>=b&&"."!=a.charAt(d);)d--;b=d>=b&&"."==a.charAt(d)?a.substring(d+1,c):""}return b};e.getURLParamsSubstring=function(a,b){null==b&&(b=!1);var c;c=null!=a?a.length:0;c=[c,c];if(null!=a&&0<a.length){var d=a.indexOf("#"),f=a.length;0>d&&(d=f);var g=a.indexOf("?"),e=d;0>g&&(g=d);b&&d<f?c=[d,f]:!b&&g<e&&(c=[g,e])}return c};e.getURLParams=function(a,b,c){null==c&&(c=!0);null==b&&(b=!1);var d={},f="";null!=a&&0<a.length&&(b=e.getURLParamsSubstring(a,b),null!=b&&1<b.length&&0<=b[0]&&b[0]<b[1]&&b[1]<=a.length&&(f=a.substring(b[0]+1,b[1])));if(1<f.length)for(a=0,f=f.split("&");a<f.length;){b=f[a];++a;var g=b.split("=");if(0<g.length&&null!=g[0]){b="";try{b=decodeURIComponent(g[0].split("+").join(" "))}catch(q){q instanceof t&&(q=q.val)}0<b.length&&(g=1<g.length&&null!=g[1]?decodeURIComponent(g[1].split("+").join(" ")):"",r.setField(d,c?b.toLowerCase():b,g))}}return d};e.setURLParams=function(a,b,c,d,f){null==f&&(f=!0);null==d&&(d=!0);null==c&&(c=!1);var g;g=null==a?a="":null==a?a="null":a=""+a;var q=r.fields(b);if(0<q.length){g=e.getURLParamsSubstring(a,c);var h;for(h=g[0]<g[1]?a.substring(g[0]+1,g[1]).split("&"):[];w.remove(h,""););for(var n=[],m=0;m<h.length;){var G=h[m];++m;var l=G.indexOf("="),p="";try{p=A.urlDecode(0<=l?G.substring(0,l):G)}catch(k){k instanceof t&&(k=k.val)}0<p.length&&n.push(p)}for(m=0;m<q.length;)if(l=q[m],++m,G=w.indexOf(n,l,0),d&&0<=G||0>G)p=e.trim(A.urlEncode(D.string(r.field(b,l)))),l=f||!f&&0<p.length?encodeURIComponent(l)+"="+p:"",0>G?h.push(l):0<=G&&G<h.length&&(h[G]=l);for(;w.remove(h,""););g=a.substring(0,g[0])+(c?"#":"?")+h.join("&")+a.substring(g[1])}0<g.length&&w.substr(g,-1,1)==(c?"#":"?")&&(g=g.substring(0,g.length-1));return g};e.get_systemtime=function(){return Math.floor((new Date).getTime()/1e3)};e.get_timestamp=function(){return e.get_systemtime()+e._timestampDiff};e.getArrayItem=function(a,b,c){null==b&&(b=0);null!=a&&0<a.length&&0<=b&&b<a.length&&(c=a[b]);return c};e.getXmlTags=function(a,b){a=a.toLowerCase();var c=[];if(null!=b)for(var d=b.elements();d.hasNext();){var f=d.next(),g;if(g=null!=f){g=void 0;if(f.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+f.nodeType);g=f.nodeName;g=g.toLowerCase()==a}g&&c.push(f)}return c};e.getXmlAttributes=function(a,b){a=a.toLowerCase();for(var c=[],d=b.attributes();d.hasNext();){var f=d.next();f.toLowerCase()==a&&c.push(b.get(f))}return c};e.parseBool=function(a){a=null!=a?A.trim(a).toLowerCase():"";return"1"==a||"true"==a};e.createTag=function(a,b,c){var d=null;if(null!=a&&0<a.length){d=window.document.createElement(a);a=0;for(var f=r.fields(b);a<f.length;){var g=f[a];++a;d.setAttribute(g,D.string(r.field(b,g)))}null!=c&&c.appendChild(d)}return d};e.set=function(a,b,c){null==c&&(c=!0);null==a&&(a={});for(var d=0,f=r.fields(b);d<f.length;){var g=f[d];++d;if(null==r.field(a,g)||c)if(null!=r.field(a,g))switch(T["typeof"](r.field(a,g))[1]){case 4:r.setField(a,g,e.set(r.field(a,g),r.field(b,g)));break;default:r.setField(a,g,r.field(b,g))}else r.setField(a,g,r.field(b,g))}return a};e.clamp=function(a,b,c){return a<b?b:a>c?c:a};e.getCheckEventResponse=function(a){return null!=a&&null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event};e.getEventResponse=function(a,b){if(null!=a&&null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event){var c=a.params.dispatcher,d=a.params.event;d.data=b;c.dispatchEvent(d)}};e.getCheckDispatch=function(a,b){return null!=a&&null!=b&&H.__instanceof(a,z)&&H.__instanceof(b,I)};e.getDispatch=function(a,b,c,d,f){null==f&&(f=-1);e.getCheckDispatch(a,b)&&(null!=c&&(b.params=c),null!=d&&(b.data=d),a.dispatchEvent(b,f))};e.getHead=function(){return null!=window.document.head?window.document.head:0<window.document.getElementsByTagName("head").length?window.document.getElementsByTagName("head")[0]:window.document};var va=function(a){this._messageId=0;z.call(this,null==a?a={}:a);this._created=!1;this._source=null!=a.source?a.source:"";this._open_events=[];this._state=0;this._postponed=[];this._openTimeoutId=-1;this._messageId=1;this._messageQueue=[];this._jsonData=!0;this.defineEventHandlers()};u["core.utils.WebSocket"]=va;va.__name__=["core","utils","WebSocket"];va.__super__=z;va.prototype=N(z.prototype,{_state:null,_source:null,_jsonData:null,_instance:null,_postponed:null,_open_events:null,_openTimeoutId:null,_data:null,_messageQueue:null,_messageId:null,_created:null,source:null,state:null,defineEventHandlers:function(){this.addEventListener("25",x(this,this.getCloseHandler),this)},get_source:function(){return this._source},get_state:function(){return this._state},set_data:function(a){return this._data=a},get_data:function(){return this._data},getOpen:function(a,b,c){if(null!=c&&""!=c)if(0==this._state||3==this._state){this._source=c;var d=this;this._state=1;this._open_events=[{dispatcher:a,event:b,created:!0}];this._instance=new WebSocket(this._source);this._instance.onopen=function(a){d.socketOpenHandler.call(d,a)};this._instance.onmessage=function(a){d.socketMessageHandler.call(d,a)};this._instance.onerror=function(a){d.socketErrorHandler.call(d,a)};this._instance.onclose=function(a){d.socketCloseHandler.call(d,a)}}else if(A.trim(this._source).toLowerCase()!=A.trim(c).toLowerCase()){var f=new Wa("25");f.params={dispatcher:a,event:b,open:c};this.getClose(this,f)}else 1==this._state?this._open_events.push({dispatcher:a,event:b,created:!1}):2==this._state&&(b.data={success:!0,ready:!0,created:!1},a.dispatchEvent(b))},getClose:function(a,b){1==this._state&&(this._state=3,this._instance.onopen=null,this._instance.onmessage=null,this._instance.onerror=null,this._instance.onclose=null,this._instance.close(),this._instance=null,null!=a&&null!=b&&a.dispatchEvent(b))},getJSONMessage:function(a,b,c,d,f){null==d&&(d=1e4);if(2==this._state){null==c&&(c={});var g=this._messageId++;c.id=g;var q=this,h={id:g,dispatcher:a,event:b,timestamp:e.get_timestamp(),timeoutId:-1,criteria:f};h.timeoutId=window.setTimeout(function(){q.messageTimeoutHandler.call(q,{data:h})},d);this._messageQueue.push(h);this._instance.send(e.encodeJSON(c))}},send:function(a){1==this._state?this._postponed.push(a):2==this._state&&this._instance.send(a)},messageTimeoutHandler:function(a){if(null!=this._messageQueue&&0<this._messageQueue.length&&null!=a&&null!=a.data){for(var b=-1,c=0,d=this._messageQueue.length;c<d;){var f=c++;if(this._messageQueue[f].id==a.data.id){b=f;break}}0<=b&&(b=this._messageQueue.splice(b,1)[0],null!=b.dispatcher&&null!=b.event&&(a=b.dispatcher,b=b.event,b.data={success:!0,error:!0,timeout:!0},a.dispatchEvent(b)))}},socketOpenHandler:function(a){-1!=this._openTimeoutId&&(window.clearTimeout(this._openTimeoutId),this._openTimeoutId=-1);if(2!=this._state){this._state=2;this._open_events=null==this._open_events?[]:this._open_events;a=0;for(var b=this._open_events;a<b.length;){var c=b[a];++a;if(null!=c&&null!=c.dispatcher&&null!=c.event){var d=c.dispatcher,c=c.event;c.data={success:!0,ready:!0,created:!0};d.dispatchEvent(c,200)}}this._open_events=[];a=0;for(b=this._postponed;a<b.length;)d=b[a],++a,this._instance.send(d);this._postponed=[]}},socketTimeoutHandler:function(a){this._openTimeoutId=-1;this._state=3;a=0;for(var b=this._open_events;a<b.length;){var c=b[a];++a;null!=c&&null!=c.dispatcher&&null!=c.event&&c.dispatcher.dispatchEvent(c.event)}this._postponed=[]},socketMessageHandler:function(a){if(2==this._state){var b=!1;a=e.decodeJSON(a.data);if(null!=a){for(var c=-1,d=0,f=this._messageQueue.length;d<f;){var g=d++;if(null!=this._messageQueue[g].criteria){for(var q=this._messageQueue[g].criteria,h=0<r.fields(q).length,n=0,m=r.fields(q);n<m.length;){var G=m[n];++n;h=h&&D.string(r.field(q,G)).toLowerCase()==D.string(r.field(a,G)).toLowerCase();if(!h)break}if(h){c=g;break}}else if(this._messageQueue[g].id==a.id){c=g;break}}0<=c&&(c=this._messageQueue.splice(c,1)[0],null!=c.dispatcher&&null!=c.event&&(d=c.dispatcher,f=c.event,b=!0,window.clearTimeout(c.timeoutId),f.data=a,d.dispatchEvent(f)))}b||(b=new I("7"),b.data=a,this.dispatchEvent(b))}},socketErrorHandler:function(a){3!=this._state&&(this._state=3,a=new I("6"),a.data={state:this._state},this.dispatchEvent(a))},socketCloseHandler:function(a){3!=this._state&&(this._state=3,a=new I("6"),a.data={state:this._state},this.dispatchEvent(a))},getCloseHandler:function(a){e.getCheckEventResponse(a)&&null!=a.params.open&&this.getOpen(a.params.dispatcher,a.params.event,a.params.open)},__class__:va,__properties__:{set_data:"set_data",get_data:"get_data",get_state:"get_state",get_source:"get_source"}});var na=function(){};u["core.utils.helper.TJSON"]=na;na.__name__=["core","utils","helper","TJSON"];na.parse=function(a,b,c){null==b&&(b="JSON Data");return new gb(a,b,c).doParse()};na.encode=function(a,b,c){null==c&&(c=!0);return new hb(c).doEncode(a,b)};var gb=function(a,b,c){null==b&&(b="JSON Data");this.json=a;this.fileName=b;this.currentLine=1;this.lastSymbolQuoted=!1;this.pos=0;this.floatRegex=new O("^-?[0-9]*\\.[0-9]+$","");this.intRegex=new O("^-?[0-9]+$","");this.strProcessor=null==c?x(this,this.defaultStringProcessor):c;this.cache=[]};u["core.utils.helper.TJSONParser"]=gb;gb.__name__=["core","utils","helper","TJSONParser"];gb.prototype={pos:null,json:null,lastSymbolQuoted:null,fileName:null,currentLine:null,cache:null,floatRegex:null,intRegex:null,strProcessor:null,doParse:function(){try{var a=this.getNextSymbol();if("{"==a)return this.doObject();if("["==a)return this.doArray()}catch(b){b instanceof t&&(b=b.val);if(H.__instanceof(b,String))throw new t(this.fileName+" on line "+this.currentLine+": "+b);throw b}return null},doObject:function(){var a={},b="",c;for(this.cache.push(a);this.pos<this.json.length;)if(c=this.getNextSymbol(),","!=c||this.lastSymbolQuoted){if("}"==c&&!this.lastSymbolQuoted)return a;b=this.getNextSymbol();if(":"!=b)throw new t("Expected ':' but got '"+b+"' instead.");b=this.getNextSymbol();if("_hxcls"==c){a=T.resolveClass(b);if(null==a)throw new t("Invalid class name - "+b);a=T.createEmptyInstance(a);this.cache.pop();this.cache.push(a)}else b="{"!=b||this.lastSymbolQuoted?"["!=b||this.lastSymbolQuoted?this.convertSymbolToProperType(b):this.doArray():this.doObject(),a[c]=b}throw new t("Unexpected end of file. Expected '}'")},doArray:function(){for(var a=[],b;this.pos<this.json.length;)if(b=this.getNextSymbol(),","!=b||this.lastSymbolQuoted){if("]"!=b||this.lastSymbolQuoted)b="{"!=b||this.lastSymbolQuoted?"["!=b||this.lastSymbolQuoted?this.convertSymbolToProperType(b):this.doArray():this.doObject();else return a;a.push(b)}throw new t("Unexpected end of file. Expected ']'")},convertSymbolToProperType:function(a){return this.lastSymbolQuoted?A.startsWith(a,na.OBJECT_REFERENCE_PREFIX)?(a=D.parseInt(w.substr(a,na.OBJECT_REFERENCE_PREFIX.length,null)),this.cache[a]):a:this.looksLikeFloat(a)?parseFloat(a):this.looksLikeInt(a)?D.parseInt(a):"true"==a.toLowerCase()?!0:"false"==a.toLowerCase()?!1:"null"==a.toLowerCase()?null:a},looksLikeFloat:function(a){return this.floatRegex.match(a)},looksLikeInt:function(a){return this.intRegex.match(a)},getNextSymbol:function(){this.lastSymbolQuoted=!1;for(var a="",b=!1,c="",d="",f=!1,g=!1,e=!1,h=!1;this.pos<this.json.length;)if(a=this.json.charAt(this.pos++),"\n"!=a||g||this.currentLine++,e){if("\n"==a||"\r"==a)e=!1,this.pos++}else if(h)"*"==a&&"/"==this.json.charAt(this.pos)&&(h=!1,this.pos++);else if(b){if(f){f=!1;if("'"==a||'"'==a){d+=a;continue}if("t"==a){d+="\t";continue}if("n"==a){d+="\n";continue}if("\\"==a){d+="\\";continue}if("r"==a){d+="\r";continue}if("/"==a){d+="/";continue}if("u"==a){for(var n=a=0;4>n;){n++;if(this.pos>=this.json.length)throw new t("Unfinished UTF8 character");var m;m=this.pos++;m=w.cca(this.json,m);a<<=4;if(48<=m&&57>=m)a+=m-48;else if(65<=m&&70>=m)a+=10+m-65;else if(97<=m&&102>=m)a+=10+m-97;else throw new t("Not a hex digit")}n=new ib;n.__b+=String.fromCharCode(a);d+=n.__b;continue}throw new t("Invalid escape sequence '\\"+a+"'")}if("\\"==a)f=!0;else{if(a==c)return d;d+=a}}else{if("/"==a)if(n=this.json.charAt(this.pos),"/"==n){e=!0;this.pos++;continue}else if("*"==n){h=!0;this.pos++;continue}if(g){if(" "==a||"\n"==a||"\r"==a||"\t"==a||","==a||":"==a||"}"==a||"]"==a)return this.pos--,d;d+=a}else if(" "!=a&&"\t"!=a&&"\n"!=a&&"\r"!=a){if("{"==a||"}"==a||"["==a||"]"==a||","==a||":"==a)return a;"'"==a||'"'==a?(b=!0,c=a,this.lastSymbolQuoted=!0):(g=!0,d=a)}}if(b)throw new t("Unexpected end of data. Expected ( "+c+" )");return d},defaultStringProcessor:function(a){return a},__class__:gb};var hb=function(a){null==a&&(a=!0);if(this.uCache=a)this.cache=[]};u["core.utils.helper.TJSONEncoder"]=hb;hb.__name__=["core","utils","helper","TJSONEncoder"];hb.prototype={cache:null,uCache:null,doEncode:function(a,b){if(!r.isObject(a))throw new t("Provided object is not an object.");var c;c=H.__instanceof(b,Pa)?b:"fancy"==b?new Xa:new Ya;var d=new da;a instanceof Array&&null==a.__enum__||H.__instanceof(a,Ma)?d.add(this.encodeIterable(a,c,0)):H.__instanceof(a,Fa)?d.add(this.encodeMap(a,c,0)):(this.cacheEncode(a),d.add(this.encodeObject(a,c,0)));return d.b},encodeObject:function(a,b,c){var d=new da;d.add(b.beginObject(c));var f=0,g;g=T.getClass(a);g=null!=g?T.getInstanceFields(g):r.fields(a);var e=T["typeof"](a);switch(e[1]){case 6:e=e[2],0<f++?d.add(b.entrySeperator(c)):d.add(b.firstEntry(c)),d.add('"_hxcls"'+b.keyValueSeperator(c)),d.add(this.encodeValue(T.getClassName(e),b,c))}for(e=0;e<g.length;){var h=g[e];++e;var n=r.field(a,h),n=this.encodeValue(n,b,c);null!=n&&(0<f++?d.add(b.entrySeperator(c)):d.add(b.firstEntry(c)),d.add('"'+h+'"'+b.keyValueSeperator(c)+n))}d.add(b.endObject(c));return d.b},encodeMap:function(a,b,c){var d=new da;d.add(b.beginObject(c));for(var f=0,g=a.keys();g.hasNext();){var e=g.next();0<f++?d.add(b.entrySeperator(c)):d.add(b.firstEntry(c));var h=a.get(e);d.add('"'+e+'"'+b.keyValueSeperator(c));d.add(this.encodeValue(h,b,c))}d.add(b.endObject(c));return d.b},encodeIterable:function(a,b,c){var d=new da;d.add(b.beginArray(c));var f=0;for(a=mb(a)();a.hasNext();){var g=a.next();0<f++?d.add(b.entrySeperator(c)):d.add(b.firstEntry(c));d.add(this.encodeValue(g,b,c))}d.add(b.endArray(c));return d.b},cacheEncode:function(a){if(!this.uCache)return null;for(var b=0,c=this.cache.length;b<c;){var d=b++;if(this.cache[d]==a)return'"'+na.OBJECT_REFERENCE_PREFIX+d+'"'}this.cache.push(a);return null},encodeValue:function(a,b,c){if((a|0)===a||"number"==typeof a)return a;if(a instanceof Array&&null==a.__enum__||H.__instanceof(a,Ma)||H.__instanceof(a,Ma))return this.encodeIterable(a,b,c+1);if(H.__instanceof(a,Fa))return this.encodeMap(a,b,c+1);if("string"==typeof a)return'"'+A.replace(A.replace(A.replace(A.replace(D.string(a),"\\","\\\\"),"\n","\\n"),"\r","\\r"),'"','\\"')+'"';if("boolean"==typeof a)return a;if(r.isObject(a)){var d=this.cacheEncode(a);return null!=d?d:this.encodeObject(a,b,c+1)}return null==a?"null":null},__class__:hb};var Pa=function(){};u["core.utils.helper.EncodeStyle"]=Pa;Pa.__name__=["core","utils","helper","EncodeStyle"];Pa.prototype={beginObject:null,endObject:null,beginArray:null,endArray:null,firstEntry:null,entrySeperator:null,keyValueSeperator:null,__class__:Pa};var Ya=function(){};u["core.utils.helper.SimpleStyle"]=Ya;Ya.__name__=["core","utils","helper","SimpleStyle"];Ya.__interfaces__=[Pa];Ya.prototype={beginObject:function(a){return"{"},endObject:function(a){return"}"},beginArray:function(a){return"["},endArray:function(a){return"]"},firstEntry:function(a){return""},entrySeperator:function(a){return","},keyValueSeperator:function(a){return":"},__class__:Ya};var Xa=function(a){null==a&&(a="    ");this.tab=a;this.charTimesNCache=[""]};u["core.utils.helper.FancyStyle"]=Xa;Xa.__name__=["core","utils","helper","FancyStyle"];Xa.__interfaces__=[Pa];Xa.prototype={tab:null,beginObject:function(a){return"{\n"},endObject:function(a){return"\n"+this.charTimesN(a)+"}"},beginArray:function(a){return"[\n"},endArray:function(a){return"\n"+this.charTimesN(a)+"]"},firstEntry:function(a){return this.charTimesN(a+1)+" "},entrySeperator:function(a){return"\n"+this.charTimesN(a+1)+","},keyValueSeperator:function(a){return" : "},charTimesNCache:null,charTimesN:function(a){return a<this.charTimesNCache.length?this.charTimesNCache[a]:this.charTimesNCache[a]=this.charTimesN(a-1)+this.tab},__class__:Xa};var jb=function(){};u["haxe.IMap"]=jb;jb.__name__=["haxe","IMap"];jb.prototype={get:null,keys:null,__class__:jb};var kb=function(a,b){this.high=a;this.low=b};u["haxe._Int64.___Int64"]=kb;kb.__name__=["haxe","_Int64","___Int64"];kb.prototype={high:null,low:null,__class__:kb};var Na=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};u["haxe.Timer"]=Na;Na.__name__=["haxe","Timer"];Na.delay=function(a,b){var c=new Na(b);c.run=function(){c.stop();a()};return c};Na.prototype={id:null,stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Na};var ib=function(a){this.__b=""};u["haxe.Utf8"]=ib;ib.__name__=["haxe","Utf8"];ib.prototype={__b:null,__class__:ib};var P=function(a){this.length=a.byteLength;this.b=new lb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};u["haxe.io.Bytes"]=P;P.__name__=["haxe","io","Bytes"];P.alloc=function(a){return new P(new nb(a))};P.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=A.fastCodeAt(a,c++);55296<=d&&56319>=d&&(d=d-55232<<10|A.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new P(new lb(b).buffer)};P.ofData=function(a){var b=a.hxBytes;return null!=b?b:new P(a)};P.prototype={length:null,b:null,get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw new t(fa.OutsideBounds);for(var c="",d=this.b,f=String.fromCharCode,g=a,e=a+b;g<e;){var h=d[g++];if(128>h){if(0==h)break;c+=f(h)}else if(224>h)c+=f((h&63)<<6|d[g++]&127);else if(240>h)var n=d[g++],c=c+f((h&31)<<12|(n&127)<<6|d[g++]&127);else var n=d[g++],m=d[g++],h=(h&15)<<18|(n&127)<<12|(m&127)<<6|d[g++]&127,c=c+f((h>>10)+55232),c=c+f(h&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},getData:function(){return this.b.bufferValue},__class__:P};var Ta=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw new t("BaseCode : base length must be a power of two.");this.base=a;this.nbits=c};u["haxe.crypto.BaseCode"]=Ta;Ta.__name__=["haxe","crypto","BaseCode"];Ta.prototype={base:null,nbits:null,tbl:null,encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,f=P.alloc(d+(0==8*a.length%b?0:1)),g=0,e=0,h=(1<<b)-1,n=0,m=0;m<d;){for(;e<b;)e+=8,g<<=8,g|=a.get(n++);e-=b;f.set(m++,c.b[g>>e&h])}0<e&&f.set(m++,c.b[g<<b-e&h]);return f},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,f=P.alloc(d),e=0,q=0,h=0,n=0;n<d;){for(;8>q;){var q=q+b,e=e<<b,m=c[a.get(h++)];if(-1==m)throw new t("BaseCode : invalid encoded char");e|=m}q-=8;f.set(n++,e>>q&255)}return f},__class__:Ta};var ua=function(){};u["haxe.crypto.Sha1"]=ua;ua.__name__=["haxe","crypto","Sha1"];ua.encode=function(a){var b=new ua;a=b.doEncode(ua.str2blks(a));return b.hex(a)};ua.str2blks=function(a){for(var b=(a.length+8>>6)+1,c=[],d=0,f=16*b;d<f;){var e=d++;c[e]=0}d=0;for(f=a.length;d<f;)e=d++,c[e>>2]|=w.cca(a,e)<<24-((e&3)<<3);d=a.length;c[d>>2]|=128<<24-((d&3)<<3);c[16*b-1]=8*a.length;return c};ua.prototype={doEncode:function(a){for(var b=[],c=1732584193,d=-271733879,f=-1732584194,e=271733878,q=-1009589776,h=0;h<a.length;){for(var n=c,m=d,G=f,l=e,p=q,k=0;80>k;){b[k]=16>k?a[h+k]:this.rol(b[k-3]^b[k-8]^b[k-14]^b[k-16],1);var r=(c<<5|c>>>27)+this.ft(k,d,f,e)+q+b[k]+this.kt(k),q=e,e=f,f=d<<30|d>>>2,d=c,c=r;k++}c+=n;d+=m;f+=G;e+=l;q+=p;h+=16}return[c,d,f,e,q]},rol:function(a,b){return a<<b|a>>>32-b},ft:function(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d},kt:function(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514},hex:function(a){for(var b="",c=0;c<a.length;){var d=a[c];++c;b+=A.hex(d,8)}return b.toLowerCase()},__class__:ua};var Fa=function(){this.h={}};u["haxe.ds.StringMap"]=Fa;Fa.__name__=["haxe","ds","StringMap"];Fa.__interfaces__=[jb];Fa.prototype={h:null,rh:null,set:function(a,b){null!=La[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=La[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=La[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},keys:function(){var a=this.arrayKeys();return w.iter(a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:Fa};var Oa=function(){this.b=[]};u["haxe.io.BytesBuffer"]=Oa;Oa.__name__=["haxe","io","BytesBuffer"];Oa.prototype={b:null,getBytes:function(){var a=new P(new lb(this.b).buffer);this.b=null;return a},__class__:Oa};var fa={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:["Blocked",0]};fa.Blocked.toString=ja;fa.Blocked.__enum__=fa;fa.Overflow=["Overflow",1];fa.Overflow.toString=ja;fa.Overflow.__enum__=fa;fa.OutsideBounds=["OutsideBounds",2];fa.OutsideBounds.toString=ja;fa.OutsideBounds.__enum__=fa;fa.Custom=function(a){a=["Custom",3,a];a.__enum__=fa;a.toString=ja;return a};var oa=function(){};u["haxe.io.FPHelper"]=oa;oa.__name__=["haxe","io","FPHelper"];oa.i32ToFloat=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};oa.floatToI32=function(a){if(0==a)return 0;var b;b=0>a?-a:a;var c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);return(0>a?-2147483648:0)|c+127<<23|Math.round(8388608*(b/Math.pow(2,c)-1))&8388607};oa.i64ToDouble=function(a,b){var c=(b>>20&2047)-1023,d=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==d&&-1023==c?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*d)*Math.pow(2,c)};oa.doubleToI64=function(a){var b=oa.i64tmp;if(0==a)b.low=0,b.high=0;else{var c;c=0>a?-a:a;var d=Math.floor(Math.log(c)/.6931471805599453);c=Math.round(4503599627370496*(c/Math.pow(2,d)-1));b.low=c|0;b.high=(0>a?-2147483648:0)|d+1023<<20|c/4294967296|0}return b};var Ba=function(){};u["haxe.xml.Parser"]=Ba;Ba.__name__=["haxe","xml","Parser"];Ba.parse=function(a,b){null==b&&(b=!1);var c=k.createDocument();Ba.doParse(a,b,0,c);return c};Ba.doParse=function(a,b,c,d){null==c&&(c=0);for(var f=null,e=1,q=1,h=null,n=0,m=0,G=0,l=a.charCodeAt(c),p=new da,r=1,y=-1;l==l;){switch(e){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:e=q;continue}break;case 1:switch(l){case 60:e=0;q=2;break;default:n=c;e=13;continue}break;case 13:60==l?(p.addSub(a,n,c-n),q=k.createPCData(p.b),p=new da,d.addChild(q),m++,e=0,q=2):38==l&&(p.addSub(a,n,c-n),e=18,r=13,n=c+1);break;case 17:93==l&&93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(l=k.createCData(w.substr(a,n,c-n)),d.addChild(l),m++,c+=2,e=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=w.substr(a,c,6).toUpperCase())throw new t("Expected <![CDATA[");c+=5;e=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=w.substr(a,c+2,6).toUpperCase())throw new t("Expected <!DOCTYPE");c+=8;e=16}else{if(45!=a.charCodeAt(c+1)||45!=a.charCodeAt(c+2))throw new t("Expected \x3c!--");c+=2;e=15}n=c+1;break;case 63:e=14;n=c;break;case 47:if(null==d)throw new t("Expected node name");n=c+1;e=0;q=10;break;default:e=3;n=c;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(c==n)throw new t("Expected node name");f=k.createElement(w.substr(a,n,c-n));d.addChild(f);m++;e=0;q=4;continue}break;case 4:switch(l){case 47:e=11;break;case 62:e=9;break;default:e=5;n=c;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(n==c)throw new t("Expected attribute name");h=w.substr(a,n,c-n);if(f.exists(h))throw new t("Duplicate attribute");e=0;q=6;continue}break;case 6:switch(l){case 61:e=0;q=7;break;default:throw new t("Expected =")}break;case 7:switch(l){case 34:case 39:p=new da;e=8;n=c+1;y=l;break;default:throw new t('Expected "')}break;case 8:switch(l){case 38:p.addSub(a,n,c-n);e=18;r=8;n=c+1;break;case 62:if(b)throw new t("Invalid unescaped "+String.fromCharCode(l)+" in attribute value");l==y&&(p.addSub(a,n,c-n),q=p.b,p=new da,f.set(h,q),e=0,q=4);break;case 60:if(b)throw new t("Invalid unescaped "+String.fromCharCode(l)+" in attribute value");l==y&&(p.addSub(a,n,c-n),q=p.b,p=new da,f.set(h,q),e=0,q=4);break;default:l==y&&(p.addSub(a,n,c-n),q=p.b,p=new da,f.set(h,q),e=0,q=4)}break;case 9:n=c=Ba.doParse(a,b,c,f);e=1;break;case 11:switch(l){case 62:e=1;break;default:throw new t("Expected >")}break;case 12:switch(l){case 62:return 0==m&&d.addChild(k.createPCData("")),c;default:throw new t("Expected >")}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(n==c)throw new t("Expected node name");q=w.substr(a,n,c-n);if(d.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+d.nodeType);if(q!=d.nodeName){c=t;if(d.nodeType!=k.Element)throw"Bad node type, expected Element but found "+d.nodeType;throw new c("Expected </"+d.nodeName+">")}e=0;q=12;continue}break;case 15:45==l&&45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(l=k.createComment(w.substr(a,n,c-n)),d.addChild(l),m++,c+=2,e=1);break;case 16:91==l?G++:93==l?G--:62==l&&0==G&&(l=k.createDocType(w.substr(a,n,c-n)),d.addChild(l),m++,e=1);break;case 14:63==l&&62==a.charCodeAt(c+1)&&(c++,l=w.substr(a,n+1,c-n-2),l=k.createProcessingInstruction(l),d.addChild(l),m++,e=1);break;case 18:if(59==l){n=w.substr(a,n,c-n);if(35==n.charCodeAt(0))n=120==n.charCodeAt(1)?D.parseInt("0"+w.substr(n,1,n.length-1)):D.parseInt(w.substr(n,1,n.length-1)),p.b+=String.fromCharCode(n);else if(Ba.escapes.exists(n))p.add(Ba.escapes.get(n));else{if(b)throw new t("Undefined entity: "+n);p.b+=D.string("&"+n+";")}n=c+1;e=r}else if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)&&35!=l){if(b)throw new t("Invalid character in entity: "+String.fromCharCode(l));p.b+="&";p.addSub(a,n,c-n);c--;n=c+1;e=r}}l=A.fastCodeAt(a,++c)}1==e&&(n=c,e=13);if(13==e){if(c!=n||0==m)p.addSub(a,n,c-n),a=k.createPCData(p.b),d.addChild(a);return c}if(!b&&18==e&&13==r)return p.b+="&",p.addSub(a,n,c-n),a=k.createPCData(p.b),d.addChild(a),c;throw new t("Unexpected end")};var t=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,t)};u["js._Boot.HaxeError"]=t;t.__name__=["js","_Boot","HaxeError"];t.__super__=Error;t.prototype=N(Error.prototype,{val:null,__class__:t});var H=function(){};u["js.Boot"]=H;H.__name__=["js","Boot"];H.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=H.__nativeClassName(a);return null!=a?H.__resolveNativeClass(a):null};H.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,f=a.length;d<f;)var e=d++,c=2!=e?c+(","+H.__string_rec(a[e],b)):c+H.__string_rec(a[e],b);return c+")"}c=a.length;d="[";b+="\t";for(f=0;f<c;)e=f++,d+=(0<e?",":"")+H.__string_rec(a[e],b);return d+"]"}try{d=a.toString}catch(q){return q instanceof t&&(q=q.val),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";f=null!=a.hasOwnProperty;for(c in a)f&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+H.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case"function":return"<function>";case"string":return a;default:return String(a)}};H.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,f=c.length;d<f;){var e=d++,e=c[e];if(e==b||H.__interfLoop(e,b))return!0}return H.__interfLoop(a.__super__,b)};H.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Za:return(a|0)===a;case tb:return"number"==typeof a;case ub:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case wb:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||H.__interfLoop(H.getClass(a),b))return!0}else{if("object"==typeof b&&H.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==xb&&null!=a.__name__||b==yb&&null!=a.__ename__?!0:a.__enum__==b}};H.__cast=function(a,b){if(H.__instanceof(a,b))return a;throw new t("Cannot cast "+D.string(a)+" to "+D.string(b))};H.__nativeClassName=function(a){a=H.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};H.__isNativeObj=function(a){return null!=H.__nativeClassName(a)};H.__resolveNativeClass=function(a){return qb[a]};var ma=function(){};u["js.Browser"]=ma;ma.__name__=["js","Browser"];ma.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return b instanceof t&&(b=b.val),null}};ma.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new t("Unable to create XMLHttpRequest object.")};var pa=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;){var c=b++;this.a[c]=0}this.byteLength=a}};u["js.html.compat.ArrayBuffer"]=pa;pa.__name__=["js","html","compat","ArrayBuffer"];pa.sliceImpl=function(a,b){var c=new lb(this,a,null==b?null:b-a),d=new nb(c.byteLength);new lb(d).set(c);return d};pa.prototype={byteLength:null,a:null,slice:function(a,b){return new pa(this.a.slice(a,b))},__class__:pa};var ob=function(a,b,c){this.buf=a;this.offset=null==b?0:b;this.length=null==c?a.byteLength-this.offset:c;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new t(fa.OutsideBounds)};u["js.html.compat.DataView"]=ob;ob.__name__=["js","html","compat","DataView"];ob.prototype={buf:null,offset:null,length:null,getInt8:function(a){a=this.buf.a[this.offset+a];return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){var c=this.getUint16(a,b);return 32768<=c?c-65536:c},getUint16:function(a,b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var c=this.offset+a,d=this.buf.a[c++],f=this.buf.a[c++],e=this.buf.a[c++],c=this.buf.a[c++];return b?d|f<<8|e<<16|c<<24:c|e<<8|f<<16|d<<24},getUint32:function(a,b){var c=this.getInt32(a,b);return 0>c?c+4294967296:c},getFloat32:function(a,b){return oa.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var c=this.getInt32(a,b),d=this.getInt32(a+4,b);return oa.i64ToDouble(b?c:d,b?d:c)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,c){this.setUint16(a,0>b?b+65536:b,c)},setUint16:function(a,b,c){a+=this.offset;c?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>8&255,this.buf.a[a]=b&255)},setInt32:function(a,b,c){this.setUint32(a,b,c)},setUint32:function(a,b,c){a+=this.offset;c?(this.buf.a[a++]=b&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,c){this.setUint32(a,oa.floatToI32(b),c)},setFloat64:function(a,b,c){b=oa.doubleToI64(b);c?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),this.setUint32(a,b.low))},__class__:ob};var Da=function(){};u["js.html.compat.Uint8Array"]=Da;Da.__name__=["js","html","compat","Uint8Array"];Da._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new pa(c)}else if(H.__instanceof(a,pa))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new pa(c);else throw new t("TODO "+D.string(a));c.subarray=Da._subarray;c.set=Da._set;return c};Da._set=function(a,b){if(H.__instanceof(a.buffer,pa)){if(a.byteLength+b>this.byteLength)throw new t("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var f=c++;this[f+b]=a[f]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new t("set() outside of range");c=0;for(d=a.length;c<d;)f=c++,this[f+b]=a[f]}else throw new t("TODO")};Da._subarray=function(a,b){var c=Da._new(this.slice(a,b));c.byteOffset=a;return c};var B=function(a){z.call(this,null==a?a={}:a);this._readyState=0;this._queue=[];this._index=0;null==window.JSON&&(window.JSON={parse:na.parse,stringify:na.encode});String.prototype.trim||function(){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}();this.defineEventHandlers()};u["modules.QueueManager"]=B;B.__name__=["modules","QueueManager"];B.__instance=null;B.getInstance=function(){null==B.__instance&&(B.__instance=new B);return B.__instance};B.__super__=z;B.prototype=N(z.prototype,{_readyState:null,_queue:null,_index:null,defineEventHandlers:function(){this.addEventListener("9",x(this,this.storageReadyHandler),this);this.addEventListener("D",x(this,this.getDevicesHandler),this);this.addEventListener("C",x(this,this.getMethodHandler),this)},getDevices:function(a){this.getProcessQueue(1,a)},getCurrent:function(a){this.getProcessQueue(2,a)},setCurrent:function(a,b){this.getProcessQueue(3,b,{id:a})},getDeviceName:function(a,b){this.getProcessQueue(4,b,{id:a})},setDeviceName:function(a,b,c){this.getProcessQueue(5,c,{id:a,value:b})},getDisconnect:function(a,b){this.getProcessQueue(6,b,{id:a})},getAccess:function(a,b){this.getProcessQueue(8,b,{code:a})},getShowKey:function(a,b){this.getProcessQueue(9,b,{id:a})},getCheckKey:function(a,b,c){this.getProcessQueue(10,c,{id:a,key:b})},getConnect:function(a,b){this.getProcessQueue(11,b,{id:a})},getLaunch:function(a,b,c){this.getProcessQueue(12,c,{id:a,content:b})},getContent:function(a,b,c){this.getProcessQueue(13,c,{id:a,sources:b})},setContent:function(a,b,c,d){this.getProcessQueue(14,d,{id:a,source:b,content:c})},getDownloadContent:function(a,b,c){this.getProcessQueue(15,c,{id:a,source:b})},getURLInfo:function(a,b){this.getProcessQueue(16,b,{source:a})},getLoadContent:function(a,b,c){this.getProcessQueue(17,c,{content:a,format:b})},getSaveContent:function(a,b,c){this.getProcessQueue(18,c,{content:a,format:b})},getUseExternalLogo:function(a){this.getProcessQueue(19,a,{})},setUseExternalLogo:function(a,b){this.getProcessQueue(20,b,{value:a})},getOfferChannels:function(a,b,c){this.getProcessQueue(21,c,{value:a,limit:b})},getChannelTitle:function(a,b){this.getProcessQueue(22,b,{id:a})},getJoin:function(a,b,c,d){this.getProcessQueue(23,d,{source:a,channelId:b,messages:c})},getSend:function(a,b,c){this.getProcessQueue(24,c,{id:a,data:b})},getLeave:function(){this.getProcessQueue(25,function(){},{})},getPartnerAuthorized:function(a){this.getProcessQueue(26,a,{})},getPartnerAuthorization:function(a,b,c){this.getProcessQueue(27,c,{email:a,password:b})},getPartnerLogout:function(a){this.getProcessQueue(28,a,{})},getPartnerSessionExpired:function(a){this.getProcessQueue(29,a,{})},getPartnerCheckAgreement:function(a,b){this.getProcessQueue(30,b,{language:a})},getPartnerAcceptAgreement:function(a){this.getProcessQueue(31,a,{})},getPartnerProviders:function(a){this.getProcessQueue(32,a,{})},getPartnerPackages:function(a){this.getProcessQueue(33,a,{})},getPartnerPackage:function(a,b){this.getProcessQueue(34,b,{id:a})},setPartnerPackage:function(a,b,c,d){this.getProcessQueue(35,d,{id:a,content:b,settings:c})},getPartnerCheckCORS:function(a,b){this.getProcessQueue(36,b,{source:a})},getPartnerRanges:function(a,b){this.getProcessQueue(37,b,{packageId:a})},setPartnerRanges:function(a,b,c){this.getProcessQueue(38,c,{packageId:a,list:b})},getProcessQueue:function(a,b,c){this._queue.push({method:a,handler:b,params:c,start:0,timeout:10});0==this._readyState?J.getInstance().getInit(this,new wa("9")):C.getInstance().get_update()?C.getInstance().getDevices(this,new Qa("D")):this.getNextMethod()},getProcessMethod:function(a,b,c,d){switch(a){case 1:C.getInstance().getDevices(b,c);break;case 2:C.getInstance().getCurrent(b,c);break;case 3:C.getInstance().setCurrent(b,c,d.id);break;case 4:C.getInstance().getDeviceName(b,c,d.id);break;case 5:C.getInstance().setDeviceName(b,c,d.id,d.value);break;case 6:C.getInstance().getDisconnect(b,c,d.id);break;case 8:C.getInstance().getAccess(b,c,d.code);break;case 9:C.getInstance().getShowKey(b,c,d.id);break;case 10:C.getInstance().getCheckKey(b,c,d.id,d.key);break;case 11:C.getInstance().getConnect(b,c,d.id);break;case 12:C.getInstance().getLaunch(b,c,d.id,d.content);break;case 13:W.getInstance().getContent(b,c,d.id,d.sources);break;case 14:W.getInstance().setContent(b,c,d.id,d.source,d.content);break;case 15:W.getInstance().getDownloadContent(b,c,d.id,d.source);break;case 16:W.getInstance().getURLInfo(b,c,d.source);break;case 17:W.getInstance().getLoadContent(b,c,d.content,d.format);break;case 18:W.getInstance().getSaveContent(b,c,d.content,d.format);break;case 19:V.getInstance().getUseExternalLogo(b,c);break;case 20:V.getInstance().setUseExternalLogo(b,c,d.value);break;case 21:X.getInstance().getOfferChannels(b,c,d.value,d.limit);break;case 22:X.getInstance().getChannelTitle(b,c,e.parseInt(d.id));break;case 23:ha.getInstance().getJoin(b,c,d.source,d.channelId,d.messages);break;case 24:ha.getInstance().getSend(b,c,d.id,d.data);break;case 25:ha.getInstance().getLeave(b,c);break;case 26:Q.getInstance().getAuthorized(b,c);break;case 27:Q.getInstance().getAuthorization(b,c,d.email,d.password);break;case 28:Q.getInstance().getLogout(b,c);break;case 29:Q.getInstance().getSessionExpired(b,c);break;case 30:Q.getInstance().getCheckAgreement(b,c,d.language);break;case 31:Q.getInstance().getAcceptAgreement(b,c);break;case 32:Q.getInstance().getPartnerProviders(b,c);break;case 33:Q.getInstance().getPackages(b,c);break;case 34:Q.getInstance().getPackage(b,c,d.id);break;case 35:Q.getInstance().setPackage(b,c,d.id,d.content,d.settings);break;case 36:Q.getInstance().getCheckCORS(b,c,d.source);break;case 37:Q.getInstance().getRanges(b,c,d.packageId);break;case 38:Q.getInstance().setRanges(b,c,d.packageId,d.list)}},getNextMethod:function(){var a=e.get_timestamp();if(2==this._readyState&&0<this._queue.length){for(var b=0,c=0,d=this._queue.length;c<d;){var f=c++;if(null!=this._queue[f]&&(null==this._queue[f].start&&(this._queue[f].start=0),null==this._queue[f].timeout&&(this._queue[f].timeout=10),0<this._queue[f].start&&(b+=1,this._queue[f].start+this._queue[f].timeout<a))){this.getExpired(f);return}}0==b&&0<this._queue.length&&(a=this._queue.splice(0,1)[0],null!=a&&null!=a.method&&(b=new Qa("C"),a.start=e.get_timestamp(),b.params=a,this.getProcessMethod(a.method,this,b,a.params)))}},getExpired:function(a){a<this._queue.length&&(a=this._queue.splice(a,1),null!=a&&null!=a.method&&null!=a.handler&&(a=a.handler,a({success:!1})));this.getNextMethod()},storageReadyHandler:function(a){this._readyState=2;this.getNextMethod()},getDevicesHandler:function(a){this.getNextMethod()},getMethodHandler:function(a){0<=w.indexOf([1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],null!=a.params&&a.params.handler&&null!=a.params.method?a.params.method:-1,0)&&a.params.handler(a.data)},__class__:B});var X=function(a){z.call(this,null==a?{}:a);this._index={};this._channels=[];this._lastChannelsUpdate=0;this.defineEventHandlers()};u["modules.services.ChannelsManager"]=X;X.__name__=["modules","services","ChannelsManager"];X.__instance=null;X.getInstance=function(){null==X.__instance&&(X.__instance=new X);return X.__instance};X.__super__=z;X.prototype=N(z.prototype,{_channels:null,_index:null,_lastChannelsUpdate:null,channels:null,index:null,defineEventHandlers:function(){this.addEventListener("50",x(this,this.getReadyHandler),this);this.addEventListener("51",x(this,this.getOfferChannelsHandler),this);this.addEventListener("52",x(this,this.getChannelTitleHandler),this)},get_channels:function(){return this._channels},get_index:function(){return this._index},getReady:function(a,b){0<this._channels.length&&this._lastChannelsUpdate+43200>e.get_timestamp()?e.getDispatch(a,b,null,{success:!0}):U.getInstance().getChannels(this,new Ia("50",!1,!1,{dispatcher:a,event:b,iterator:0}))},getOfferChannels:function(a,b,c,d){null==d&&(d=100);this.getReady(this,new Ia("51",!1,!1,{dispatcher:a,event:b,value:c,limit:d}))},getChannelTitle:function(a,b,c){this.getReady(this,new Ia("52",!1,!1,{dispatcher:a,event:b,id:c}))},getReadyHandler:function(a){if(e.getCheckEventResponse(a)){null!=a.data&&null!=a.data.replaces&&0<a.data.replaces.length&&e.setReplacePattern(a.data.replaces);var b;b=null==a.params.iterator?0:mb(a.params);this._channels=null!=a.data&&null!=a.data.list?a.data.list:[];var c=!1;if(null!=this._channels&&0<this._channels.length){this._lastChannelsUpdate=e.get_timestamp();c=!0;this._channels=null!=a.data&&null!=a.data.list?a.data.list:[];for(var d={},f=0,g=this._channels.length;f<g;)for(var q=f++,h=this._channels[q],n=0,m=h.length;n<m;){var G=n++,l=h[G];if(0<l.length){if(0<G){var p;p=void 0;p=w.substr(l,0,1).toLowerCase();p=w.cca(p,0);p="_"+p;var k=r.field(d,p);null==k&&(k={});var y;y="_"+(null==l?"null":""+l).length;var t=r.field(k,y);null==t&&(t=[]);t.push([q,G]);k[y]=t;d[p]=k}G=new O("(_|\\.|\\-|\\s|\\+|\\(|\\)|\"|')","g").replace(l,"").toLowerCase();l="x"+w.cca(G,0);p=r.field(d,l);null==p&&(p={});k="_"+(null==G?"null":""+G).length;y=r.field(p,k);null==y&&(y=[]);y.push([q,G]);p[k]=y;d[l]=p}}this._index=d}c||3<b?e.getEventResponse(a,{success:!0}):U.getInstance().getChannels(this,new Ia("50",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,iterator:b+1}))}},getOfferChannelsHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null==a.params.value?"":A.trim(D.string(a.params.value));var c;c=null==a.params.limit?100:a.params.limit;var d=this.get_index(),f=[],g=[];b=A.trim(b).toLowerCase();if(0<b.length)for(var q=0,h=this._channels;q<h.length;){var n=h[q];++q;null!=n&&1<n.length&&0<=n[1].toLowerCase().indexOf(b)&&f.push({id:n[0],title:n[1]});if(f.length>=c)break}0<b.length&&(g.push(b),q=e.getReplaceSymbols(b,null,null),b!=q&&g.push(q));q=g.length;b=[];if(0<q)for(h=0;h<q;){var n=h++,m=g[n];if(null!=m&&0<m.length){var k=-1,l=0,p=m.length-1;for(b[n+0*q]=m;0<p&&48<=(l=w.cca(m,p))&&57>=l;)p--;if(p<m.length-1&&(43==l||45==l)){var t=e.parseInt(m.substring(p+(43==l?1:0)),0);-12<=t&&12>=t&&(k=p)}if(0>k&&")"==m.charAt(m.length-1)&&(t=m.lastIndexOf("("),0<t&&t<m.length)){for(var y=A.trim(m.substring(t+1,m.length-1)),p=y.length-1;0<=p&&48<=(l=w.cca(y,p))&&57>=l;)p--;if(43==l||45==l)l=e.parseInt(y.substring((0<p?p:0)+(43==l?1:0)),0),-12<=l&&12>=l&&(k=t)}0<k&&(m=A.trim(m.substring(0,k)));0>w.indexOf(b,m,0)&&(3<m.length&&" sd"==w.substr(m,-3,null)&&(m=A.trim(m.substring(0,m.length-3))),b[n+q]=m);k=!1;")"==m.charAt(m.length-1)&&(l=m.lastIndexOf("("),0<l&&l<m.length&&(m=A.trim(m.substring(0,l)),k=!0));3<m.length&&" sd"==w.substr(m,-3,null)&&(m=A.trim(m.substring(0,m.length-3)),k=!0);k&&(b[n+2*q]=m);k=new O("[\"'_\\.\\-\\s\t]","gi").replace(m,"");""!=k&&k!=m&&0>w.indexOf(b,k,0)&&(b[n+3*q]=k)}}g=!1;q=0;for(h=b.length;q<h;){n=q++;if(g)break;n=b[n];if(null!=n&&0<n.length&&(m=r.field(d,"_"+w.cca(n,0)),m=null!=m&&null!=m.list?m.list:null,null!=m&&0<m.length))for(k=0;k<m.length;)if(l=m[k],++k,null!=l&&null!=l.title&&null!=l.id&&0<=l.title.indexOf(n)){p=!1;if(0<f.length)for(t=0;t<f.length;)if(y=f[t],++t,y.id==l.id){p=!0;break}if(!p){p=null;t=0;for(y=this._channels;t<y.length;){var x=y[t];++t;if(1<x.length&&x[0]==l.id){p=x[1];break}}if(null!=p&&(f.push({id:l.id,title:p.aliases[0]}),f.length>=c)){g=!0;break}}}}e.getEventResponse(a,{success:!0,list:f})}},getChannelTitleHandler:function(a){if(e.getCheckEventResponse(a)){var b="";if(0<a.params.id&&0<this._channels.length)for(var c=0,d=this._channels;c<d.length;){var f=d[c];++c;if(1<f.length&&f[0]==a.params.id&&null!=f[1]){b=f[1];break}}e.getEventResponse(a,{success:!0,id:a.params.id,title:b})}},__class__:X,__properties__:{get_index:"get_index",get_channels:"get_channels"}});var W=function(a){z.call(this,null==a?{}:a);this._videoExtensions="avi mkv mpg flv wmv mov 3gp f4v m4v".split(" ");this._formats="m3u xspf xml jspf pls asx".split(" ");this._contentTypes=[{id:1,value:"stream"},{id:2,value:"broadcast"},{id:3,value:"favorites"},{id:4,value:"video"},{id:5,value:"provider"},{id:7,value:"audio"},{id:13,value:"application"},{id:15,value:"playlist"},{id:17,value:"radio"}];this.defineEventHandlers()};u["modules.services.ContentManager"]=W;W.__name__=["modules","services","ContentManager"];W.getInstance=function(){null==W.__instance&&(W.__instance=new W);return W.__instance};W.__super__=z;W.prototype=N(z.prototype,{_videoExtensions:null,_formats:null,_contentTypes:null,defineEventHandlers:function(){this.addEventListener("48",x(this,this.getChannelsHandler),this);this.addEventListener("47",x(this,this.getPrepareHandler),this);this.addEventListener("49",x(this,this.getContentHandler),this);this.addEventListener("4A",x(this,this.setContentHandler),this);this.addEventListener("4B",x(this,this.getLoadContentHandler),this);this.addEventListener("4C",x(this,this.getSaveContentHandler),this);this.addEventListener("4E",x(this,this.getDownloadURLHandler),this);this.addEventListener("4F",x(this,this.getProxyURLHandler),this)},getYouTubeId:function(a){var b=new O("^https?://(?:www\\.|)youtu(?:\\.be/|be\\.com/)(v/|u/\\w/|embed/|watch\\?v=|&v=)([^#&\\?]*).*","");return b.match(a)&&11==b.matched(2).length?b.matched(2):""},getYouTubeThumbnail:function(a){a=this.getYouTubeId(a);return""==a||null==a?"":"//img.youtube.com/vi/"+a+"/default.jpg"},getSourceDescription:function(a){var b={type:-1};if(null!=a&&"string"==typeof a&&0<a.indexOf("://")){a=A.trim(a);var c=a.indexOf("://"),d;d=0<c?a.substring(0,c).toLowerCase():"";a=0<c?a.substring(c+3):"";if("content"==d){c=[a.indexOf(":"),a.indexOf("/"),a.indexOf(" ")];d=-1;for(var f=0;f<c.length;){var g=c[f];++f;0<g&&(0>=d?d=g:g<d&&(d=g))}for(var c=A.trim(0<d?a.substring(0,d):a).toLowerCase(),f=[["streams","stream"],["broadcast"],["favorites","favs"],["videos","video"],["provider"],["public"],["audio","audios","sound","music"],"image images photos photo pictures picture img pics".split(" "),["rss"],["system"],["widget"],["browser"],["app"],["stored"],["playlist","playlists"],["webcamera","webcam","cam"],["radio"],["theme"],["recent"]],g=0,q=f.length;g<q;){var h=g++;0<=w.indexOf(f[h],c,0)&&(b.type=h+1)}"home"==c&&(b.type=0);5==b.type&&(a=A.trim(0<d&&d+1<a.length?w.substr(a,d+1,null):""),d=a.indexOf("/"),b.providerId=0<d?e.parseInt(a.substring(0,d),0):0,a=0<d&&d+1<a.length?a.substring(d+1):"",d=a.indexOf("/"),b.cityId=0<d&&d+1<a.length?e.parseInt(a.substring(0,d),0):0,a=0<d&&d+1<a.length?a.substring(d+1):"",d=a.indexOf("/"),b.countryId=e.parseInt(0<d&&d+1<a.length?a.substring(0,d):a,0))}}return b},getContentSource:function(a){var b="",c="streams broadcast favorites videos provider public audio images rss system widget browser app stored playlists webcamera radio theme recent".split(" ");0<a&&20>a&&(b="content://"+c[a-1]);return b},getItemRecognition:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);var d=-1;if(null!=a&&null!=a[0]&&0<a[0].length&&null!=a[1]&&null!=a[2]){var f=r.field(a[1],(c?"x":"_")+D.string(a[0].substr(0,1).toLowerCase().charCodeAt(0))),f=null!=f?r.field(f,"_"+D.string(a[0].length)):null;if(null!=f&&0<f.length)for(var e=0;e<f.length;){var q=f[e];++e;if(c){if(null!=q&&a[0]==q[1]){d=a[2][q[0]][0];break}}else{var h;h=null!=q&&0<=q[0]&&0<=q[1]?a[2][q[0]]:null;if(null!=h&&null!=h[q[1]]){if(h[q[1]]==a[0]){d=h[0];break}if(b&&h[q[1]].toLowerCase()==a[0]){d=h[0];break}}}}}return d},getContentRecognition:function(a,b){null==b&&(b=!0);for(var c=[4,7,8,9,10,11,12,13,14,15,18],d=X.getInstance().get_index(),f=X.getInstance().get_channels(),g=0,q=a.length;g<q;){var h=g++;if((null==a[h].channelId||null!=a[h].channelId&&0>=a[h].channelId)&&0>w.indexOf(c,a[h].type,0)){a[h].channelId=null==a[h].channelId?-1:0>=a[h].channelId?-1:a[h].channelId;var n;n=null!=a[h].tvgName&&0<a[h].tvgName.length?[A.trim(a[h].tvgName)]:[];null!=a[h]&&null!=a[h].title&&0<a[h].title.length&&(0==n.length||0<n.length&&n[0]!=D.string(a[h].title))&&n.push(D.string(a[h].title));var m=a[h],m=null!=m&&m.titles instanceof Array&&null==m.titles.__enum__?m.titles:null;null!=m&&0<m.length&&(n=n.concat(m));if(0!=n.length)for(var k=-1,m=0;m<n.length;){var l=n[m];++m;if(0<a[h].channelId)break;l=""+e.trim(new O("(\\s+)","g").replace(l," "));if(0<(a[h].channelId=this.getItemRecognition([l.toLowerCase(),d,f],!0)))break;for(var p=0;48<=(k=w.cca(l,p))&&57>=k||32==k||9==k||46==k;)p++;if(0<p&&p<l.length&&0<(a[h].channelId=this.getItemRecognition([l=e.trim(l.substring(p)),d,f])))break;p=e.trim(e.getRemoveBrackets(l,"[]",!1));if(0<p.length&&p.length!=l.length&&0<(a[h].channelId=this.getItemRecognition([l=p,d,f])))break;var l=e.trim(new O("\\s+sd(\\s|$)","gi").replace(l," ")),r=41==w.cca(l,l.length-1),p=l.length-1-(r?1:0),t=1e4;if(r)r=l.lastIndexOf("("),0<r&&r<l.length&&(p=e.trim(l.substring(r+1,p+1)),t=e.parseInt(43==w.cca(p,0)?w.substr(p,1,null):p,1e4),p=r);else{for(;0<p&&48<=(k=w.cca(l,p))&&57>=k;)p--;if(r=0<p&&(r||43==k||45==k))r=void 0,k=--p,r=k=w.cca(l,k),r=32>=r||95==k||40==k;r&&(t=e.parseInt(l.substring(p+1+(43==w.cca(l,p+1)?1:0)),1e4))}1e4!=t&&(l=e.trim(l.substring(0,p)),-12<=t&&12>=t&&0!=t&&(a[h].shift=t));t=""+l;p=e.getReplaceSymbols(l,null,!1);if(null!=p&&0<(a[h].channelId=this.getItemRecognition([l=p,d,f])))break;if(0<(a[h].channelId=this.getItemRecognition([l.toLowerCase(),d,f],!0)))break;p=e.trim(e.getRemoveBrackets(l,"()"));if(0<p.length&&p.length!=l.length&&0<(a[h].channelId=this.getItemRecognition([l=p,d,f])))break;if(0<(a[h].channelId=this.getItemRecognition([l=l.toLowerCase(),d,f],!0)))break;if(0<(a[h].channelId=this.getItemRecognition([new O("(_|\\.|\\-|\\s|\\(|\\)|\"|')","g").replace(t,"").toLowerCase(),d,f],!0,!0)))break;if(0<(a[h].channelId=this.getItemRecognition([new O("(_|\\.|\\-|\\s|\\(|\\)|\"|')","g").replace(l,""),d,f],!0,!0)))break}}}if(b)for(c=1,d=0,f=a.length;d<f;)g=d++,1>a[g].type&&(a[g].type=1),a[g].order=c++;return a},getPrepare:function(a,b,c){X.getInstance().getReady(this,new ia("48",!1,!1,{dispatcher:a,event:b,args:c}))},getContent:function(a,b,c,d){this.getPrepare(a,b,{action:"getContent",id:c,sources:d})},setContent:function(a,b,c,d,f){this.getPrepare(a,b,{action:"setContent",id:c,source:d,content:f})},getDownloadContent:function(a,b,c,d){this.getPrepare(a,b,{action:"getDownloadContent",id:c,source:d})},getURLInfo:function(a,b,c){c=A.trim(c);var d=c.indexOf("://"),f;f=0<d?c.substring(0,d).toLowerCase():"";var d=0<d?c.substring(d+3):c,g={source:c,protocol:f,location:d};0==c.length?e.getDispatch(a,b,null,{success:!0,error:1,details:g}):"http"!=f&&"https"!=f?e.getDispatch(a,b,null,{success:!0,error:2,details:g}):2>d.length?e.getDispatch(a,b,null,{success:!0,error:3,details:g}):M.getCustomRequest("GET",c,[],this,new ia("4E",!1,!1,{dispatcher:a,event:b,source:c}),10485760,1e4)},getLoadContent:function(a,b,c,d){X.getInstance().getReady(this,new ia("4B",!1,!1,{dispatcher:a,event:b,content:c,format:null==d?-1:d}))},getSaveContent:function(a,b,c,d){null!=c&&"string"==typeof c?null!=b&&null!=a&&(b.data={success:!0,content:c},a.dispatchEvent(b)):X.getInstance().getReady(this,new ia("4C",!1,!1,{dispatcher:a,event:b,content:c,format:null==d?-1:d}))},getReadyHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{})},getContentHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&1==a.data.success&&null!=a.data.list?a.data.list:[];if(0<b.length)for(var c=0,d=b.length;c<d;){var f=c++;if(null!=b[f]&&null!=b[f].id&&null!=b[f].content&&"string"==typeof b[f].content){var g=b[f].content;r.deleteField(b[f],"content");var q=this.getSourceDescription(b[f].id);b[f].list=xa.parse(g,this._formats,this._contentTypes,null!=q&&null!=q.type?q.type:0,!1,{})}}e.getEventResponse(a,{success:null!=a.data&&1==a.data.success,list:b})}},setContentHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getLoadContentHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null==a.params.content?"":D.string(a.params.content);var c=-1,d=[],f={};if(0>c){var g=e.trim(w.substr(b,0,200)).toLowerCase();123==w.cca(g,0)?c=3:60==w.cca(g,0)?c=0<=g.indexOf("<asx")||0<g.indexOf("<entry")?5:1:"[playlist]"==w.substr(g,0,10)?c=4:0<=g.indexOf("#extm3u")&&(c=0)}0>c&&(c=0);switch(c){case 0:d=xa.parse(b,this._formats,this._contentTypes,0,!0,f);break;case 1:case 2:d=$a.parse(b,this._formats,this._contentTypes,0,!0,f);break;case 3:d=ab.parse(b,this._formats,this._contentTypes,0,!0,f);break;case 4:d=bb.parse(b,this._formats,this._contentTypes,0,!0,f);break;case 5:d=cb.parse(b,this._formats,this._contentTypes,0,!0,f)}null!=d&&0<d.length&&(d=this.getContentRecognition(d));e.getEventResponse(a,{success:!0,list:d})}},getSaveContentHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,content:xa.getFile(null==a.params.content?[]:a.params.content,this._contentTypes)})},getChannelsHandler:function(a){e.getCheckEventResponse(a)&&C.getInstance().getDevices(this,new ia("47",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,args:a.params.args}))},getPrepareHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.args,c=b.id,d=b.sources,f;f=null!=a.data&&null!=a.data.list?a.data.list:[];if(0<f.length&&null!=b&&"getContent"==b.action&&b.id&&null!=b.sources){for(var b=null,g=0;g<f.length;){var q=f[g];++g;if(null!=q&&q.id==c){b=q;break}}0<c&&null!=b?(f=new ia("49"),f.params={dispatcher:a.params.dispatcher,event:a.params.event,id:c,sources:d,device:b},U.getInstance().getContent(this,f,b,d)):e.getEventResponse(a,{success:!0,error:5})}else if(0<f.length&&null!=b&&"setContent"==b.action&&null!=b.id&&null!=b.source&&null!=b.content){d=null;for(g=0;g<f.length;)if(q=f[g],++g,null!=q&&q.id==c){d=q;break}0<c&&null!=d?(c=new ia("4A"),c.params={dispatcher:a.params.dispatcher,event:a.params.event,id:b.id,source:b.source,content:b.content,device:d},a=b.content instanceof Array&&null==b.content.__enum__?xa.getFile(b.content,this._contentTypes):"string"==typeof b.content?b.content:"",U.getInstance().setContent(this,c,d,b.source,a)):e.getEventResponse(a,{success:!0,error:5})}else if(null!=b&&"getDownloadContent"==b.action&&null!=b.id&&null!=b.source){for(var d=window.navigator.userAgent.toLowerCase(),g=this.getSourceDescription(b.source),q=[1,3,4,15],h=null,n=0;n<f.length;){var m=f[n];++n;if(null!=m&&m.id==c){h=m;break}}if(c=0<c&&null!=h&&null!=g)c=0<=w.indexOf(q,g.type,0);if(c){a=Ca.getPrepareParams({action:"getDownloadContent",id:h.id,uid:h.uid,source:b.source},"key",!0,!0);c="";b=0;for(f=r.fields(a);b<f.length;)g=f[b],++b,c+=(""!=c?"&":"")+encodeURIComponent(g)+"="+A.urlEncode(r.getProperty(a,g));a="//api.ss-iptv.com/bridge/?"+c;(-1<d.indexOf("chrome")||-1<d.indexOf("safari"))&&null!=(rb=window.document,x(rb,rb.createEvent))?(c=window.document.createElement("a"),c.href=a,null!=c.download&&(a.substring(a.lastIndexOf("/")+1,a.length),c.download="playlist.m3u"),a=window.document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c.dispatchEvent(a)):window.open(a,"_self")}else e.getEventResponse(a,{success:!0,error:4})}else e.getEventResponse(a,{success:!0,error:9})}},getDownloadURLHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params,c={code:-1,response:""},d;d=null!=a.data?a.data.xhr:null;if(null!=d){try{c.code=e.parseInt(d.status,c.code)}catch(f){f instanceof t&&(f=f.val)}try{c.response=e.trim(d.responseText)}catch(f){f instanceof t&&(f=f.val)}}0<c.code?(b=13,200==c.code||206==c.code?b=0:401==c.code?b=11:403==c.code?b=12:404==c.code?b=8:504==c.code?b=9:500<=c.code&&(b=10),e.getEventResponse(a,{success:!0,error:b,type:"direct",details:{direct:c}})):0<c.code?e.getEventResponse(a,{success:!0,error:8,type:"direct",details:{direct:c}}):U.getInstance().getProxyURL(this,new ia("4F",!1,!1,{event:b.event,dispatcher:b.dispatcher,type:"proxy",source:b.source,details:{direct:c}}),b.source)}},getProxyURLHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.data;e.getEventResponse(a,{success:!0,error:null!=b&&null!=b.error?b.error:8,type:"proxy",details:{direct:a.params.direct,proxy:b}})}},__class__:W});var C=function(a){z.call(this,null==a?{}:a);this._devices=[];this._instances=[];this._lastUpdate=0;this.defineEventHandlers()};u["modules.services.DevicesManager"]=C;C.__name__=["modules","services","DevicesManager"];C.__instance=null;C.getInstance=function(){null==C.__instance&&(C.__instance=new C);return C.__instance};C.__super__=z;C.prototype=N(z.prototype,{_devices:null,_instances:null,_lastUpdate:null,update:null,defineEventHandlers:function(){this.addEventListener("38",x(this,this.getServiceProviderHandler),this);this.addEventListener("39",x(this,this.getPrepareCallHandler),this);this.addEventListener("3A",x(this,this.getDevicesHandler),this);this.addEventListener("3B",x(this,this.getCurrentHandler),this);this.addEventListener("3C",x(this,this.setCurrentHandler),this);this.addEventListener("3D",x(this,this.getDeviceNameHandler),this);this.addEventListener("3E",x(this,this.setDeviceNameHandler),this);this.addEventListener("3F",x(this,this.getDisconnectHandler),this);this.addEventListener("41",x(this,this.getAccessHandler),this);this.addEventListener("40",x(this,this.getSyncHandler),this);this.addEventListener("42",x(this,this.getShowKeyHandler),this);this.addEventListener("43",x(this,this.getCheckKeyHandler),this);this.addEventListener("44",x(this,this.getUpdateKeyHandler),this);this.addEventListener("45",x(this,this.getConnectHandler),this);this.addEventListener("46",x(this,this.getLaunchHandler),this)},get_update:function(){return this._lastUpdate+1800<e.get_timestamp()},getNameById:function(a,b){var c="";if(0<a&&(null==b&&(b=[]),0<b.length))for(var d=0,f=b.length;d<f;){var e=d++;if(b[e].id==a){c=b[e].name;break}}return c},getStoredDevices:function(){var a=[];if(J.getInstance().get_ready()){var b=J.getInstance().read("list");null==b&&(b=[]);for(var c=0;c<b.length;){var d=b[c];++c;null!=d.id&&H.__instanceof(d.id,Za)&&0<d.id&&null!=d.uid&&"string"==typeof d.uid&&10<D.string(d.uid).length&&a.push({id:d.id,uid:d.uid})}}return a},setStoredDevices:function(a){for(var b=[],c=[],d=0;d<a.length;){var f=a[d];++d;0<f.id&&0>w.lastIndexOf(b,f.id,b.length-1)&&null!=f.uid&&10<f.uid.length&&(b.push(f.id),c.push({id:f.id,uid:f.uid}))}J.getInstance().write("list",c)},getDeviceById:function(a){if(0<this._devices.length)for(var b=0,c=this._devices;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null},getTVInterfaceById:function(a){if(null!=this.getDeviceById(a)&&0<this._instances.length)for(var b=0,c=this._instances;b<c.length;){var d=c[b];++b;if(d.id==a)return d.tv}return null},getServiceProvider:function(a,b,c){a=new R("38",!1,!1,{dispatcher:a,event:b,id:c});this.get_update()?(b=J.getInstance().read("list"),null==b&&(b=[]),0<b.length?U.getInstance().getDevices(this,a,b):e.getDispatch(this,a,null,{success:!0,list:[],id:c})):e.getDispatch(this,a,null,{success:!0,list:this._devices,id:c})},getDevices:function(a,b){if(this.get_update()){var c=this.getStoredDevices();0<c.length?U.getInstance().getDevices(this,new R("3A",!1,!1,{dispatcher:a,event:b,list:c}),c):e.getDispatch(a,b,null,{success:!0,list:[]})}else b.data={success:!0,list:this._devices},a.dispatchEvent(b)},getCurrent:function(a,b){this.getDevices(this,new R("3B",!1,!1,{dispatcher:a,event:b}))},setCurrent:function(a,b,c){this._lastUpdate=0;this.getServiceProvider(this,new R("3C",!1,!1,{dispatcher:a,event:b,id:c}),c)},getDeviceName:function(a,b,c){this.getDevices(this,new R("3D",!1,!1,{dispatcher:a,event:b,id:c}))},setDeviceName:function(a,b,c,d){this.getDevices(this,new R("3E",!1,!1,{dispatcher:a,event:b,id:c,value:d}))},getDisconnect:function(a,b,c){this._lastUpdate=0;for(var d=this.getStoredDevices(),f=[],g=0;g<d.length;){var q=d[g];++g;null!=q&&null!=q.id&&null!=q.uid&&e.parseInt(q.id,-1)!=c&&f.push({id:q.id,uid:q.uid})}J.getInstance().write("list",f);this.getDevices(this,new R("3F",!1,!1,{dispatcher:a,event:b,id:c}))},getAccess:function(a,b,c){null!=a&&null!=b&&(null!=c&&3<c.length&&10>c.length?U.getInstance().getAccess(this,new R("41",!1,!1,{dispatcher:a,event:b,code:c}),c):e.getDispatch(a,b,null,{success:!0,present:!1,deviceId:-1}))},getAvailablity:function(a,b,c){this.getServiceProvider(this,new R("39",!1,!1,{dispatcher:a,event:b,action:"getAvailablity",id:c}),c)},getShowKey:function(a,b,c){this.getServiceProvider(this,new R("39",!1,!1,{dispatcher:a,event:b,action:"getShowKey",id:c}),c)},getCheckKey:function(a,b,c,d){this.getServiceProvider(this,new R("39",!1,!1,{dispatcher:a,event:b,action:"getCheckKey",id:c,key:d}),c)},getConnect:function(a,b,c){this.getServiceProvider(this,new R("39",!1,!1,{dispatcher:a,event:b,action:"getConnect",id:c}),c)},getLaunch:function(a,b,c,d){this.getServiceProvider(this,new R("39",!1,!1,{dispatcher:a,event:b,action:"getLaunch",id:c,content:d}),c)},getDevicesHandler:function(a){if(e.getCheckEventResponse(a)){var b=null!=a.data&&1==a.data.success&&null!=a.data.list,c;c=b?a.data.list:[];if(b){this._devices=[];var d=J.getInstance().read("names",[]);null==d&&(d=[]);for(var f=0;f<c.length;){var g=c[f];++f;g=new db(g);0<g.id&&10<g.uid.length&&(g.name=this.getNameById(g.id,d),this._devices.push(g))}this._lastUpdate=e.get_timestamp();this.setStoredDevices(this._devices)}e.getEventResponse(a,{success:!0,list:b?this._devices:[]})}},getCurrentHandler:function(a){if(e.getCheckEventResponse(a)){var b=-1,c=J.getInstance().read("id",-1),d=!1,f=-1;if(null!=this._devices&&0<this._devices.length){for(var g=0,q=this._devices;g<q.length;){var h=q[g];++g;if(0>=b&&0<h.id){b=h.id;break}}g=0;for(q=this._devices.length;g<q;)if(h=g++,this._devices[h].id==c){d=!0;f=h;break}}d||(c=0<b?b:-1,J.getInstance().write("id",c));e.getEventResponse(a,{success:!0,id:c,present:d,list:this._devices,index:f})}},setCurrentHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.params.id?a.params.id:-1;var c=-1;if(null!=this._devices&&0<this._devices.length){if(0<b)for(var d=0,f=this._devices;d<f.length;){var g=f[d];++d;if(g.id==b){J.getInstance().write("id",c=g.id);break}}if(0>=c&&(b=J.getInstance().read("id",-1),null!=b&&0<b))for(d=0,f=this._devices;d<f.length;)if(g=f[d],++d,g.id==b){J.getInstance().write("id",c=g.id);break}if(0>=c){b=!1;d=0;for(f=this._devices;d<f.length;)if(g=f[d],++d,0<g.id){b=!0;J.getInstance().write("id",c=g.id);break}b||J.getInstance().write("id",c=-1)}}e.getEventResponse(a,{success:!0,id:c})}},getDeviceNameHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.params.id?a.params.id:-1;var c=-1;if(null!=this._devices&&0<this._devices.length)for(var d=0,f=this._devices.length;d<f;){var g=d++;if(this._devices[g].id==b){c=this._devices[g].id;break}}e.getEventResponse(a,{success:!0,name:0<c?this.getNameById(c,J.getInstance().read("names",[])):""})}},setDeviceNameHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.params.id?a.params.id:-1;var c;c=null!=a.params.value?a.params.value:"";var d=-1,f=-1;if(null!=this._devices&&0<this._devices.length)for(var g=0,q=this._devices.length;g<q;){var h=g++;if(this._devices[h].id==b){d=h;f=this._devices[h].id;break}}if(0<f){this._devices[d].name=c;b=J.getInstance().read("names",[]);null==b&&(b=[]);d=-1;if(0<b.length)for(g=0,q=b.length;g<q;)if(h=g++,b[h].id==f){d=h;break}0<=d?b[d].name=c:b.push({id:f,name:c});J.getInstance().write("names",b)}e.getEventResponse(a,{success:!0,name:0<f?c:""})}},getDisconnectHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0})},getSyncHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&1==a.data.success&&null!=a.data.list?a.data.list:[];this._devices=[];var c=J.getInstance().read("names",[]);null==c&&(c=[]);for(var d=0;d<b.length;){var f=b[d];++d;f=new db(f);0<f.id&&10<f.uid.length&&(f.name=this.getNameById(f.id,c),this._devices.push(f))}this._lastUpdate=e.get_timestamp();this.setStoredDevices(this._devices);e.getEventResponse(a,null!=a.params.response?a.params.response:{success:!0})}},getAccessHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.id?e.parseInt(a.data.id):-1;var c;c=null!=a.data&&null!=a.data.uid?D.string(a.data.uid).toLowerCase():"";for(var d=!1,f=this.getStoredDevices(),g=0;g<f.length;){var q=f[g];++g;if(q.id==b&&q.uid==c){d=!0;break}}(0==f.length||!d)&&0<b&&10<c.length&&f.push({id:b,uid:c});J.getInstance().write("list",f);a.params.event.data={success:!0,present:d,deviceId:b};U.getInstance().getDevices(this,new R("40",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,list:f,response:{success:!0,present:d,deviceId:b}}),f)}},getShowKeyHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getCheckKeyHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.key,c=this.getDeviceById(a.params.id);null!=c&&null!=a.data&&a.data.success&&a.data.result?U.getInstance().getUpdateKey(this,new R("44",!1,!1,a.params),c,b):e.getEventResponse(a,{success:!0,result:!1,error:null!=a.data?a.data.error:null})}},getUpdateKeyHandler:function(a){if(e.getCheckEventResponse(a)){var b=this.getDeviceById(a.params.id);null!=b&&(b.key=a.params.key);e.getEventResponse(a,{success:!0,result:null!=b})}},getConnectHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getLaunchHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getServiceProviderHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.id,c;c=null!=a.data&&null!=a.data.list?a.data.list:[];for(var d=-1,f=[],g=0,q=c.length;g<q;){var h=g++;null!=c[h]&&(c[h].id==b&&(d=h),f.push(c[h].id))}this._devices=c;b=[];g=[];q=0;for(h=this._instances;q<h.length;){var n=h[q];++q;null!=n&&(0<=w.indexOf(f,n.id,0)?b.push(n):g.push(n))}for(f=0;f<g.length;)q=g[f],++f,null!=q&&null!=q.instance&&0>w.indexOf(b,q,0)&&H.__cast(q.tv,Ea).getDisconnect(null,null);this._instances=b;f=null;if(0<=d)for(b=0,g=this._instances;b<g.length;)if(q=g[b],++b,q.id==c[d].id){f=q.tv;break}if(null==f&&0<c.length&&0<=d&&d<c.length){switch(c[d].vendorId){case 2:f=new Y({device:c[d]});break;case 3:f=new ba({device:c[d]});break;case 4:f=new qa({device:c[d]});break;case 5:f=new ya({device:c[d]});break;case 10:f=new za({device:c[d]})}null!=f&&this._instances.push({id:c[d].id,device:c[d],tv:f})}e.getEventResponse(a,e.set({success:!0,device:0<=d?this._devices[d]:null,tv:f},null!=f?{}:{error:4}))}},getPrepareCallHandler:function(a){if(e.getCheckEventResponse(a)&&null!=a.params.action){var b=a.params.dispatcher,c=a.params.event,d=a.params.id,f=this.getDeviceById(d),g=this.getTVInterfaceById(d);"getShowKey"==a.params.action?(b=new R("42",!1,!1,{dispatcher:b,event:c,id:d}),null!=f&&null!=g?g.getShowKey(this,b):(c.data={success:!0,error:5},this.dispatchEvent(b))):"getCheckKey"==a.params.action?(a=null==a.params.key?"":A.trim(D.string(a.params.key)),b=new R("43",!1,!1,{dispatcher:b,event:c,id:d,prev:f.key,key:a}),null!=f&&null!=g?g.getCheckKey(this,b,a):(c.data={success:!0,error:5},this.dispatchEvent(b))):"getConnect"==a.params.action?(b=new R("45",!1,!1,{dispatcher:b,event:c,id:d}),null!=f&&null!=g?g.getConnect(this,b):(c.data={success:!0,error:5},this.dispatchEvent(b))):"getLaunch"==a.params.action&&(a=null==a.params.content?"":a.params.content,b=new R("46",!1,!1,{dispatcher:b,event:c,id:d,content:a}),null!=f&&null!=g?g.getLaunch(this,b,a):(c.data={success:!0,error:5},this.dispatchEvent(b)))}},__class__:C,__properties__:{get_update:"get_update"}});var ha=function(a){z.call(this,null==a?{}:a);this._messagesBus=this._handler=null};u["modules.services.MessagesManager"]=ha;ha.__name__=["modules","services","MessagesManager"];ha.getInstance=function(){null==ha.__instance&&(ha.__instance=new ha);return ha.__instance};ha.__super__=z;ha.prototype=N(z.prototype,{_handler:null,_messagesBus:null,getJoin:function(a,b,c,d,f){null!=this._messagesBus&&(this._messagesBus.leave(),this._messagesBus.removeEventListener("7",x(this,this.messageHandler)));this._messagesBus=this._handler=null;"string"==typeof c&&"string"==typeof d&&(this._messagesBus=new ra({source:c,channelId:d,join:{dispatcher:a,event:b}}),this._messagesBus.addEventListener("7",x(this,this.messageHandler),this),this._handler=f)},getSend:function(a,b,c,d){null!=this._messagesBus?this._messagesBus.send(a,b,c,d):e.getDispatch(a,b,null,{success:!1})},getLeave:function(a,b){null!=this._messagesBus&&this._messagesBus.leave();e.getDispatch(a,b,null,{success:!1})},messageHandler:function(a){null!=this._handler&&this._handler(a.data)},__class__:ha});var Q=function(a){z.call(this,null==a?{}:a);this.networkService=new Ca({serverUrl:"//api.ss-iptv.com/partner/",requestType:M.HTTP_REQUEST_TYPE_POST,contentType:M.HTTP_REQUEST_JSON,secretKey:"key",svc:!0});this.defineEventHandlers()};u["modules.services.PartnerManager"]=Q;Q.__name__=["modules","services","PartnerManager"];Q.getInstance=function(){null==Q.__instance&&(Q.__instance=new Q);return Q.__instance};Q.__super__=z;Q.prototype=N(z.prototype,{networkService:null,defineEventHandlers:function(){this.addEventListener("15",x(this,this.getAuthorizedHandler),this);this.addEventListener("16",x(this,this.getAuthorizationHandler),this);this.addEventListener("17",x(this,this.getLogoutHandler),this);this.addEventListener("19",x(this,this.getPartnerCheckAgreement),this);this.addEventListener("1A",x(this,this.getPartnerAcceptAgreement),this);this.addEventListener("18",x(this,this.getProvidersHandler),this);this.addEventListener("1B",x(this,this.getPackagesHandler),this);this.addEventListener("1C",x(this,this.getPackageHandler),this);this.addEventListener("1D",x(this,this.setPackageHandler),this);this.addEventListener("1E",x(this,this.getCheckCORSHandler),this);this.addEventListener("1F",x(this,this.getRangesHandler),this);this.addEventListener("20",x(this,this.setRangesHandler),this);this.addEventListener("4B",x(this,this.getLoadContentHandler),this)},getAuthorized:function(a,b){var c=J.getInstance().read("partnerSession","");null!=c&&0<c.length?this.networkService.serviceCall({action:"getAuthorized",session:c},new S("15",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!1,error:257})},getAuthorization:function(a,b,c,d){if(null!=c&&0<c.length&&null!=d&&0<d.length){var f=e.get_timestamp();this.networkService.serviceCall({action:"getAuthorization",timestamp:f,email:c,password:ea.encode(null==f?"null":""+f,ea.encode("key",d))},new S("16",!1,!1,{dispatcher:a,event:b,email:c,password:d}),this)}else e.getDispatch(a,b,null,{success:!1,error:258})},getLogout:function(a,b){var c=J.getInstance().read("partnerSession","");null!=c&&0<c.length?this.networkService.serviceCall({action:"getLogout",session:c},new S("17",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!0})},getSessionExpired:function(a,b){},getCheckAgreement:function(a,b,c){var d=J.getInstance().read("partnerSession","");null!=d&&0<d.length?this.networkService.serviceCall({action:"getCheckAgreement",session:d,language:c},new S("19",!1,!1,{dispatcher:a,event:b,language:c}),this):e.getDispatch(a,b,null,{success:!0})},getAcceptAgreement:function(a,b){var c=J.getInstance().read("partnerSession","");null!=c&&0<c.length?this.networkService.serviceCall({action:"getAcceptAgreement",session:c},new S("1A",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!0})},getPartnerProviders:function(a,b){var c=J.getInstance().read("partnerSession","");null!=c&&0<c.length?this.networkService.serviceCall({action:"getProviders",session:c},new S("18",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!0})},getPackages:function(a,b){var c=J.getInstance().read("partnerSession","");null!=c&&0<c.length?this.networkService.serviceCall({action:"getPackages",session:c},new S("1B",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!0})},getPackage:function(a,b,c){var d=J.getInstance().read("partnerSession","");null!=d&&0<d.length?this.networkService.serviceCall({action:"getPackage",session:d,id:c},new S("1C",!1,!1,{dispatcher:a,event:b}),this):e.getDispatch(a,b,null,{success:!0})},setPackage:function(a,b,c,d,f){var g=J.getInstance().read("partnerSession","");null!=g&&0<g.length?(f=null==f||0==r.fields(f).length?{}:f,null!=f.content&&(null==f.content.source||null!=f.content.source&&0!=A.trim(D.string(f.content.source)).length||r.deleteField(f.content,"source"),0==r.fields(f.content).length&&r.deleteField(f,"content")),null!=f.address&&0!=A.trim(D.string(f.address)).length||r.deleteField(f,"address"),null!=f.phone&&0!=A.trim(D.string(f.phone)).length||r.deleteField(f,"phone"),null!=f.site&&0!=A.trim(D.string(f.site)).length||r.deleteField(f,"site"),null!=f.email&&0!=A.trim(D.string(f.email)).length||r.deleteField(f,"email"),0==r.fields(f).length&&(f=null),this.networkService.serviceCall({action:"setPackage",session:g,id:c,content:d,settings:e.encodeJSON(f)},new S("1D",!1,!1,{dispatcher:a,event:b,id:c,content:d,settings:f}),this)):e.getDispatch(a,b,null,{success:!0})},getCheckCORS:function(a,b,c){var d=J.getInstance().read("partnerSession","");null!=d&&0<d.length?this.networkService.serviceCall({action:"getCheckCORS",session:d,source:c},new S("1E",!1,!1,{dispatcher:a,event:b,source:c}),this):e.getDispatch(a,b,null,{success:!1,error:257})},getRanges:function(a,b,c){var d=J.getInstance().read("partnerSession","");null!=d&&0<d.length?this.networkService.serviceCall({action:"getRanges",packageId:c},new S("1F",!1,!1,{dispatcher:a,event:b,packageId:c}),this):e.getDispatch(a,b,null,{success:!1,error:257})},setRanges:function(a,b,c,d){var f=J.getInstance().read("partnerSession","");null!=f&&0<f.length?this.networkService.serviceCall({action:"setRanges",packageId:c,list:d},new S("20",!1,!1,{dispatcher:a,event:b,packageId:c,list:d}),this):e.getDispatch(a,b,null,{success:!1,error:257})},getAuthorizedHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getAuthorizationHandler:function(a){var b=null!=a.data&&a.data.success&&null!=a.data.session&&"string"==typeof a.data.session&&0<D.string(a.data.session).length;b&&J.getInstance().write("partnerSession",a.data.session);e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,ready:b,session:b?a.data.session:""})},getLogoutHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0})},getPartnerCheckAgreement:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getPartnerAcceptAgreement:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getProvidersHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.list?a.data.list:[];for(var c=0,d=b.length;c<d;){var f=c++;b[f].id=e.parseInt(b[f].id);b[f].state=e.parseInt(b[f].state)}e.getEventResponse(a,{success:!0,list:b})}},getPackagesHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.list&&a.data.list instanceof Array&&null==a.data.list.__enum__?a.data.list:[];for(var c=0,d=b.length;c<d;){var f=c++;b[f].id=e.parseInt(a.data.list[f].id);b[f].cityId=e.parseInt(a.data.list[f].cityId);b[f].countryId=e.parseInt(a.data.list[f].countryId);b[f].providerId=e.parseInt(a.data.list[f].providerId)}e.getEventResponse(a,{success:!0,list:b})}},getPackageHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.settings?e.decodeJSON(a.data.settings,{}):{};null==b.content?b.content={source:""}:b.content.source=null==b.content.source?"":b.content.source;b.accessType=null==b.accessType?"":b.accessType;b.address=null==b.address?"":b.address;b.phone=null==b.phone?"":b.phone;b.site=null==b.site?"":b.site;b.email=null==b.email?"":b.email;a.data=e.set(a.data,{settings:b},!0);e.getEventResponse(a,a.data)}},setPackageHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0})},getCheckCORSHandler:function(a){e.getCheckEventResponse(a)&&(null!=a.data&&1==a.data.cors?W.getInstance().getLoadContent(this,new ia("4B",!1,!1,a.params),null!=a.data?a.data.content:"",-1):e.getEventResponse(a,{succes:!0,result:!1,cors:!1}))},getRangesHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},setRangesHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getLoadContentHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,result:null!=a.data&&null!=a.data.list?0<a.data.list.length:!1,cors:!0})},__class__:Q});var U=function(a){z.call(this,null==a?{}:a);this.networkService=new Ca({serverUrl:"//api.ss-iptv.com/bridge/",requestType:M.HTTP_REQUEST_TYPE_POST,contentType:M.HTTP_REQUEST_JSON,secretKey:"key",svc:!0});this.defineEventHandlers()};u["modules.services.ServiceManager"]=U;U.__name__=["modules","services","ServiceManager"];U.getInstance=function(){null==U.__instance&&(U.__instance=new U);return U.__instance};U.__super__=z;U.prototype=N(z.prototype,{networkService:null,defineEventHandlers:function(){this.addEventListener("E",x(this,this.getDevicesHandler),this);this.addEventListener("12",x(this,this.getContentHandler),this);this.addEventListener("13",x(this,this.setContentHandler),this);this.addEventListener("F",x(this,this.getAccessHandler),this);this.addEventListener("10",x(this,this.getUpdateKeyHandler),this);this.addEventListener("14",x(this,this.getProxyURLHandler),this);this.addEventListener("11",x(this,this.getChannelsHandler),this)},getChannels:function(a,b){this.networkService.serviceCall({action:"getChannels"},new S("11",!1,!1,{dispatcher:a,event:b}),this)},getContent:function(a,b,c,d){this.networkService.serviceCall({action:"getContent",id:null==c?-1:c.id,uid:null==c?"":c.uid,list:e.encodeJSON(d)},new S("12",!1,!1,{dispatcher:a,event:b,device:c,list:d}),this)},setContent:function(a,b,c,d,f){this.networkService.serviceCall({action:"setContent",id:null==c?-1:c.id,uid:null==c?"":c.uid,source:d,content:"string"==typeof f?f:e.encodeJSON(f)},new S("13",!1,!1,{dispatcher:a,event:b,device:c,source:d,content:f}),this)},getDevices:function(a,b,c){this.networkService.serviceCall({action:"getDevices",list:e.encodeJSON(c)},new S("E",!1,!1,{dispatcher:a,event:b,list:c}),this)},getAccess:function(a,b,c){this.networkService.serviceCall({action:"getAccess",code:c},new S("F",!1,!1,{dispatcher:a,event:b,code:c}),this)},getUpdateKey:function(a,b,c,d){this.networkService.serviceCall({action:"getUpdateKey",id:c.id,uid:c.uid,key:d},new S("10",!1,!1,{dispatcher:a,event:b,device:c,key:d}),this)},getProxyURL:function(a,b,c){this.networkService.serviceCall({action:"getProxyURL",source:c},new S("14",!1,!1,{dispatcher:a,event:b,source:c}),this)},getChannelsHandler:function(a){null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event&&e.getDispatch(a.params.dispatcher,a.params.event,null,{success:!0,list:null!=a.data&&null!=a.data.list?a.data.list:[],replaces:null!=a.data&&null!=a.data.replaces?a.data.replaces:[]})},getContentHandler:function(a){null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},setContentHandler:function(a){null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},getDevicesHandler:function(a){null!=a.params&&null!=a.params.dispatcher&&null!=a.params.event&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},getAccessHandler:function(a){e.getCheckEventResponse(a)&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},getUpdateKeyHandler:function(a){e.getCheckEventResponse(a)&&e.getDispatch(a.params.dispatcher,a.params.event,null,{success:!0,result:null!=a.data&&a.data.result})},getProxyURLHandler:function(a){e.getCheckEventResponse(a)&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},__class__:U});var J=function(a){z.call(this,null==a?{}:a);this._data=this._instance=null;this._loadState=0;this._branch="data";var b=b;null!=b&&null!=b.storage&&null!=b.storage.sync?(this._type="chrome",this._instance=b.storage):null!=ma.getLocalStorage()?(this._type="storage",this._instance=ma.getLocalStorage()):this._type="cookie";this.defineEventHandlers()};u["modules.services.StorageManager"]=J;J.__name__=["modules","services","StorageManager"];J.getInstance=function(){null==J.__instance&&(J.__instance=new J);return J.__instance};J.__super__=z;J.prototype=N(z.prototype,{_type:null,_instance:null,_data:null,_branch:null,_loadState:null,ready:null,defineEventHandlers:function(){this.addEventListener("9",x(this,this.readyHandler),this);this.addEventListener("A",x(this,this.loadHandler),this);this.addEventListener("B",x(this,this.saveHandler),this)},get_ready:function(){return null!=this._data},getLoad:function(a,b){if(0==this._loadState){this._loadState=1;var c=new wa("A",!1,!1,{dispatcher:a,event:b});if("chrome"==this._type){var d=this;this._instance.sync.get(this._branch,function(a){c.data=a;d.dispatchEvent.call(d,c)})}else{if("storage"==this._type)c.data=e.decodeJSON(this._instance.getItem(this._branch));else if("cookie"==this._type)for(var f=encodeURIComponent(this._branch)+"=",g=0,q=window.document.cookie.split(";");g<q.length;){var h=q[g];++g;h=A.trim(h);if(0==h.indexOf(f)){c.data=e.decodeJSON(A.urlDecode(h.substring(f.length,h.length)));break}}this.dispatchEvent(c)}}},getSave:function(a,b,c){var d=e.encodeJSON(null==c?{}:c),f=new wa("B",!1,!1,{dispatcher:a,event:b,value:c});if("chrome"==this._type){var g=this;this._data[this._branch]=d;this._instance.sync.set(this._branch,function(){g.dispatchEvent.call(g,f)})}else"storage"==this._type?this._instance.setItem(this._branch,d):"cookie"==this._type&&(a=new Date,a.setTime(a.getTime()+31536e6),a="expires="+a.toGMTString(),window.document.cookie=encodeURIComponent(this._branch)+"="+encodeURIComponent(d)+"; "+a),this.dispatchEvent(f)},getInit:function(a,b){this.getLoad(this,new wa("9",!1,!1,{dispatcher:a,event:b}))},read:function(a,b){var c=null;null==(c=r.field(null==this._data?this._data={}:this._data=this._data,a))&&(r.setField(this._data,a,c=b),this.getSave(this,new wa("A"),this._data));return c},write:function(a,b){r.setField(null==this._data?this._data={}:this._data=this._data,a,b);this.getSave(this,new wa("B"),this._data);return b},loadHandler:function(a){this._loadState=2;null!=a.params&&(this._data=null==a.data?{}:a.data,e.getDispatch(a.params.dispatcher,a.params.event,null,a.data))},saveHandler:function(a){null!=a.params&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},readyHandler:function(a){null!=a.params&&e.getDispatch(a.params.dispatcher,a.params.event,null,a.data)},__class__:J,__properties__:{get_ready:"get_ready"}});var Ia=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.ChannelsEvent"]=Ia;Ia.__name__=["modules","services","events","ChannelsEvent"];Ia.__super__=I;Ia.prototype=N(I.prototype,{__class__:Ia});var ia=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.ContentEvent"]=ia;ia.__name__=["modules","services","events","ContentEvent"];ia.__super__=I;ia.prototype=N(I.prototype,{__class__:ia});var R=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.DevicesEvent"]=R;R.__name__=["modules","services","events","DevicesEvent"];R.__super__=I;R.prototype=N(I.prototype,{__class__:R});var Qa=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.QueueEvent"]=Qa;Qa.__name__=["modules","services","events","QueueEvent"];Qa.__super__=I;Qa.prototype=N(I.prototype,{__class__:Qa});var S=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);Ga.call(this,a,b,c,d,f)};u["modules.services.events.ServiceEvent"]=S;S.__name__=["modules","services","events","ServiceEvent"];S.__super__=Ga;S.prototype=N(Ga.prototype,{__class__:S});var wa=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.StorageEvent"]=wa;wa.__name__=["modules","services","events","StorageEvent"];wa.__super__=I;wa.prototype=N(I.prototype,{__class__:wa});var L=function(a,b,c,d,f){null==c&&(c=!1);null==b&&(b=!1);I.call(this,a,b,c,d,f)};u["modules.services.events.TVServiceEvent"]=L;L.__name__=["modules","services","events","TVServiceEvent"];L.__super__=I;L.prototype=N(I.prototype,{__class__:L});var cb=function(){};u["modules.services.parser.ASX"]=cb;cb.__name__=["modules","services","parser","ASX"];cb.getType=function(a,b){a=a.toLowerCase();for(var c=0;c<b.length;){var d=b[c];++c;if(a==d.value){if(null!=d.id)return d.id;break}}return 1};cb.parse=function(a,b,c,d,f,g){null==d&&(d=1);null==g&&(g={});f=[];var q=null;try{q=k.parse(a)}catch(x){x instanceof t&&(x=x.val)}if(null!=q)for(a=0,q=e.getXmlTags("asx",q);a<q.length;){var h=q[a];++a;for(var n=0,h=e.getXmlTags("entry",h);n<h.length;){var m=h[n];++n;var G=new Aa(d,"",-1),l=e.getArrayItem(e.getXmlTags("ref",m),0,null),p=e.getArrayItem(e.getXmlTags("title",m),0,null),u=e.getArrayItem(e.getXmlTags("duration",m),0,null);G.source=null!=l?e.getArrayItem(e.getXmlAttributes("href",l),0,""):"";var y;if(y=null!=p){if(p.nodeType!=k.Document&&p.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+p.nodeType);y=null!=p.children[0]}if(y){y=G;if(p.nodeType!=k.Document&&p.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+p.nodeType);y.title=p.children[0].get_nodeValue()}else G.title="";""==G.title&&(0<G.source.lastIndexOf("/")?(p=G.source.lastIndexOf("/")+1,G.title=w.substr(G.source,p,null)):G.title="");G.duration=null!=u?e.parseInt(e.getArrayItem(e.getXmlAttributes("value",l),0,0),0):0;G.description=null!=g.desc||null!=g.description?null!=g.desc?g.desc:g.description:"";G.aspectRatio=null!=g.ratio||null!=g.aspectratio?null!=g.ratio?g.ratio:g.aspectratio:"";l=e.getURLFileExtension(G.source).toLowerCase();null!=l&&0<l.length&&0<=w.indexOf(b,l,0)?G.type=15:G.type=d;l={};null!=g.size&&null==l.size&&(l.size=g.size);null==g.bg&&null==g.background||null!=l.background||(l.background=null!=g.bg?g.bg:g.background);u=0;for(p=r.fields(g);u<p.length;){y=p[u];++u;var z=A.trim(new O("\\W","g").replace(null==y?"null":""+y,"")).toLowerCase();"timeout"==z?l.timeout=e.parseInt(r.field(g,y),null):"mimetype"==z&&(l.mimeType=A.trim(D.string(r.field(g,y))));"catchup"==z?l.catchup=A.trim(D.string(r.field(g,y))):"catchupdays"==z?l.catchupDays=e.parseInt(r.field(g,y),null):"catchupsettings"==z&&(l.catchupSettings=A.trim(D.string(r.field(g,y))))}u=0;for(m=e.getXmlTags("param",m);u<m.length;)switch(y=m[u],++u,p=e.getArrayItem(e.getXmlAttributes("name",y),0,""),y=e.getArrayItem(e.getXmlAttributes("value",y),0,""),p.toLowerCase()){case"shift":case"tvg-shift":G.shift=e.parseInt(y);break;case"logo":case"tvg-logo":G.logo=y;break;case"ratio":case"aspect-ratio":G.aspectRatio=y;break;case"type":case"content-type":G.type=cb.getType(y,c);break;case"track":case"audio-track":G.audioTrack=y;break;case"group":case"group-title":G.group=y;break;case"mode3d":l.mode3d=y;break;case"subtitle":case"subtitles":l.subtitles=y;break;case"start":l.start=e.parseInt(y);break;case"end":l.end=e.parseInt(y);break;case"size":l.size=y;break;case"bg":case"background":l.background=y;break;case"description":case"desc":G.description=y;break;case"bitrate":l.bitrate=y;break;case"style":l.style=y;break;case"timeout":l.timeout=e.parseInt(y,null);break;case"channelid":G.channelId=e.parseInt(y);break;case"retries":l.retries=e.parseInt(y);break;case"text":G.text=y;break;case"mime-type":l.mimeType=y;break;case"uhd":l.uhd=e.parseBool(y);break;case"user-agent":l.userAgent=y;break;case"cookies":l.cookies=y;break;case"player-settings":l.playerSettings=y;break;case"buffering":l.buffering=e.parseInt(y,null);break;case"catchup":l.catchup=y;break;case"catchup-source":l.catchupSource=y;break;case"catchup-settings":l.catchupSettings=y;break;case"catchup-days":l.catchupDays=e.parseInt(y,l.catchupDays);break;case"restrictions":l.restrictions=y}m=w.substr(G.source,-4,null).toLowerCase();u=void 0;u="."==m.charAt(0)?w.substr(m,1,null):m;0<=w.indexOf(b,u,0)?G.type=15:G.type=G.type;0<r.fields(l).length&&G.updateExt(l);f.push(G)}}return f};var ab=function(){};u["modules.services.parser.JSPF"]=ab;ab.__name__=["modules","services","parser","JSPF"];ab.getType=function(a,b){a=a.toLowerCase();for(var c=0;c<b.length;){var d=b[c];++c;if(a==d.value){if(null!=d.id)return d.id;break}}return 1};ab.parse=function(a,b,c,d,f,g){null==d&&(d=1);f=[];null==g&&(g={});a=e.decodeJSON(a);a=null!=a&&null!=a.playlist?a.playlist:{};a=null!=a&&null!=a.track&&a.track instanceof Array&&null==a.track.__enum__?a.track:[];for(var q=0;q<a.length;){var h=a[q];++q;var n;n=null!=h.location?h.location instanceof Array&&null==h.location.__enum__?h.location:[D.string(h.location)]:[];n=0<n.length?n[0]:"";var m=e.getURLFileExtension(n).toLowerCase();n=new Aa(null!=m&&0<m.length&&0<=w.indexOf(b,m,0)?15:d,n,-1,null!=h.title?h.title:"",null!=h.album?h.album:"",null!=h.image?h.image:"");n.aspectRatio=null!=g.ratio||null!=g.aspectratio?null!=g.ratio?g.ratio:g.aspectratio:"";n.description=null!=h.annotation?h.annotation:null!=g.desc||null!=g.description?null!=g.desc?g.desc:g.description:"";m={};null!=g.size&&null==m.size&&(m.size=g.size);null==g.bg&&null==g.background||null!=m.background||(m.background=null!=g.bg?g.bg:g.background);for(var k=0,l=r.fields(g);k<l.length;){var p=l[k];++k;var t=A.trim(new O("\\W","g").replace(null==p?"null":""+p,"")).toLowerCase();"timeout"==t?m.timeout=e.parseInt(r.field(g,p),null):"mimetype"==t&&(m.mimeType=A.trim(D.string(r.field(g,p))));"catchup"==t?m.catchup=A.trim(D.string(r.field(g,p))):"catchupdays"==t?m.catchupDays=e.parseInt(r.field(g,p),null):"catchupsettings"==t&&(m.catchupSettings=A.trim(D.string(r.field(g,p))))}h=null!=h.extension?h.extension:{};k=0;for(l=r.fields(h);k<l.length;)switch(p=l[k],++k,p){case"audio":case"audiotrack":n.audioTrack=r.field(h,p);break;case"aspectratio":case"ratio":n.aspectRatio=r.field(h,p);break;case"description":case"desc":n.description=r.field(h,p);break;case"shift":case"tvgshift":n.shift=e.parseInt(r.field(h,p));break;case"mode3d":m.mode3d=r.field(h,p);break;case"subtitle":case"subtitles":m.subtitles=r.field(h,p);break;case"bg":case"background":m.background=r.field(h,p);break;case"size":case"tile-size":m.size=r.field(h,p);break;case"catchupsource":m.catchupSource=r.field(h,p);break;case"drm":m.drm=r.field(h,p);break;case"ctrl":m.ctrl=r.field(h,p);break;case"type":n.type=ab.getType(r.field(h,p),c);break;case"bitrate":m.bitrate=r.field(h,p);break;case"style":m.style=r.field(h,p);break;case"timeout":m.timeout=e.parseInt(r.field(h,p),null);break;case"channelid":n.channelId=e.parseInt(r.field(h,p));break;case"retries":m.retries=e.parseInt(r.field(h,p));break;case"text":n.text=r.field(h,p);break;case"mime-type":m.mimeType=r.field(h,p);break;case"uhd":m.uhd=e.parseBool(r.field(h,p));break;case"user-agent":m.userAgent=r.field(h,p);break;case"cookies":m.cookies=r.field(h,p);break;case"player-settings":m.playerSettings=r.field(h,p);break;case"buffering":m.buffering=e.parseInt(r.field(h,p),null);break;case"catchup":m.catchup=r.field(h,p);break;case"catchup-source":m.catchupSource=r.field(h,p);break;case"catchup-settings":m.catchupSettings=r.field(h,p);break;case"catchup-days":m.catchupDays=e.parseInt(r.field(h,p),m.catchupDays);break;case"restrictions":m.restrictions=r.field(h,p)}0<r.fields(m).length&&n.updateExt(m);m=w.substr(n.source,-4,null).toLowerCase();h=h=void 0;h="."==m.charAt(0)?w.substr(m,1,null):m;h=w.indexOf(b,h,0);n.type=0<=h?15:n.type;f.push(n)}return f};var xa=function(){};u["modules.services.parser.M3U"]=xa;xa.__name__=["modules","services","parser","M3U"];xa.getType=function(a,b){a=a.toLowerCase();for(var c=0;c<b.length;){var d=b[c];++c;if(a==D.string(d.value).toLowerCase())return null!=d.id?d.id:1}return 0};xa.parse=function(a,b,c,d,f,g){null==f&&(f=!1);null==d&&(d=0);null==g&&(g={});f=[];if(null!=a&&7<a.length){var q=[];if(new O("#extm3u|#extinf","gi").match(a)){if(a=new O("#extinf","gi").replace(a,"#EXTINF").split("#EXTINF"),null!=a&&1<a.length){var h=e.trim(a.splice(0,1)[0]),q=0<=h.indexOf("#")&&"extm3u"==function(a){a=h.indexOf("#")+1;return w.substr(h,a,6)}(this).toLowerCase()?e.trim(h.substring(h.indexOf("#")+7,h.length)):"";if(null!=q&&0<q.length){var n=new O("([\\w-]+)\\s*=\\s*((?:[\"][^\"]*.)|(?:['][^']*.)|(?:.(?![\\w-]+\\s*=))*)","gi");n.match(q)&&n.map(q,function(a){var b=a.matched(1).toLowerCase();a=e.trim(a.matched(2));1<a.length&&('"'==a.charAt(0)||"'"==a.charAt(0))&&a.charAt(0)==a.charAt(a.length-1)&&(a=a.substring(1,a.length-1));if("aspect-ratio"==b||"tvg-ratio"==b||"ratio"==b)b="aspectRatio";if("catchup-settings"==a||"catchup-settings"==a)a="catchupSettings";"catchup-days"==a&&(a="catchupDays");"x-tvg-url"==b&&(b="tvgSource");"mime-type"==b&&(b="mimeType");r.setField(g,b,"type"==b?xa.getType(a,c):a);return""})}q=a}}else{q=a.split("\n");b=[];a=0;for(n=q.length;a<n;){var m=a++,k=A.trim(q[m]),m=k.indexOf("://");if(0<m&&6>m){m="";try{m=A.urlDecode(0<=k.lastIndexOf("/")?function(a){a=k.lastIndexOf("/")+1;return w.substr(k,a,null)}(this):k)}catch(x){x instanceof t&&(x=x.val)}var l=m.lastIndexOf("."),p="";if(0<l){for(var p=e.trim(m.substring(l+1)),m=m.substring(0,l),l=0,u=-1,y=p.length;l<y&&(47<(u=w.cca(p,l))&&58>u||96<u&&123>u||95==u);)l++;0<l&&(p=p.substring(0,l))}b.push({source:k,fileName:m,extension:p})}}q=[];a=0;for(n=b.length;a<n;)m=a++,null!=b[m].extension&&"srt"==b[m].extension&&q.push(m);a=0;for(n=b.length;a<n;)if(l=a++,m=b[l],null!=m&&"srt"!=m.extension){u=new O("(.*)s(\\d+)\\s*e(\\d+)(.*)","i");y=null!=m.fileName&&0<m.fileName.length?A.replace(A.replace(m.fileName,"."," "),"_"," "):"";p="";0<y.length&&u.match(y)&&1<e.trim(u.matched(1)).length&&(p=u.matched(1),y="Season "+u.matched(2)+" Episode "+u.matched(3)+" "+u.matched(4));""==y&&(y=null!=m.fileName&&0<m.fileName.length?m.fileName:"#"+(null==l?"null":""+l));l=new Aa(d,m.source,-1,y);u={};l.description=p;0<p.length&&(u.size="medium");if(0<q.length)for(p=0;p<q.length;)if(y=q[p],++p,b[y].fileName==m.fileName){u.subtitles=b[y].source;break}0<r.fields(u).length&&l.updateExt(u);f.push(l)}return f}for(a=0;a<q.length;)if(n=q[a],++a,l="",n=A.trim(n),m=new O("^:\\s*([-+]?\\d+)\\s*((?:(.|[\r\n]))+)","gm"),m.match(n)&&null!=m.matched(1)){for(var n=-1,y=e.parseInt(m.matched(1)),z=m.matched(2).split("\r\n").join("\n").split("\r").join("\n").split("\n"),m=0<z.length?" "+A.trim(z[0]):"",E="",C="",F=[],p=[{}],u=0;u<z.length;){var B=z[u];++u;if("#"!=(B=A.trim(B)).charAt(0))0<B.lastIndexOf("://")&&(E=B),""==E&&F.push(B);else{var v=new O("#(\\w+)\\s*:\\s*(.+)","gi");if(v.match(B))switch(v.matched(1).toLowerCase()){case"extbg":p[0].background=v.matched(2);break;case"extsize":p[0].size=v.matched(2);break;case"extstyle":p[0].style=v.matched(2);break;case"extdesc":p[0].description=v.matched(2);break;case"extdrm":p[0].drm=v.matched(2);break;case"extctrl":p[0].ctrl=v.matched(2);break;case"extopt":p[0].opt=v.matched(2);break;case"extgrp":l=v.matched(2)}}}null!=g.size&&null==p[0].size&&(p[0].size=g.size);null==g.bg&&null==g.background||null!=p[0].background||(p[0].background=null!=g.bg?g.bg:g.background);B=u="";if(0<z.length){for(var z=C=!1,v=0,J=m.length;v<J;){var I=v++;'"'==m.charAt(I)&&(C=!C);"'"==m.charAt(I)&&(z=!z);if(!z&&!C&&","==m.charAt(I)){n=I;break}}C=null;z=new O("\\w+://.+$","");z.match(w.substr(m,n+1,null))&&(E=z.matched(0),C=z.matchedPos().pos);C=-1==n?"":e.trim(w.substr(m,n+1,C));z=new O("^([A-Za-z]{2,3})(:\\s+|[|]|[-])(.*)","");if(z.match(C)){try{B=e.trim(z.matched(3))}catch(x){x instanceof t&&(x=x.val)}try{u=z.matched(1)}catch(x){x instanceof t&&(x=x.val)}2==u.length&&0<aa.getCountryCode2to3(u).length||3==u.length&&0<aa.getCountryCode3to2(u).length||(u=B="")}}(null==E||""==E)&&0<F.length&&(E=F.pop());null!=g.type&&H.__instanceof(g.type,Za)&&(d=g.type);if(null!=E&&0<E.length){2<C.length&&(F=58==w.cca(C,2)?2:58==w.cca(C,3)?3:-1,0<F&&(z=aa.getCountryCode(C.substring(0,F),""),0<z.length&&(C=C.substring(F+1),p[0].country=z)));F=e.getURLFileExtension(E).toLowerCase();l=[new Aa(null!=F&&0<F.length&&0<=w.indexOf(b,F,0)?15:d,E,-1,C,l)];l[0].duration=y;l[0].description=null!=g.desc||null!=g.description?null!=g.desc?g.desc:g.description:"";l[0].aspectRatio=null!=g.ratio||null!=g.aspectRatio?null!=g.ratio?g.ratio:g.aspectRatio:"";l[0].tvgName=B;y=0;for(E=r.fields(g);y<E.length;)B=E[y],++y,F=A.trim(new O("\\W","g").replace(null==B?"null":""+B,"")).toLowerCase(),"timeout"==F?p[0].timeout=e.parseInt(r.field(g,B),null):"mimetype"==F&&(p[0].mimeType=A.trim(D.string(r.field(g,B)))),"catchup"==F?p[0].catchup=A.trim(D.string(r.field(g,B))):"catchupdays"==F?p[0].catchupDays=e.parseInt(r.field(g,B),null):"catchupsettings"==F&&(p[0].catchupSettings=A.trim(D.string(r.field(g,B))));y=new O("([\\w\\-]+)\\s*=\\s*((?:[\"][^\"]*.)|(?:['][^']*.)|(?:.(?![\\w-]+\\s*=))*)","gi");y.match(m.substring(0,n))&&y.map(m.substring(0,n),function(a,b){return function(d){var f=d.matched(1);d=e.trim(d.matched(2));1<d.length&&('"'==d.charAt(0)||"'"==d.charAt(0))&&d.charAt(0)==d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));switch(f.toLowerCase()){case"name":case"tvg-name":a[0].tvgName=d;break;case"description":case"desc":a[0].description=d;break;case"shift":case"tvg-shift":a[0].shift=e.parseInt(d);break;case"id":case"tvg-id":a[0].id=A.trim(d);break;case"logo":case"tvg-logo":Object.prototype.hasOwnProperty.call(g,"nologo")||20480<d.length?a[0].logo="":a[0].logo=d;break;case"ratio":case"aspect-ratio":case"tvg-ratio":a[0].aspectRatio=d;break;case"type":case"content-type":a[0].type=xa.getType(d,c);break;case"track":case"audio-track":a[0].audioTrack=d;break;case"group":case"tvg-group":case"group-title":a[0].group=d;break;case"mode3d":b[0].mode3d=d;break;case"subtitle":case"subtitles":b[0].subtitles=d;break;case"start":b[0].start=e.parseInt(d);break;case"end":b[0].end=e.parseInt(d);break;case"bitrate":case"bitrates":b[0].bitrates=d;break;case"player":b[0].player=d;break;case"timeout":b[0].timeout=e.parseInt(d,null);break;case"country":case"tvg-country":b[0].country=d;break;case"channelid":a[0].channelId=e.parseInt(d);break;case"retries":b[0].retries=e.parseInt(d,null);break;case"text":a[0].text=d;break;case"mime-type":b[0].mimeType=d;break;case"uhd":b[0].uhd=e.parseBool(d);break;case"user-agent":b[0].userAgent=d;break;case"cookies":b[0].cookies=d;break;case"player-settings":b[0].playerSettings=d;break;case"buffering":b[0].buffering=e.parseInt(d,null);break;case"catchup":b[0].catchup=d;break;case"catchup-source":b[0].catchupSource=d;break;case"catchup-settings":b[0].catchupSettings=d;break;case"catchup-days":b[0].catchupDays=e.parseInt(d,b[0].catchupDays);break;case"restrictions":b[0].restrictions=d;break;case"size":case"tile-size":b[0].size=d;break;case"bg":case"background":case"tile-background":b[0].background=d;break;case"title-color":b[0].titleColor=d;break;case"text-color":case"color":b[0].textColor=d}return""}}(l,p));null!=u&&0<u.length&&(null==l[0].group||0==A.trim(l[0].group).length)&&(l[0].group=u,2<=u.length&&3>=u.length&&null==p[0].country&&(p[0].country=u));0<r.fields(p[0]).length&&l[0].updateExt(p[0]);f.push(l[0])}}}return f};xa.getFile=function(a,b){var c="#EXTM3U\r\n";if(null!=a&&0<a.length){for(var d=[],f=0;f<a.length;){var g=a[f];++f;null!=g&&d.push(g)}f=0;for(g=d.length;f<g;){var q=f++,h;h=null!=d[q].get_ext()?d[q].get_ext():{};for(var n="#EXTINF:"+D.string(null!=d[q].duration&&0<=d[q].duration?d[q].duration:0)+" ",m="",k=0;k<b.length;){var l=b[k];++k;if(l.id==d[q].type){m=l.value;break}}m=[["type",m],["channelId",d[q].channelId],["name",d[q].tvgName],["group",d[q].group],["logo",d[q].logo],["audio-track",d[q].audioTrack],["shift",-24<=d[q].shift&&24>=d[q].shift&&0!=d[q].shift?d[q].shift:""],["aspect-ratio",d[q].aspectRatio],["description",d[q].description],["mode3d",h.mode3d],["subtitles",h.subtitles],["start",0<h.start?h.start:""],["end",0<h.end?h.end:""],["bitrate",h.bitrate],["player",h.player],["timeout",0<h.timeout?h.timeout:""],["tvg-country",h.country],["retries",h.retries],["buffering",h.buffering],["catchup",h.catchup],["catchup-source",h.catchupSource],["catchup-days",h.catchupDays],["catchup-settings",null!=h.catchupSettings&&0<h.catchupSettings.length?A.urlEncode(h.catchupSettings):""],["size",h.size],["background",h.background],["text",h.text],["title-color",h.titleColor],["text-color",h.textColor]];k="";for(l=0;l<m.length;){var p=m[l];++l;var r;r=null==p[0]?"":e.trim(p[0]);p=null==p[1]?"":A.trim(D.string(p[1]));0<r.length&&0<p.length&&(k+=r+'="'+A.replace(p,'"','\\"')+'" ')}n+=A.trim(k);m=null!=d[q].title&&0<d[q].title.length?d[q].title:"";if(""==m&&(null!=d[q].tvgName&&0<d[q].tvgName.length&&(m=d[q].tvgName),""==m&&0<d[q].channelId))for(k=0,l=X.getInstance().get_channels();k<l.length;)if(r=l[k],++k,null!=r&&1<r.length&&r[0]==d[q].channelId){c=1<r.length?r[1]:"";break}n+=", "+A.replace(m,",","\\,")+"\r\n";null!=h.style&&0<h.style.length&&(n+="#EXTSTYLE: "+D.string(h.style)+"\r\n");null!=h.drm&&0<h.drm.length&&(n+="#EXTDRM: "+D.string(h.drm)+"\r\n");null!=h.ctrl&&0<h.ctrl.length&&(n+="#EXTCTRL: "+D.string(h.ctrl)+"\r\n");null!=h.opt&&0<h.opt.length&&(n+="#EXTOPT: "+D.string(h.opt)+"\r\n");n+=d[q].source+"\r\n";c+=n}}return c};var bb=function(){};u["modules.services.parser.PLS"]=bb;bb.__name__=["modules","services","parser","PLS"];bb.getType=function(a,b){a=a.toLowerCase();for(var c=0;c<b.length;){var d=b[c];++c;if(a==d.value){if(null!=d.id)return d.id;break}}return 1};bb.parse=function(a,b,c,d,f,g){null==d&&(d=1);null==g&&(g={});f=[];var q=a.split("\r\n").join("\n").split("\n");a=[];for(var h=!1,n=0;n<q.length;){var m=q[n];++n;var k=A.trim(m);if(!h&&"[playlist]"==k.toLowerCase())h=!0;else if(h){var l=k.indexOf("=");if(0<l){for(var m=e.trim(k.substring(0,l)),k=e.trim(k.substring(l+1)),l=m.length-1,p=-1;0<l&&48<=(p=w.cca(m,l))&&57>=p;)l--;p=e.parseInt(m.substring(++l));m=m.substring(0,l).toLowerCase();if(0<=p){l=null==a[p]?{}:a[p];switch(m){case"file":l.source=k;if(null==l.title||""==l.title)l.title=k.substring(k.lastIndexOf("/")+1);break;case"title":l.title=k;break;case"image":l.image=k;break;case"length":l.duration=e.parseInt(k);break;case"type":l.type=bb.getType(k,c);break;case"aspectratio":l.aspectRatio=e.parseInt(k);break;case"audiotrack":l.audioTrack=k;break;case"description":l.description=k;break;case"style":l.style=k;break;case"bitrate":l.bitrate=k;break;case"player":l.player=k;break;case"background":l.background=k;break;case"size":l.size=k;break;case"ctrl":l.ctrl=k;break;case"drm":l.drm=k;break;case"subtitle":case"subtitles":l.subtitles=k;break;case"shift":l.shift=e.parseInt(k,0);break;case"start":l.start=e.parseInt(k,-1);break;case"end":l.end=e.parseInt(k,-1);break;case"timeout":l.timeout=e.parseInt(k,null);break;case"channelid":l.channelId=e.parseInt(k);break;case"retries":l.retries=e.parseInt(k);break;case"text":l.text=k;break;case"mime-type":l.mimeType=k;break;case"uhd":l.uhd=e.parseBool(k);break;case"user-agent":l.userAgent=k;break;case"cookies":l.cookies=k;break;case"player-settings":l.playerSettings=k;break;case"buffering":l.buffering=e.parseInt(k,null);break;case"catchup":l.catchup=k;break;case"catchup-source":l.catchupSource=k;break;case"catchup-settings":l.catchupSettings=k;break;case"catchup-days":l.catchupDays=e.parseInt(k,null);break;case"restrictions":l.restrictions=k}0<r.fields(l).length&&(a[p]=l)}else if(-1==p)switch(m){case"numberofentries":e.parseInt(k);break;case"version":e.parseInt(k)}}}}c=0;for(q=a.length;c<q;)if(h=c++,m=a[h],null!=m&&null!=m.source&&0<m.source.length){h=new Aa(null!=m.type?m.type:d,D.string(m.source),-1,null!=m.title&&0<D.string(m.title).length?m.title:"#"+(null==h?"null":""+h));h.aspectRatio=m.aspectRatio;h.audioTrack=m.audioTrack;h.description=m.description;h.logo=m.image;h.shift=null==m.shift?m.shift:0;h.channelId=null!=m.channelId?m.channelId:0;h.text=null!=m.text?m.text:"";n={background:m.background,size:m.size,style:m.style,ctrl:m.ctrl,drm:m.drm,subtitles:m.subtitles,start:-1==m.start?null:m.start,end:-1==m.end?null:m.end,retries:m.retries,mimeType:m.mimeType,uhd:m.uhd,userAgent:m.userAgent,cookies:m.cookies,playerSettings:m.playerSettings,buffering:m.buffering,catchup:m.catchup,catchupSource:m.catchupSource,catchupSettings:m.catchupSettings,catchupDays:m.catchupDays};null!=m.timeout&&H.__instanceof(m.timeout,Za)&&0<m.timeout&&(n.timeout=m.timeout);null!=g.size&&null==n.size&&(n.size=g.size);null==g.bg&&null==g.background||null!=n.background||(n.background=null!=g.bg?g.bg:g.background);null!=g.style&&null==n.style&&(n.style=g.style);m=0;for(k=r.fields(n);m<k.length;)l=k[m],++m,null==r.field(n,l)&&r.deleteField(n,l);0<r.fields(n).length&&h.updateExt(n);n=e.getURLFileExtension(h.source).toLowerCase();null!=n&&0<n.length&&0<=w.indexOf(b,n,0)?h.type=15:h.type=d;f.push(h)}return f};var $a=function(){};u["modules.services.parser.XSPF"]=$a;$a.__name__=["modules","services","parser","XSPF"];$a.getType=function(a,b){a=a.toLowerCase();for(var c=0;c<b.length;){var d=b[c];++c;if(a==d.value){if(null!=d.id)return d.id;break}}return 1};$a.parse=function(a,b,c,d,f,g){null==f&&(f=!1);null==d&&(d=1);null==g&&(g={});f=[];var q=null;try{q=k.parse(a)}catch(u){u instanceof t&&(u=u.val)}a=0;for(q=e.getXmlTags("playlist",q);a<q.length;){var h=q[a];++a;for(var n=0,h=e.getXmlTags("tracklist",h);n<h.length;){var m=h[n];++n;for(var x=0,m=e.getXmlTags("track",m);x<m.length;){var l=m[x];++x;var p=new Aa(d,"",-1),z=e.getArrayItem(e.getXmlTags("location",l)),y=e.getArrayItem(e.getXmlTags("title",l)),C=e.getArrayItem(e.getXmlTags("duration",l)),E=e.getArrayItem(e.getXmlTags("image",l)),B=e.getArrayItem(e.getXmlTags("album",l)),F=e.getArrayItem(e.getXmlTags("annotation",l)),H;if(H=null!=z){if(z.nodeType!=k.Document&&z.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+z.nodeType);H=null!=z.children[0]}if(H){H=p;if(z.nodeType!=k.Document&&z.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+z.nodeType);H.source=z.children[0].get_nodeValue()}else p.source="";if(z=null!=y){if(y.nodeType!=k.Document&&y.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+y.nodeType);z=null!=y.children[0]}if(z){z=p;if(y.nodeType!=k.Document&&y.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+y.nodeType);z.title=y.children[0].get_nodeValue()}else p.title="";if(y=null!=C){if(C.nodeType!=k.Document&&C.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+C.nodeType);y=null!=C.children[0]}y?p.duration=e.parseInt(function(a){if(C.nodeType!=k.Document&&C.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+C.nodeType);return C.children[0]}(this).get_nodeValue()):p.duration=0;if(y=null!=E){if(E.nodeType!=k.Document&&E.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+E.nodeType);y=null!=E.children[0]}if(y){y=p;if(E.nodeType!=k.Document&&E.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+E.nodeType);y.logo=E.children[0].get_nodeValue()}else p.logo="";if(E=null!=B){if(B.nodeType!=k.Document&&B.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+B.nodeType);E=null!=B.children[0]}if(E){E=p;if(B.nodeType!=k.Document&&B.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+B.nodeType);E.group=B.children[0].get_nodeValue()}else p.group="";if(B=null!=F){if(F.nodeType!=k.Document&&F.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+F.nodeType);B=null!=F.children[0]}if(B){B=p;if(F.nodeType!=k.Document&&F.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+F.nodeType);B.description=F.children[0].get_nodeValue()}else p.description=null!=g.desc||null!=g.description?null!=g.desc?g.desc:g.description:"";p.aspectRatio=null!=g.ratio||null!=g.aspectratio?null!=g.ratio?g.ratio:g.aspectratio:"";F=e.getURLFileExtension(p.source).toLowerCase();null!=F&&0<F.length&&0<=w.indexOf(b,F,0)?p.type=15:p.type=d;F={};null!=g.size&&null==F.size&&(F.size=g.size);null==g.bg&&null==g.background||null!=F.background||(F.background=null!=g.bg?g.bg:g.background);B=0;for(E=r.fields(g);B<E.length;)y=E[B],++B,z=A.trim(new O("\\W","g").replace(null==y?"null":""+y,"")).toLowerCase(),"timeout"==z?F.timeout=e.parseInt(r.field(g,y),null):"mimetype"==z&&(F.mimeType=A.trim(D.string(r.field(g,y)))),"catchup"==z?F.catchup=A.trim(D.string(r.field(g,y))):"catchupdays"==z?F.catchupDays=e.parseInt(r.field(g,y),null):"catchupsettings"==z&&(F.catchupSettings=A.trim(D.string(r.field(g,y))));B=0;for(l=e.getXmlTags("extension",l);B<l.length;){var v=l[B];++B;if(v.nodeType!=k.Element)throw new t("Bad node type, expected Element but found "+v.nodeType);switch(v.nodeName.toLowerCase()){case"audio":case"audiotrack":E=p;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.audioTrack=v.children[0].get_nodeValue();break;case"aspectratio":case"ratio":E=p;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.aspectRatio=v.children[0].get_nodeValue();break;case"shift":case"tvgshift":p.shift=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue());break;case"mode3d":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.mode3d=v.children[0].get_nodeValue();break;case"subtitle":case"subtitles":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.subtitles=v.children[0].get_nodeValue();break;case"bg":case"background":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.background=v.children[0].get_nodeValue();break;case"size":case"tile-size":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.size=v.children[0].get_nodeValue();break;case"description":case"desc":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.description=v.children[0].get_nodeValue();break;case"drm":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.drm=v.children[0].get_nodeValue();break;case"ctrl":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.ctrl=v.children[0].get_nodeValue();break;case"type":p.type=$a.getType(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue(),c);break;case"bitrate":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.bitrate=v.children[0].get_nodeValue();break;case"style":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.style=v.children[0].get_nodeValue();break;case"player":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.player=v.children[0].get_nodeValue();break;case"timeout":F.timeout=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue(),null);break;case"channelid":p.channelId=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue());break;case"retries":F.retries=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue(),null);break;case"text":E=p;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.text=v.children[0].get_nodeValue();break;case"mime-type":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.mimeType=v.children[0].get_nodeValue();break;case"uhd":F.uhd=e.parseBool(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue());break;case"user-agent":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.userAgent=v.children[0].get_nodeValue();break;case"cookies":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.cookies=v.children[0].get_nodeValue();break;case"player-settings":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.playerSettings=v.children[0].get_nodeValue();break;case"buffering":F.buffering=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue(),null);break;case"catchup":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.catchup=v.children[0].get_nodeValue();break;case"catchup-source":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.catchupSource=v.children[0].get_nodeValue();break;case"catchup-settings":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.catchupSettings=v.children[0].get_nodeValue();break;case"catchup-days":F.catchupDays=e.parseInt(function(a){if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);return v.children[0]}(this).get_nodeValue(),F.catchupDays);break;case"restrictions":E=F;if(v.nodeType!=k.Document&&v.nodeType!=k.Element)throw new t("Bad node type, expected Element or Document but found "+v.nodeType);E.restrictions=v.children[0].get_nodeValue()}}var I=w.substr(p.source,-4,null).toLowerCase();0<=function(a){a="."==I.charAt(0)?w.substr(I,1,null):I;return w.indexOf(b,a,0)}(this)?p.type=15:p.type=p.type;0<r.fields(F).length&&p.updateExt(F);f.push(p)}}}return f};var Ea=function(){};u["modules.services.platforms.interfaces.TVServiceInterface"]=Ea;Ea.__name__=["modules","services","platforms","interfaces","TVServiceInterface"];Ea.prototype={getShowKey:null,getCheckKey:null,getConnect:null,getLaunch:null,getDisconnect:null,__class__:Ea};var za=function(a){z.call(this,a);this._targetPort=8977;this._device=null!=a.device?a.device:null;this.defineEventHandlers()};u["modules.services.platforms.androidtv.AndroidTVService"]=za;za.__name__=["modules","services","platforms","androidtv","AndroidTVService"];za.__interfaces__=[Ea];za.getServiceCallHandler=function(a){if(null!=a.stage&&1!=a.stage.complete){var b=a.stage.event,c=a.dispatcher,d=a.event,f;f=null!=a.delay?a.delay:0;var e;e=null==a.max||0>=a.max?10240:a.max;switch(a.stage.step){case 0:null!=a.xhr&&4==a.xhr.readyState&&(a.stage.complete=!0,window.clearTimeout(a.timeoutId),d.data={success:!0,state:1,xhr:a.xhr,status:a.xhr.status},c.dispatchEvent(d,f),a.xhr=null);break;case 1:if(null!=b){var k;k=null!=b.loaded?b.loaded:b.position;k>e&&(a.stage.complete=!0,a.xhr.abort(),d.data={success:!1,state:2,xhr:a.xhr,status:a.xhr.status,loaded:k,total:null!=b.total?b.total:b.totalSize},c.dispatchEvent(d,f),window.clearTimeout(a.timeoutId),a.xhr=null)}break;case 2:a.stage.complete=!0,null!=a.xhr&&null!=a.xhr.abort&&(a.xhr.abort(),d.data={success:!0,state:3,status:-1},c.dispatchEvent(d),a.xhr=null)}}};za.__super__=z;za.prototype=N(z.prototype,{_targetPort:null,_device:null,device:null,pairing:null,defineEventHandlers:function(){this.addEventListener("2D",x(this,this.getConnectHandler),this);this.addEventListener("33",x(this,this.getCheckStateHandler),this);this.addEventListener("34",x(this,this.getLaunchHandler),this)},get_device:function(){return this._device},get_pairing:function(){return!1},getShowKey:function(a,b){b.data={success:!0,result:!0};a.dispatchEvent(b)},getServiceCall:function(a,b,c,d,f,e){null==e&&(e=0);null==f&&(f=5e3);var k;k="send"==A.trim(null==a?"null":""+a).toLowerCase()?"POST":"GET";a="http://"+this._device.ip+":"+this._targetPort+"/"+a;var h={xhr:ma.createXMLHttpRequest(),type:k,source:a,dispatcher:c,event:d,timeout:f,stage:{step:-1,event:null,complete:!1},delay:e};h.xhr.onreadystatechange=function(a){h.stage.event=a;h.stage.step=0;za.getServiceCallHandler(h)};h.xhr.onprogress=function(a){h.stage.event=a;h.stage.step=1;za.getServiceCallHandler(h)};h.timeoutId=window.setTimeout(function(){h.stage.event=null;h.stage.step=2;za.getServiceCallHandler(h)},f);try{h.xhr.open(k,a,!0),h.xhr.setRequestHeader("Content-Type","text/xml; charset=utf-8"),h.xhr.send(""==b?null:b)}catch(n){n instanceof t&&(n=n.val)}},getCheckKey:function(a,b,c){e.getDispatch(a,b,null,{success:!0,result:!0})},getConnect:function(a,b){this.getServiceCall("connect",null,this,new L("2D",!1,!1,{dispatcher:a,event:b}))},getLaunch:function(a,b,c){this.getServiceCall("connect",null,this,new L("33",!1,!1,{dispatcher:a,event:b,content:c}))},getDisconnect:function(a,b){e.getDispatch(a,b)},getConnectHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.xhr:null;var c;c=null!=b&&null!=b.status?e.parseInt(b.status,-1):-1;b=null!=b&&null!=b.responseText?e.decodeJSON(b.responseText,null):null;b=null!=b&&1==b.success&&1==b.connected;e.getEventResponse(a,{success:!0,result:200==c&&b})}},getCheckStateHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.xhr:null;var c;c=null!=b&&null!=b.status?e.parseInt(b.status,-1):-1;b=null!=b&&null!=b.responseText?e.decodeJSON(b.responseText,null):null;b=null!=b&&1==b.success&&1==b.connected;if(200==c&&b){this.getServiceCall("send",a.params.content,this,new L("34",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,content:a.params.content}));return}}e.getEventResponse(a,{success:!0,result:!1,error:6})},getLaunchHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,result:!0})},__class__:za,__properties__:{get_pairing:"get_pairing",get_device:"get_device"}});var qa=function(a){this._currentKeepAliveXHR=null;z.call(this,null==a?a={}:a);this._keetConnectionId=-1;this._lostTimestamp=this._currentConnectionId=0;this._device=a.device;this._appId="SSIPTV";this._connectDeviceId=D.string(Math.floor(1e4*Math.random()));this._connectVendorId="VenderMe";this._connectDeviceName="IE-Client";this._connectGroupId="feiGroup";this._connectProductId="SMARTDev";this._currentKeepAliveXHR=null;this._headers=["SLDeviceID: "+this._connectDeviceId,"VendorID: "+this._connectVendorId,"DeviceName: "+this._connectDeviceName,"GroupID: "+this._connectGroupId,"ProductID: "+this._connectProductId];this._messageId=this._connected=0;this.defineEventHandlers()};u["modules.services.platforms.maple.MapleServices"]=qa;qa.__name__=["modules","services","platforms","maple","MapleServices"];qa.__interfaces__=[Ea];qa.getCallHandler=function(a){if(null!=a.stage&&1!=a.stage.complete){var b=a.stage.event,c=a.dispatcher,d=a.event,e;e=null!=a.delay?a.delay:0;var g;g=null==a.max||0>=a.max?10240:a.max;switch(a.stage.step){case 0:null!=a.xhr&&4==a.xhr.readyState&&(a.stage.complete=!0,window.clearTimeout(a.timeoutId),d.data={success:!0,state:1,xhr:a.xhr},c.dispatchEvent(d,e),a.xhr=null);break;case 1:if(null!=b){var k;k=null!=b.loaded?b.loaded:b.position;k>g&&(a.stage.complete=!0,a.xhr.abort(),d.data={success:!1,state:2,xhr:a.xhr,loaded:k,total:null!=b.total?b.total:b.totalSize},c.dispatchEvent(d,e),window.clearTimeout(a.timeoutId),a.xhr=null)}break;case 2:a.stage.complete=!0;null!=a.xhr&&null!=a.xhr.abort&&(a.xhr.abort(),d.data={success:!1,state:3},c.dispatchEvent(d),a.xhr=null);break;case 3:null!=a.xhr&&(d.data={success:!1,state:3},c.dispatchEvent(d),a.xhr=null)}}};qa.__super__=z;qa.prototype=N(z.prototype,{_device:null,_connectDeviceId:null,_connectVendorId:null,_connectDeviceName:null,_connectGroupId:null,_connectProductId:null,_isAlive:null,_lostTimestamp:null,_currentKeepAliveXHR:null,_headers:null,_appId:null,_connected:null,_messageId:null,_keetConnectionId:null,_currentConnectionId:null,device:null,pairing:null,defineEventHandlers:function(){this.addEventListener("26",x(this,this.getServiceCallHandler),this);this.addEventListener("28",x(this,this.getAvailabilityHandler),this);this.addEventListener("2E",x(this,this.getKeepAliveHandler),this);this.addEventListener("32",x(this,this.getAppStateHandler),this);this.addEventListener("35",x(this,this.getSendHandler),this)},get_device:function(){return this._device},get_pairing:function(){return!1},getServiceCall:function(a,b,c,d,e,g,k,h){null==h&&(h="POST");null==k&&(k=0);null==g&&(g=5e3);a="http://"+this._device.ip+"/ws/app/"+this._appId+a;var n={xhr:ma.createXMLHttpRequest(),type:h,source:a,dispatcher:d,event:e,timeout:g,stage:{step:-1,event:null,complete:!1},delay:k};n.xhr.onreadystatechange=function(a){n.stage.event=a;n.stage.step=0;qa.getCallHandler(n)};n.xhr.onprogress=function(a){n.stage.event=a;n.stage.step=1;qa.getCallHandler(n)};n.xhr.onabort=function(a){n.stage.event=a;n.stage.step=3;qa.getCallHandler(n)};n.timeoutId=window.setTimeout(function(){n.stage.event=null;n.stage.step=2;qa.getCallHandler(n)},g);n.xhr.open(h,a,!0);for(d=0;d<c.length;)e=c[d],++d,g=e.indexOf(":"),e=0<g?[e.substring(0,g),e.substring(g+1)]:[],0<e.length&&n.xhr.setRequestHeader(A.trim(e[0]),A.trim(1<e.length?e[1]:""));n.xhr.send(""==b?null:b);return n.xhr},getKeepAlive:function(a,b,c){var d=new L("2E");d.params={event:b,dispatcher:a,data:c};this._currentKeepAliveXHR=this.getServiceCall("/queue/device/"+this._connectDeviceId+"?t="+e.get_timestamp(),"",this._headers.slice(0,1),this,d,6e4,0,"GET")},getQuery:function(a,b,c,d){new L("26").params={target:a,data:b,dispatcher:c,event:d};this.getServiceCall("/connect","",this._headers,this,d)},getShowKey:function(a,b){e.getDispatch(a,b,null,{success:!0,result:!0})},getCheckKey:function(a,b,c){e.getDispatch(a,b,null,{success:!0,result:!0})},getConnect:function(a,b){this._isAlive?e.getDispatch(a,b,null,{success:!0,result:!0}):this.getServiceCall("/connect","",this._headers,this,new L("28",!1,!1,{dispatcher:a,event:b}))},getDisconnect:function(a,b){this._currentConnectionId++;this._isAlive=!1;e.getDispatch(a,b,{success:!0})},getLaunch:function(a,b,c){},getServiceCallHandler:function(a){e.getCheckEventResponse(a)},getAvailabilityHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.xhr:null;if(this._isAlive=null!=b&&null!=b.status?200==b.status:!1)this._keetConnectionId=this._currentConnectionId,this.getKeepAlive(this,new L("2E"));e.getEventResponse(a,{success:!0,available:this._isAlive})}},getKeepAliveHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.xhr:null;a=null!=b&&null!=b.status?b.status:-1;var c=!0;if(200==a){b=e.decodeJSON(null!=b?b.responseText:null);var d;d=null!=b&&null!=b.widgetInfo&&null!=b.widgetInfo.ID?D.string(b.widgetInfo.ID).toLowerCase():"";d!=this._appId.toLowerCase()?c=!1:d==this._appId.toLowerCase()&&"trrminated"!=D.string(b.widgetInfo.Status).toLowerCase()&&(c=!1)}408==a&&this._keetConnectionId==this._currentConnectionId&&(this._isAlive=!0,c=!1,this.getKeepAlive(this,new L("2E")));c&&(this._currentConnectionId++,this._lostTimestamp=e.get_timestamp())}},getAppStateHandler:function(a){if(e.getCheckEventResponse(a))if(1==a.data.success&&1==a.data.available){var b=new L("35");b.params=a.params;this._isAlive=!1;this._currentConnectionId++;this.getServiceCall("/queue",a.params.content,this._headers,this,b,5e3)}else e.getEventResponse(a,{success:!1,error:6})},getSendHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.xhr:null;e.getEventResponse(a,{success:null!=b&&200==b.status})}},__class__:qa,__properties__:{get_pairing:"get_pairing",get_device:"get_device"}});var Y=function(a){z.call(this,null==a?a={}:a);this._localPort=this._targetPort=8080;this._appTitle="SS IPTV";this._appId="";this._delay=200;this._timeout=2e3;this._checks=50;this._device=null!=a.device?a.device:null;this._state=Y.NETCAST_STATE_NONE;this._queue=new Ha;this._launching=!1;this._pairing=!0;this.defineEventHandlers()};u["modules.services.platforms.netcast.NetCastServices"]=Y;Y.__name__=["modules","services","platforms","netcast","NetCastServices"];Y.__interfaces__=[Ea];Y.NETCAST_STATE_NONE=null;Y.NETCAST_STATE_CONNECTING=null;Y.NETCAST_STATE_READY=null;Y.getServiceCallHandler=function(a){if(null!=a.stage&&1!=a.stage.complete){var b=a.stage.event,c=a.dispatcher,d=a.event,e;e=null!=a.delay?a.delay:0;var g;g=null==a.max||0>=a.max?10240:a.max;switch(a.stage.step){case 0:null!=a.xhr&&4==a.xhr.readyState&&(a.stage.complete=!0,window.clearTimeout(a.timeoutId),d.data={success:!0,state:1,xhr:a.xhr,status:a.xhr.status},c.dispatchEvent(d,e),a.xhr=null);break;case 1:if(null!=b){var k;k=null!=b.loaded?b.loaded:b.position;k>g&&(a.stage.complete=!0,a.xhr.abort(),d.data={success:!1,state:2,xhr:a.xhr,status:a.xhr.status,loaded:k,total:null!=b.total?b.total:b.totalSize},c.dispatchEvent(d,e),window.clearTimeout(a.timeoutId),a.xhr=null)}break;case 2:a.stage.complete=!0,null!=a.xhr&&null!=a.xhr.abort&&(a.xhr.abort(),d.data={success:!0,state:3,status:-1},c.dispatchEvent(d),a.xhr=null)}}};Y.__super__=z;Y.prototype=N(z.prototype,{_support:null,_appTitle:null,_appId:null,_delay:null,_timeout:null,_checks:null,_state:null,_targetPort:null,_localPort:null,_device:null,_pairing:null,_queue:null,_launching:null,state:null,device:null,pairing:null,defineEventHandlers:function(){this.addEventListener("29",x(this,this.getShowKeyHandler),this);this.addEventListener("2F",x(this,this.getLoadKeyHandler),this);this.addEventListener("30",x(this,this.getCheckKeyHandler),this);this.addEventListener("2C",x(this,this.getConnectionHandler),this);this.addEventListener("2D",x(this,this.getConnectHandler),this);this.addEventListener("27",x(this,this.getHelloHandler),this);this.addEventListener("31",x(this,this.getAppIdHandler),this);this.addEventListener("32",x(this,this.getAppStateHandler),this);this.addEventListener("33",x(this,this.getCheckStateHandler),this);this.addEventListener("34",x(this,this.getLaunchHandler),this);this.addEventListener("35",x(this,this.getSendHandler),this);this.addEventListener("36",x(this,this.getCloseHandler),this);this.addEventListener("37",x(this,this.getDisconnectHandler),this)},get_state:function(){return this._state},get_device:function(){return this._device},get_pairing:function(){return this._pairing},getServiceCall:function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=5e3);var k;k=null==b||""==b&&0!=a.toLowerCase().indexOf("apptoapp/command/")?"GET":"POST";var h="http://"+this._device.ip+":"+this._targetPort+"/udap/api/"+a,n={xhr:ma.createXMLHttpRequest(),type:k,source:h,dispatcher:c,event:d,timeout:e,stage:{step:-1,event:null,complete:!1},delay:g};n.xhr.onreadystatechange=function(a){n.stage.event=a;n.stage.step=0;Y.getServiceCallHandler(n)};n.xhr.onprogress=function(a){n.stage.event=a;n.stage.step=1;Y.getServiceCallHandler(n)};n.timeoutId=window.setTimeout(function(){n.stage.event=null;n.stage.step=2;Y.getServiceCallHandler(n)},e);try{n.xhr.open(k,h,!0),n.xhr.setRequestHeader("Content-Type",-1!=a.indexOf("pairing")?"text/xml; charset=utf-8":"text/html"),n.xhr.send(""==b?null:b)}catch(m){m instanceof t&&(m=m.val)}},getShowKey:function(a,b){this.getServiceCall("pairing",'<?xml version="1.0" encoding="utf-8"?><envelope><api type="pairing"><name>showKey</name></api></envelope>',this,new L("29",!1,!1,{dispatcher:a,event:b}),this._timeout,this._delay)},getCheckKey:function(a,b,c){this.getDisconnect(this,new L("2F",!1,!1,{dispatcher:a,event:b,key:c}))},getInteranlConnect:function(a,b,c){null==c&&(c=!0);null!=this._device&&null!=this._device.key&&0<this._device.key.length?this._queue.getAddEvent("2C",a,b)||this.getServiceCall("data?target=appnum_get&type=1","",this._queue,this._queue.getWrap(this,new L("2C",!1,!1,{dispatcher:a,event:b,ip:this._device.ip,disconnect:c})),2e3,0):e.getDispatch(a,b,null,{success:!1,error:null!=this._device?10:6})},getConnect:function(a,b){this.getInteranlConnect(a,b,!0)},getLaunch:function(a,b,c){this._launching=!0;this.getInteranlConnect(this,new L("27",!1,!1,{dispatcher:a,event:b,content:c,disconnect:!0}),!1)},getSendContent:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);this.getServiceCall("apptoapp/command/"+encodeURIComponent(this._appId)+"/send",c,this,new L("35",!1,!1,{dispatcher:a,event:b,content:c,disconnect:e}),this._timeout,this._delay+d)},getDisconnect:function(a,b){var c=new L("37");c.params={dispatcher:a,event:b};this.getServiceCall("pairing",'<?xml version="1.0" encoding="utf-8"?><envelope><api type="pairing"><name>byebye</name><port>'+this._localPort+"</port></api></envelope>",this,c,this._timeout,this._delay)},getCloseConnection:function(a,b,c){e.getCheckEventResponse(a)&&(c=a.params.event,!this._launching&&a.params.disconnect?this.getDisconnect(this,new L("36",!1,!1,{event:c,dispatcher:a.params.dispatcher,data:b})):e.getEventResponse(a,b))},getShowKeyHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,result:null!=a.data&&3!=a.data.state})},getLoadKeyHandler:function(a){e.getCheckEventResponse(a)&&(this._device.key=a.params.key,this.getConnect(this,new L("30",!1,!1,e.set(a.params,{prev:this._device.key}))))},getCheckKeyHandler:function(a){e.getCheckEventResponse(a)&&(this._device.key=null!=a.params.prev?a.params.prev:"",e.getEventResponse(a,e.set(a.data,{key:a.params.key,prev:a.params.prev})))},getConnectionHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.status?a.data.status:-1;this._state=200==b?Y.NETCAST_STATE_READY:Y.NETCAST_STATE_NONE;200==b?this.getCloseConnection(a,{success:!0,result:!0},"getConnectionHandler"):0<b?this.getServiceCall("pairing",'<?xml version="1.0" encoding="utf-8"?><envelope><api type="pairing"><name>hello</name><value>'+this._device.key+"</value><port>"+this._localPort+"</port></api></envelope>",this,new L("2D",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,ip:this._device.ip,disconnect:a.params.disconnect}),this._timeout,this._delay):e.getEventResponse(a,{success:!0,error:6})}},getConnectHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data&&null!=a.data.status?a.data.status:-1;this._state=200==b?Y.NETCAST_STATE_READY:Y.NETCAST_STATE_NONE;200==b?this.getCloseConnection(a,{success:!0,result:!0},"getConnectionHandler"):e.getEventResponse(a,{success:!0,error:401==b?10:6})}},getHelloHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.dispatcher,c=a.params.event,d=a.params.content;null!=a.data&&1==a.data.success&&1==a.data.result?null==this._appId||""==this._appId?this.getServiceCall("apptoapp/data/"+encodeURIComponent(this._appTitle),"",this,new L("31",!1,!1,{dispatcher:b,event:c,content:d,disconnect:a.params.disconnect}),this._timeout,this._delay):this.getServiceCall("apptoapp/data/"+encodeURIComponent(this._appId)+"/status","",this,new L("32",!1,!1,{dispatcher:b,event:c,content:d,disconnect:a.params.disconnect,iterator:0}),this._timeout,this._delay):(this._launching=!1,e.getEventResponse(a,{success:!0,result:!1,error:6}))}},getAppStateHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.dispatcher,c=a.params.event,d=a.params.content;mb(a.params);if(null!=a.data&&200==a.data.status&&null!=a.data.xhr&&null!=a.data.xhr.responseText&&0<a.data.xhr.responseText.length){var f=D.string(a.data.xhr.responseText).toLowerCase();"run"==f?this.getSendContent(b,c,d,1e3,a.params.disconnect):"load"==f?(f=new L("33"),f.params={dispatcher:b,event:c,content:d,disconnect:a.params.disconnect,iterator:0},this.dispatchEvent(f,this._delay)):(f=new L("33"),f.params={dispatcher:b,event:c,content:d,disconnect:a.params.disconnect,iterator:0},this.getServiceCall("apptoapp/command/"+encodeURIComponent(this._appId)+"/run","",this,f,this._timeout,this._delay))}else this._launching=!1,this.getCloseConnection(a,{success:!0,result:!1,error:2},"getAppStateHandler")}},getCheckStateHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null==a.params.iterator?0:mb(a.params);if(null!=a.data&&200==a.data.status&&null!=a.data.xhr&&null!=a.data.xhr.responseText){var c=D.string(a.data.xhr.responseText).toLowerCase();"run"!=c&&b<this._checks?this.getServiceCall("apptoapp/data/"+encodeURIComponent(this._appId)+"/status","",this,new L("33",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,content:a.params.content,disconnect:a.params.disconnect,iterator:b+1}),this._timeout,this._delay+800):"run"==c?this.getSendContent(a.params.dispatcher,a.params.event,a.params.content,2e3):(this._launching=!1,e.getDispatch(a.params.dispatcher,a.params.event,null,{success:!0,result:!1,error:8}))}else this._launching=!1,this.getCloseConnection(a,{success:!0,result:!1,error:8},"getCheckStateHandler")}},getLaunchHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.data)},getAppIdHandler:function(a){e.getCheckEventResponse(a)&&(null!=a.data&&200==a.data.status&&null!=a.data.xhr&&null!=a.data.xhr.responseText&&0<a.data.xhr.responseText.length?(this._appId=a.data.xhr.responseText,this.getServiceCall("apptoapp/data/"+encodeURIComponent(this._appId)+"/status","",this,new L("32",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,content:a.params.content,disconnect:a.params.disconnect,iterator:0}))):(this._launching=!1,e.getEventResponse(a,{success:!0,result:!1,error:7})))},getSendHandler:function(a){this._launching=!1;e.getCheckEventResponse(a)&&(a.params.disconnect?this.getCloseConnection(a,{success:!0,result:!0},"getSendHandler"):e.getEventResponse(a,{success:!0,result:!0}))},getCloseHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,a.params.data)},getDisconnectHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,null==a.params.data?{success:!0,result:!0}:a.params.data)},__class__:Y,__properties__:{get_pairing:"get_pairing",get_device:"get_device",get_state:"get_state"}});var ya=function(a){z.call(this,null==a?a={}:a);this._targetPort=8001;this._device=null!=a.device?a.device:null;this._currentInfo=null;this._clientName="bridge"+e.get_timestamp();this._channel="com.ssiptv.app";this._appId="packssiptv.SSIPTV";this._clients=[];this._requests=[];this._requestId=1;this._requestTimer=new la({delay:500,repeats:0});this._source="ws://"+this._device.ip+":"+this._targetPort+"/api/v2/channels/"+this._channel+"?name="+encodeURIComponent(this._clientName);this._socket=new va;this.defineEventHandlers()};u["modules.services.platforms.tizen.TizenSevices"]=ya;ya.__name__=["modules","services","platforms","tizen","TizenSevices"];ya.__interfaces__=[Ea];ya.getServiceCallHandler=function(a){if(null!=a.stage&&1!=a.stage.complete){var b=a.stage.event,c=a.dispatcher,d=a.event,e;e=null!=a.delay?a.delay:0;var g;g=null==a.max||0>=a.max?10240:a.max;switch(a.stage.step){case 0:null!=a.xhr&&4==a.xhr.readyState&&(a.stage.complete=!0,window.clearTimeout(a.timeoutId),d.data={success:!0,state:1,xhr:a.xhr,status:a.xhr.status},c.dispatchEvent(d,e),a.xhr=null);break;case 1:if(null!=b){var k;k=null!=b.loaded?b.loaded:b.position;k>g&&(a.stage.complete=!0,a.xhr.abort(),d.data={success:!1,state:2,xhr:a.xhr,status:a.xhr.status,loaded:k,total:null!=b.total?b.total:b.totalSize},c.dispatchEvent(d,e),window.clearTimeout(a.timeoutId),a.xhr=null)}break;case 2:a.stage.complete=!0,null!=a.xhr&&null!=a.xhr.abort&&(a.xhr.abort(),d.data={success:!0,state:3,status:-1},c.dispatchEvent(d),a.xhr=null)}}};ya.__super__=z;ya.prototype=N(z.prototype,{_device:null,_targetPort:null,_currentInfo:null,_socket:null,_clientName:null,_channel:null,_appId:null,_source:null,_clients:null,_requestId:null,_requests:null,_requestTimer:null,device:null,pairing:null,defineEventHandlers:function(){this.addEventListener("27",x(this,this.getHelloHandler),this);this.addEventListener("2D",x(this,this.getConnectHandler),this);this.addEventListener("2C",x(this,this.getConnectionHandler),this);this.addEventListener("32",x(this,this.getAppStateHandler),this);this.addEventListener("33",x(this,this.getCheckStateHandler),this);this.addEventListener("35",x(this,this.getSendHandler),this);this._socket.addEventListener("7",x(this,this.getSocketMessageHandler),this);this._socket.addEventListener("24",x(this,this.getOpenWebSocketHandler),this);this._socket.addEventListener("25",x(this,this.getCloseWebSocketHandler),this);this._requestTimer.addEventListener("53",x(this,this.requestTimerTickHandler),this)},get_device:function(){return this._device},get_pairing:function(){return!1},getServiceCall:function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=5e3);var k;k=null!=b&&""!=b?"POST":"GET";a="http://"+this._device.ip+":"+this._targetPort+"/api/v2/"+a;var h={xhr:ma.createXMLHttpRequest(),type:k,source:a,dispatcher:c,event:d,timeout:e,stage:{step:-1,event:null,complete:!1},delay:g};h.xhr.onreadystatechange=function(a){h.stage.event=a;h.stage.step=0;ya.getServiceCallHandler(h)};h.xhr.onprogress=function(a){h.stage.event=a;h.stage.step=1;ya.getServiceCallHandler(h)};h.timeoutId=window.setTimeout(function(){h.stage.event=null;h.stage.step=2;ya.getServiceCallHandler(h)},e);h.xhr.open(k,a,!0);h.xhr.setRequestHeader("Content-Type","text/xml; charset=utf-8");h.xhr.send(""==b||null==b?null:b)},getSendTo:function(a,b){null==b&&(b="");b=null==b||""==b?"broadcast":null==b?"null":""+b;var c=null!=this._socket&&2==this._socket.get_state();c&&this._socket.send(e.encodeJSON({method:"ms.channel.emit",params:{id:Math.floor((new Date).getTime()),event:"com.ssiptv.smartview",to:b,data:e.encodeJSON(a)}}));return c},getClientRequest:function(a,b,c,d,f){null==f&&(f=3e3);null==c&&(c="");var g={id:this._requestId++,type:"request",data:d};null!=d&&null!=this._socket&&2==this._socket.get_state()&&this.getSendTo(g,c)?(this._requests.push(e.set(g,{dispatcher:a,event:b,timestamp:e.get_timestamp(),timeout:f},!0)),this._requestTimer._active||this._requestTimer.start()):(b.data={success:!1},a.dispatchEvent(b,f))},getShowKey:function(a,b){e.getDispatch(a,b,null,{success:!0,result:!0})},getCheckKey:function(a,b,c){e.getDispatch(a,b,null,{success:!0,result:!0})},getConnect:function(a,b){this.getServiceCall("",null,this,new L("27",!1,!1,{dispatcher:a,event:b}))},getLaunch:function(a,b,c){this.getConnect(this,new L("2D",!1,!1,{dispatcher:a,event:b,content:c}))},getDisconnect:function(a,b){},getHelloHandler:function(a){e.getCheckEventResponse(a)&&(this._currentInfo=null!=a.data&&null!=a.data.xhr&&null!=a.data.xhr.responseText?e.decodeJSON(a.data.xhr.responseText,null):null,null!=this._currentInfo?e.getEventResponse(a,{success:!0,result:null!=a.data&&3!=a.data.state}):e.getEventResponse(a,{success:!1,error:6}))},getConnectHandler:function(a){e.getCheckEventResponse(a)&&(a.data.success&&a.data.result?this._socket.getOpen(this,new L("2C",!1,!1,a.params),this._source):e.getEventResponse(a,{success:!1,error:6}))},getConnectionHandler:function(a){e.getCheckEventResponse(a)&&(a.data.created||a.data.ready?this.getServiceCall("applications/"+this._appId,"{}",this,new L("32",!1,!1,a.params)):e.getEventResponse(a,{success:!1,error:6}))},getAppStateHandler:function(a){this.getClientRequest(this,new L("33",!1,!1,e.set(a.params,{iter:0})),"",{action:"get_tv"},3e3)},getCheckStateHandler:function(a){null!=a.data&&(null!=a.data.response&&"ready"==a.data.response.state?this.getClientRequest(this,new L("35",!1,!1,a.params),a.data.clientId,{action:"send_tv",content:a.params.content},3e3):((a.params=e.set(a.params,{iter:0},!1)).params.iter++,this.getClientRequest(this,new L("33",!1,!1,a.params),"",{action:"get_tv"},3e3)))},getSendHandler:function(a){},getSocketMessageHandler:function(a){var b=a.data;if(null!=b&&"com.ssiptv.smartview"==(null!=b.event?D.string(b.event):"")&&(a=b.from,b=e.decodeJSON(b.data,{}),"response"==b.type))for(var c=0,d=this._requests.length;c<d;){var f=c++;if(this._requests[f].id==b.id){e.getDispatch(this._requests[f].dispatcher,this._requests[f].event,null,{clientId:a,response:b.data});this._requests.splice(f,1);break}}},getOpenWebSocketHandler:function(a){},getCloseWebSocketHandler:function(a){},requestTimerTickHandler:function(a){if(0<this._requests.length){a=0;for(var b=e.get_timestamp();a<this._requests.length;){var c=e.parseInt(this._requests[a].timestamp,0);0==c||b-c>=Math.floor(this._requests[a].timeout/1e3)?(c=this._requests[a],this._requests.splice(a,1),e.getDispatch(c.dispatcher,c.event,null,{success:!1,timeout:!0})):a++}}else this._requestTimer.abort()},__class__:ya,__properties__:{get_pairing:"get_pairing",get_device:"get_device"}});var ba=function(a){z.call(this,null==a?a={}:a);this._support=null!=WebSocket;this._device=null!=a.device?a.device:null;this._source=null!=this._device?"ws://"+this._device.ip+":3000/":"";this._queue=new Ha;this._state=ba.WEBOSTV_STATE_NONE;this._socket=new va({source:this._source});this._paired=this._hello=!1;this._clientKey="";this._publicAPI=!0;this._sessionId="";this._timeout=3e3;this._permissions=["LAUNCH","LAUNCH_WEBAPP","APP_TO_APP"];this._manifest={manifestVersion:1,permissions:this._permissions};this._appId="com.ssiptv.app";this.defineEventHandlers()};u["modules.services.platforms.webos.WebOSServices"]=ba;ba.__name__=["modules","services","platforms","webos","WebOSServices"];ba.__interfaces__=[Ea];ba.WEBOSTV_STATE_NONE=null;ba.WEBOSTV_STATE_CONNECTING=null;ba.WEBOSTV_STATE_READY=null;ba.__super__=z;ba.prototype=N(z.prototype,{_support:null,_hello:null,_paired:null,_permissions:null,_manifest:null,_appId:null,_timeout:null,_queue:null,_pairingTypes:null,_deviceOS:null,_osRelease:null,_osVersion:null,_deviceType:null,_deviceUUID:null,_clientKey:null,_publicAPI:null,_sessionId:null,_state:null,_source:null,_socket:null,_device:null,device:null,pairing:null,defineEventHandlers:function(){this.addEventListener("26",x(this,this.getServiceCallHandler),this);this.addEventListener("27",x(this,this.getHelloHandler),this);this.addEventListener("33",x(this,this.getCheckStateHandler),this);this.addEventListener("2D",x(this,this.getConnectHandler),this);this.addEventListener("2A",x(this,this.getRegisterHandler),this);this.addEventListener("34",x(this,this.getLaunchHandler),this)},get_device:function(){return this._device},get_pairing:function(){return!this._publicAPI},getOpenSocket:function(a,b){this._socket.getOpen(this,new L("26",!1,!1,{dispatcher:a,event:b}),this._source)},getShowKey:function(a,b){e.getDispatch(a,b,null,{success:!0,result:!0})},getCheckKey:function(a,b,c){e.getDispatch(a,b,null,{success:!0,result:!0})},getConnect:function(a,b){this._queue.getAddEvent("2D",a,b)||this.getOpenSocket(this._queue,this._queue.getWrap(this,new L("2D",!1,!1,{dispatcher:a,event:b})))},getLaunch:function(a,b,c){this._queue.getAddEvent("33",a,b)||this.getConnect(this._queue,this._queue.getWrap(this,new L("33",!1,!1,{dispatcher:a,event:b,content:c})))},getDisconnect:function(a,b){this._hello=!1;this.dispatchEvent(b)},getServiceCallHandler:function(a){if(e.getCheckEventResponse(a))if(null!=a.data&&1==a.data.created&&(this._hello=!1),this._hello)e.getEventResponse(a,{success:!0,available:2==this._socket.get_state()});else{var b=new L("27");b.params={dispatcher:a.params.dispatcher,event:a.params.event};this._socket.getJSONMessage(this,b,{type:"hello"},this._timeout,{type:"hello"})}},getHelloHandler:function(a){if(e.getCheckEventResponse(a)){var b;b=null!=a.data?a.data.payload:null;null!=b?(this._deviceOS=b.deviceOS,this._osRelease=b.deviceOSReleaseVersion,this._osVersion=b.deviceOSVersion,this._deviceType=b.deviceType,this._deviceUUID=b.deviceUUID,this._pairingTypes=b.pairingTypes,this._hello=!0,this._socket.getJSONMessage(this,new L("2A",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event}),{type:"register",payload:{manifest:this._manifest}},this._timeout)):e.getEventResponse(a,{success:!0,available:!1})}},getRegisterHandler:function(a){if(e.getCheckEventResponse(a)){var b=null!=a.data&&"registered"==A.trim(D.string(a.data.type).toLowerCase());null!=a.data&&null!=a.data.payload&&null!=r.field(a.data.payload,"client-key")?this._clientKey=r.field(a.data.payload,"client-key"):this._clientKey="";e.getEventResponse(a,{success:!0,available:b})}},getConnectHandler:function(a){if(e.getCheckEventResponse(a)){var b=null!=a.data&&a.data.available&&a.data.success&&2==this._socket.get_state();e.getEventResponse(a,b?{success:!0,result:!0}:{success:!0,result:!1,error:6})}},getCheckStateHandler:function(a){if(e.getCheckEventResponse(a)){var b=a.params.content;null!=a.data&&1==a.data.success&&a.data.result?this._socket.getJSONMessage(this,new L("34",!1,!1,{dispatcher:a.params.dispatcher,event:a.params.event,content:b}),{type:"request",uri:"ssap://system.launcher/launch",payload:{id:this._appId,params:{content:b}}},this._timeout):e.getEventResponse(a,{success:!0,result:!1})}},getLaunchHandler:function(a){e.getCheckEventResponse(a)&&e.getEventResponse(a,{success:!0,result:!0})},__class__:ba,__properties__:{get_pairing:"get_pairing",get_device:"get_device"}});var pb=function(){};u["modules.services.vos.ChannelVO"]=pb;pb.__name__=["modules","services","vos","ChannelVO"];pb.prototype={aliases:null,__class__:pb};var Aa=function(a,b,c,d,f,g,k,h,n,m,r,l){null==l&&(l="");null==r&&(r="");null==m&&(m=-1);null==n&&(n=-1);null==h&&(h=0);null==k&&(k="");null==g&&(g="");null==f&&(f="");this.type=a;this.source=b;this.channelId=c;this.title=d;this.group=f;this.logo=g;this.audioTrack=k;this.shift=h;this.order=n;this.duration=m;this.aspectRatio=r;this._ext=e.decodeJSON(l);this.id=this.text=this.description=this.tvgName="";this.credentials=this.uid=null};u["modules.services.vos.ContentVO"]=Aa;Aa.__name__=["modules","services","vos","ContentVO"];Aa.prototype={type:null,source:null,channelId:null,title:null,group:null,id:null,logo:null,description:null,text:null,audioTrack:null,shift:null,order:null,duration:null,aspectRatio:null,uid:null,credentials:null,_ext:null,tvgName:null,_private:null,get_ext:function(){return this._ext},updateExt:function(a){this._ext=a;null==this._private&&(this._private={});this._private.hash=null},__class__:Aa,__properties__:{get_ext:"get_ext"}};var db=function(a){null==a&&(a={});null!=a.id?H.__instanceof(a.id,Za)?this.id=a.id:this.id=e.parseInt(D.string(a.id)):this.id=-1;this.uid=null!=a.uid?D.string(a.uid):"";null!=a.vendorId?H.__instanceof(a.vendorId,Za)?this.vendorId=a.vendorId:this.vendorId=e.parseInt(D.string(a.vendorId)):this.vendorId=-1;this.ip=null!=a.ip?D.string(a.ip):"";this.key=null!=a.key?D.string(a.key):"";this.type=null!=a.type?e.parseInt(D.string(a.type),0):0;this.group=null!=a.group?D.string(a.group):"";this.model=null!=a.model?D.string(a.model):"";this.year=null!=a.year?e.parseInt(D.string(a.year),0):0;this.name=null!=a.name?D.string(a.name):""};u["modules.services.vos.DeviceVO"]=db;db.__name__=["modules","services","vos","DeviceVO"];db.prototype={id:null,uid:null,vendorId:null,ip:null,key:null,type:null,group:null,model:null,year:null,name:null,__class__:db};var V=function(a){};u["modules.site.SiteManager"]=V;V.__name__=["modules","site","SiteManager"];V.getInstance=function(){null==V.__instance&&(V.__instance=new V);return V.__instance};V.prototype={getCreateUploadButton:function(a,b,c){sa.getInstance().getCreate(a,b,c)},getUseExternalLogo:function(a,b){b.data={success:!0,value:J.getInstance().read("useExternalLogo",!1)};a.dispatchEvent(b)},setUseExternalLogo:function(a,b,c){b.data={success:!0,value:J.getInstance().write("useExternalLogo",c)};a.dispatchEvent(b)},getYouTubeId:function(a){var b="";a=A.trim(a);var c=new O("^https?://(?:www\\.|)youtu(?:\\.be/|be\\.com/)(v/|u/\\w/|embed/|watch\\?v=|&v=)([^#&\\?]*).*","");if(c.match(a)&&11==c.matched(2).length)b=c.matched(2);else{var d=a.toLowerCase(),c=0==d.indexOf("plugin://plugin.video.youtube")?d.indexOf("videoid="):-1;0<c&&(b=d.indexOf("&",c+8),b=A.trim(a.substring(c+8,b>c+8?b:a.length)))}return b},getContentImageSource:function(a){var b=J.getInstance().get_ready()&&J.getInstance().read("useExternalLogo",!1),c="";null!=a&&(b&&null!=a.logo&&"string"==typeof a.logo&&0<a.logo.length&&(c=a.logo),""==c&&(1==a.type||2==a.type||6==a.type||19==a.type||3==a.type||5==a.type?2!=a.type&&5!=a.type?(b=new O("https?://(www\\.|)twitch\\.tv/([^/]+)","i"),c=null!=a.source&&b.match(null==a.source?"null":""+a.source)?"http://static-cdn.jtvnw.net/previews-ttv/live_user_"+b.matched(2)+"-90x60.jpg?r="+D.string(Math.floor(e.get_timestamp()/10)):0<a.channelId?"http://img.ss-iptv.com/?action=getChannelLogo&id="+(null==a.channelId?"null":""+a.channelId):""):null!=a.channelId&&0<a.channelId&&(c="http://img.ss-iptv.com/?action=getChannelLogo&id="+(null==a.channelId?"null":""+a.channelId)):4==a.type&&null!=a.source&&(a=this.getYouTubeId(null==a.source?"null":""+a.source),c=""==a||null==a?"":"http://img.youtube.com/vi/"+a+"/default.jpg")));return c},getSourceParams:function(a){return e.getURLParams(a,!0)},setSourceParams:function(a,b){return e.setURLParams(a,e.set(e.getURLParams(a,!0),b),!0,!0,!1)},getCreateContentVO:function(a){a=W.getInstance().getSourceDescription(a);return new Aa(null!=a?a.type:-1,"",-1,"")},getEncodeJSON:function(a){return e.encodeJSON(a)},getDecodeJSON:function(a){return e.decodeJSON(a,{})},__class__:V};var sa=function(a){z.call(this,null==a?{}:a)};u["modules.site.UploadButton"]=sa;sa.__name__=["modules","site","UploadButton"];sa.getInstance=function(){null==sa.__instance&&(sa.__instance=new sa);return sa.__instance};sa.__super__=z;sa.prototype=N(z.prototype,{getCreate:function(a,b,c){var d,f,g;if(window.File&&window.FileReader&&window.FileList&&window.Blob){var k=[];d=0;for(var h=b.length;d<h;){var n=d++;k.push(A.replace(D.string(b[n][1]),"*.","."))}d=e.createTag("div",{id:"html5fileUploader"},a);e.set(d.style,{position:"absolute",left:"0px",top:"0px",width:D.string(a.clientWidth)+"px",height:D.string(a.clientHeight)+"px",opacity:0,overflow:"hidden",cursor:"default"});f=e.createTag("input",{type:"file",accept:k.join(","),width:400},d);e.set(f.style,{position:"absolute",left:"-110px",top:"-110px",width:"0px",height:"0px",opacity:0,cursor:"default","outline-style":"none","box-shadow":"none"});a.addEventListener("click",function(a){f.click(a);null!=a.stopPropagation&&a.stopPropagation();null!=a.preventDefault&&a.preventDefault()});f.addEventListener("click",function(a){null!=a.stopPropagation&&a.stopPropagation()},!0);f.addEventListener("change",function(a){if(0<a.target.files.length){var b=a.target.files,d=new FileReader,e=b[0].type,f=b[0].name;d.onload=function(a){c({data:null!=a&&null!=a.target&&null!=a.target.result?a.target.result:"",name:f,type:e})};d.readAsText(b[0])}null!=a.stopPropagation&&a.stopPropagation();null!=a.preventDefault&&a.preventDefault()})}else if(window.jsBridgeContentHandler=function(a,b,d){c({data:a,name:b,type:d})},k=function(a){null!=a&&(a.setTypes(b),a.setContentHandler("jsBridgeContentHandler"),a.setTextResponse())},null!=a){n=0<(null!=window.navigator&&null!=window.navigator.userAgent?window.navigator.userAgent:"").toLowerCase().indexOf("msie ");d=e.createTag("div",{},a);d.style.position="absolute";d.style.left="0px";d.style.top="0px";h=!1;if(n)try{g=window.document.createElement("<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' />")}catch(p){p instanceof t&&(p=p.val),d.innerHTML="<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' />",g=d.firstChild,h=!0}else g=e.createTag("object",{type:"application/x-shockwave-flash",data:"/services/bridge.swf"});a={width:a.clientWidth,height:a.clientHeight,id:"flashOverlayUplaoder"};for(var m=0,u=r.fields(a);m<u.length;){var l=u[m];++m;g.setAttribute(l,r.field(a,l))}a=e.set({allowScriptAccess:"always",wmode:"transparent"},n?{movie:"/services/bridge.swf"}:{});n=0;for(m=r.fields(a);n<m.length;)u=m[n],++n,g.appendChild(e.createTag("param",{name:u,value:r.field(a,u)},g));h||d.appendChild(g);d=function(a){null!=a&&null!=a.instance&&null!=a.instance.getPing&&a.instance.getPing()&&null!=a.readyHandler?a.readyHandler.call(a.link,g):null!=a&&(a.iteration=null==a.iteration?0:a.iteration+1,1e3>a.iteration&&window.setTimeout(function(){a.handler.call(a.link,a)},500))};d.call(this,{timerId:-1,instance:g,handler:d,link:this,iteration:0,readyHandler:k,contentHandler:c})}},__class__:sa});var ra=function(a){z.call(this,null!=a?a:a={});this._limit=102400;this._params=a;this._connectionId=0;this._timeout=1e3*e.clamp(1,e.parseInt(a.timeout,20),86400);this._retryTimer=new la({delay:1e3,repeats:0});this.clear();this.set_source(a.source);this.defineEventHandlers();this.connect()};u["modules.tools.MessagesBus"]=ra;ra.__name__=["modules","tools","MessagesBus"];ra.__super__=z;ra.prototype=N(z.prototype,{_connectionId:null,_source:null,_channelId:null,_masterId:null,_currentId:null,_clientIds:null,_state:null,_params:null,_isMaster:null,_limit:null,_listen:null,_timeout:null,_retryTimer:null,timeout:null,state:null,clients:null,defineEventHandlers:function(){this.addEventListener("4",x(this,this.requestCompleteHandler),this);this._retryTimer.addEventListener("53",x(this,this.retryTimerTickHandler),this)},set_source:function(a){a=A.trim(a);for(var b=a.length-1;0<=b&&"/"==a.charAt(b);)b--;a=0<b?w.substr(a,0,b+1):"";a!=this._source&&(this.leave(),this._source=a);return this._source},get_source:function(){return this._source},get_timeout:function(){return this._timeout},get_state:function(){return this._state},get_clients:function(){return 2==this._state?r.fields(this._clientIds):[]},clear:function(){this._state=0;this._channelId="";this._isMaster=!1;this._currentId=this._masterId="";this._clientIds={};this._listen=!1},connect:function(){null!=this._params&&"string"==typeof this._params.channelId&&(null!=this._params.create?this.create(null!=this._params.create?this._params.create.dispatcher:null,null!=this._params.join?this._params.create.event:null,this._params.channelId):this.join(null!=this._params.join?this._params.join.dispatcher:null,null!=this._params.join?this._params.join.event:null,this._params.channelId))},create:function(a,b,c){c=A.trim(c);0==this._state&&0<c.length?(this._channelId=c,this._state=1,M.getCustomRequest("GET",this._source+"/"+this._channelId+"/create/",[],this,new I("4",!1,!1,{dispatcher:a,event:b,type:"create",connectionId:++this._connectionId}),this._limit,5e3)):e.getDispatch(a,b,null,{success:!1,error:0==c.length?3:1})},join:function(a,b,c){c=A.trim(c);0==this._state&&0<c.length?(this._channelId=c,this._state=1,M.getCustomRequest("GET",this._source+"/"+this._channelId+"/join/"+this._masterId,[],this,new I("4",!1,!1,{dispatcher:a,event:b,type:"join",connectionId:++this._connectionId}),this._limit,5e3)):e.getDispatch(a,b,null,{success:!1,error:1})},send:function(a,b,c,d){2==this._state?M.getCustomRequest("POST",this._source+"/"+this._channelId+"/send/"+this._currentId+"/"+c,[],this,new I("4",!1,!1,{type:"send",connectionId:this._connectionId}),this._limit,this._timeout,0,"data="+A.urlEncode(e.encodeJSON(d))):e.getDispatch(a,b,null,{success:!1,error:2})},listen:function(){0==this._channelId.length&&(this._state=0);2==this._state&&(this._listen=!0,M.getCustomRequest("GET",this._source+"/"+this._channelId+"/listen/"+this._currentId,[],this,new I("4",!1,!1,{type:"listen",connectionId:++this._connectionId}),this._limit,this._timeout))},disconnect:function(){this.clear();this._connectionId++;this._retryTimer._active||this._retryTimer.restart()},leave:function(){this.clear();this._connectionId++;this._retryTimer.abort()},changeStateHandler:function(a,b){"join"==a?r.setField(this._clientIds,b.from,{timestamp:e.get_timestamp()}):"leave"==a?r.deleteField(this._clientIds,b.from):"close"==a?this.disconnect():"payload"==a&&this.dispatchEvent(new I("7",!1,!1,{},{from:b.from,data:b.data}))},requestCompleteHandler:function(a){a.params=null==a.params?{}:a.params;if(a.params.connectionId==this._connectionId){var b;b=null!=a.params?a.params.type:"";if("create"==b){b=null;try{b=e.decodeJSON(a.data.xhr.responseText,null)}catch(c){c instanceof t&&(c=c.val)}null!=b&&"string"==typeof b.id&&(this._masterId=this._currentId=e.trim(b.id));this._state=0<this._masterId.length?2:0;2==this._state?(this._isMaster=!0,this.listen(),e.getDispatch(a.params.dispatcher,a.params.event,null,{success:2==this._state,master:this._masterId})):this.disconnect()}else if("join"==b){b=null;try{b=e.decodeJSON(a.data.xhr.responseText,null)}catch(c){c instanceof t&&(c=c.val)}null!=b&&"string"==typeof b.id&&"string"==typeof b.master&&(this._currentId=e.trim(b.id),this._masterId=e.trim(b.master));this._state=0<this._masterId.length?2:0;2==this._state&&this.listen();e.getDispatch(a.params.dispatcher,a.params.event,null,{success:2==this._state,master:this._masterId})}else if("listen"==b&&2==this._state){b=null;try{b=e.decodeJSON(a.data.xhr.responseText,null)}catch(c){c instanceof t&&(c=c.val)}null!=b&&null!=b.type&&this.changeStateHandler(b.type,b);this._listen=!1;"timeout"==a.data.reason||null!=b&&(1==b.success||null!=b.type)?this.listen():this.disconnect()}}},retryTimerTickHandler:function(a){500>a.repeat&&2!=this._state?this.connect():this._retryTimer.abort()},__class__:ra,__properties__:{get_clients:"get_clients",get_state:"get_state",get_timeout:"get_timeout",set_source:"set_source",get_source:"get_source"}});var ka=function(a){};u["modules.tools.ToolsManager"]=ka;ka.__name__=["modules","tools","ToolsManager"];ka.getInstance=function(){null==ka.__instance&&(ka.__instance=new ka);return ka.__instance};ka.prototype={decode:function(a){return e.decodeJSON(P.ofData(ta.decodeBytesData(a)).toString())},decodeWithKey:function(a,b){return e.decodeJSON(Ka.decode(ta.decodeBytesData(a),b))},decodeDeviceId:function(a,b){if(null==b||""==b)b="abcdefghi";return D.string(D.parseInt("0x"+Ka.decode(ta.decodeBytesData(a),b)))},__class__:ka};var rb,vb=0;Array.prototype.indexOf&&(w.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});Array.prototype.lastIndexOf&&(w.lastIndexOf=function(a,b,c){return Array.prototype.lastIndexOf.call(a,b,c)});u.Math=Math;String.prototype.__class__=u.String=String;String.__name__=["String"];u.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=u.Date=Date;Date.__name__=["Date"];var Za=u.Int={__name__:["Int"]},wb=u.Dynamic={__name__:["Dynamic"]},tb=u.Float=Number;tb.__name__=["Float"];var ub=Boolean;ub.__ename__=["Bool"];var xb=u.Class={__name__:["Class"]},yb={},La={},nb=qb.ArrayBuffer||pa;null==nb.prototype.slice&&(nb.prototype.slice=pa.sliceImpl);var lb=qb.Uint8Array||Da._new;k.Element=0;k.PCData=1;k.CData=2;k.Comment=3;k.DocType=4;k.ProcessingInstruction=5;k.Document=6;z.eventCounter=0;aa.county_codes="afafgaxalaalalbdzdzaasasmadandaoagoaiaiaaqataagatgarargamarmawabwauausatautazazebsbhsbhbhrbdbgdbbbrbbyblrbebelbzblzbjbenbmbmubtbtnbobolbqbesbabihbwbwabvbvtbrbraioiotbnbrnbgbgrbfbfabibdikhkhmcmcmrcacancvcpvkycymcfcaftdtcdclchlcnchncxcxrcccckcocolkmcomcgcogcdcodckcokcrcricicivhrhrvcucubcwcuwcycypczczedkdnkdjdjidmdmadodomececuegegysvslvgqgnqererieeestetethfkflkfofrofjfjififinfrfragfgufpfpyftfatfgagabgmgmbgegeodedeughghagigibgrgrcglgrlgdgrdgpglpgugumgtgtmggggygngingwgnbgyguyhthtihmhmdvavathnhndhkhkghuhunisislinindididnirirniqirqieirlimimnilisrititajmjamjpjpnjejeyjojorkzkazkekenkikirkpprkkrkorkwkwtkgkgzlalaolvlvalblbnlslsolrlbrlylbylilieltltululuxmomacmkmkdmgmdgmwmwimymysmvmdvmlmlimtmltmhmhlmqmtqmrmrtmumusytmytmxmexfmfsmmdmdamcmcomnmngmemnemsmsrmamarmzmozmmmmrnanamnrnrunpnplnlnldncnclnznzlninicnenerngnganuniunfnfkmpmnpnonoromomnpkpakpwplwpspsepapanpgpngpyprypeperphphlpnpcnplpolptprtprpriqaqatrereuroroururusrwrwablblmshshnknknalclcamfmafpmspmvcvctwswsmsmsmrststpsasausnsenrssrbscsycslslesgsgpsxsxmsksvksisvnsbslbsosomzazafgssgsssssdesesplklkasdsdnsrsursjsjmszswzseswechchesysyrtwtwntjtjktztzaththatltlstgtgotktkltotonttttotntuntrturtmtkmtctcatvtuvugugauaukraearegbgbrususaumumiuyuryuzuzbvuvutvevenvnvnmvgvgbvivirwfwlfeheshyeyemzmzmbzwzwe";Ha.__index=0;M.HTTP_REQUEST_TYPE_GET="GET";M.HTTP_REQUEST_TYPE_POST="POST";M.HTTP_REQUEST_XML="XML";M.HTTP_REQUEST_JSON="JSON";M.HTTP_REQUEST_TEXT="TEXT";M.HTTP_REQUEST_JSONP="JSONP";M.callbackIndex=0;la._timersCount=0;la._timersTicks=0;e._timestampDiff=0;e._defaultSymbolsMap="aaaaceioou";e._symbolsReplaceMap=null;va.WEBSOCKET_STATE_NONE=0;va.WEBSOCKET_STATE_OPEN=1;va.WEBSOCKET_STATE_READY=2;va.WEBSOCKET_STATE_CLOSED=3;na.OBJECT_REFERENCE_PREFIX="@~obRef#";oa.i64tmp=new kb(0,0);Ba.escapes=function(a){a=new Fa;null!=La.lt?a.setReserved("lt","<"):a.h.lt="<";null!=La.gt?a.setReserved("gt",">"):a.h.gt=">";null!=La.amp?a.setReserved("amp","&"):a.h.amp="&";null!=La.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=La.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);H.__toStr={}.toString;Da.BYTES_PER_ELEMENT=1;W.__instance=null;C.PLATFORM_BROWSER="Browser";C.PLATFORM_NETCAST="NetCast";C.PLATFORM_WEBOS="WebOS";C.PLATFORM_MAPLE="Maple";C.PLATFORM_TIZEN="Tizen";C.PLATFORM_NETTV="NetTV";C.PLATFORM_BRAVIA="Bravia";C.PLATFORM_VIERA="Viera";C.PLATFORM_ALLIANCE="Alliance";C.PLATFORM_ANDROIDTV="AndroidTV";C.PLATFORM_INFOMIR="Infomir";C.PLATFORM_DUNEHD="DuneHD";C.PLATFORM_FIRETV="FireTV";C.PLATFROM_OPERATV="OperaTV";C.VENDORID_BROWSER=1;C.VENDORID_NETCAST=2;C.VENDORID_WEBOS=3;C.VENDORID_MAPLE=4;C.VENDORID_TIZEN=5;C.VENDORID_NETTV=6;C.VENDORID_BRAVIA=7;C.VENDORID_VIERA=8;C.VENDORID_ALLIANCE=9;C.VENDORID_ANDROIDTV=10;C.VENDORID_INFOMIR=11;C.VENDORID_DUNEHD=12;C.VENDORID_FIRETV=13;C.VENDORID_OPERATV=14;C.VENDORID_FIREFOXOS=15;C.VENDORID_PLAYSTATION=16;C.VENDORID_GENERIC=17;C.VENDORID_ARCELIK=18;C.VENDORID_VIDAA=19;C.DEVICE_TV="TV";C.DEVICE_MEDIA="Media";ha.__instance=null;Q.__instance=null;U.__instance=null;J.__instance=null;ba.__instance=null;ba._messageId=0;ba.listOpenPermissions=["LAUNCH","LAUNCH_WEBAPP","APP_TO_APP","CONTROL_AUDIO","CONTROL_INPUT_MEDIA_PLAYBACK"];ba.listPersonalActivityPermissions=["CONTROL_INPUT_TEXT","CONTROL_MOUSE_AND_KEYBOARD","READ_CURRENT_CHANNEL","READ_RUNNING_APPS"];ba.listProtectedPermissions="CONTROL_POWER READ_INSTALLED_APPS CONTROL_DISPLAY CONTROL_INPUT_JOYSTICK CONTROL_INPUT_MEDIA_RECORDING CONTROL_INPUT_TV READ_INPUT_DEVICE_LIST READ_NETWORK_STATE READ_TV_CHANNEL_LIST WRITE_NOTIFICATION_TOAST".split(" ");V.__instance=null;sa.__instance=null;ra.ERROR_HAS_CONNECTION=1;ra.ERROR_NOT_CONNECTED=2;ra.ERROR_WRONG_CHANNELID=3;ra.STATE_UNDEFINED=0;ra.STATE_CONNECTION=1;ra.STATE_LISTENING=2;ka.__instance=null;Z.main()})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);